<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>JWT学习--登录逻辑实现</title>
      <link href="/2023/08/08/JWT%E5%AD%A6%E4%B9%A0-%E7%99%BB%E5%BD%95%E9%80%BB%E8%BE%91%E5%AE%9E%E7%8E%B0/"/>
      <url>/2023/08/08/JWT%E5%AD%A6%E4%B9%A0-%E7%99%BB%E5%BD%95%E9%80%BB%E8%BE%91%E5%AE%9E%E7%8E%B0/</url>
      
        <content type="html"><![CDATA[<h1 id="JWT学习–登录逻辑"><a href="#JWT学习–登录逻辑" class="headerlink" title="JWT学习–登录逻辑"></a>JWT学习–登录逻辑</h1><blockquote><p><a class="link"   href="https://jwt.io/%EF%BC%88jwt%E8%A7%A3%E6%9E%90%E5%B9%B3%E5%8F%B0" >https://jwt.io/（jwt解析平台<i class="fas fa-external-link-alt"></i></a> 非常好用）</p></blockquote><h2 id="这是个什么玩意？"><a href="#这是个什么玩意？" class="headerlink" title="这是个什么玩意？"></a>这是个什么玩意？</h2><p>JSON Web Token的缩写，是一种基于JSON格式的用于进行身份认证的令牌。它可以将用户身份信息以JSON格式进行编码，并采用数字签名的方式保证其不被篡改。JWT可以通过在HTTP请求头中传递它来实现跨域身份认证，从而实现无状态分布式认证。</p><p>目前主流的一些平台登录都是使用的这个，通过浏览器中浏览cookie或者localstorage都能找到。</p><p>JWT（Json Web Token）：Token技术的一种现有标准，也是目前最流行的跨域认证解决方案。JWT主要由Header（头部），Payload（负载），Signature（签名）三部分组成。如下图示例：</p><p><img src="/img/image-20230808190423502.png" alt="image-20230808190423502"></p><h3 id="HEADER-ALGORITHM-amp-TOKEN-TYPE"><a href="#HEADER-ALGORITHM-amp-TOKEN-TYPE" class="headerlink" title="HEADER: ALGORITHM &amp; TOKEN TYPE"></a>HEADER: ALGORITHM &amp; TOKEN TYPE</h3><p>JWT 头部分是一个描述 JWT 元数据的 JSON 对象：</p><ul><li>alg：表示加密算法，HS256 是 HMAC SHA256 的缩写</li><li>typ：token 类型</li></ul><p>JavaScript</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;alg&quot;</span>: <span class="string">&quot;HS256&quot;</span>,</span><br><span class="line">  <span class="string">&quot;typ&quot;</span>: <span class="string">&quot;JWT&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="PAYLOAD-DATA"><a href="#PAYLOAD-DATA" class="headerlink" title="PAYLOAD: DATA"></a>PAYLOAD: DATA</h3><p>JWT 数据部分，payload 是 JWT 的主体内容部分，也是一个 JSON 字符串，包含需要传递的数据，注意 payload 部分不要存储隐私数据，防止信息泄露</p><p>JavaScript</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;sub&quot;</span>: <span class="string">&quot;1234567890&quot;</span>,</span><br><span class="line">  <span class="string">&quot;name&quot;</span>: <span class="string">&quot;John Doe&quot;</span>,</span><br><span class="line">  <span class="string">&quot;iat&quot;</span>: <span class="number">1516239022</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="VERIFY-SIGNATURE"><a href="#VERIFY-SIGNATURE" class="headerlink" title="VERIFY SIGNATURE"></a>VERIFY SIGNATURE</h3><p>JWT 签名部分是对上面两部分数据加密后生成的字符串，通过 header 指定的算法生成加密字符串，以确保数据不会被篡改。</p><p>生成签名时需要使用密钥（即下方示例中的 abcdefg），密钥只保存在服务端，不能向用户公开，它是一个字符串，我们可以自由指定。</p><p>生成签名时需要根据 header 中指定的签名算法，并根据下方的公式，即将 header 和 payload 的数据通过 base64加密后用 <code>.</code> 进行连接，然后通过密钥进行 SHA256 加密，由于加入了密钥，所以生成的字符串将无法被破译和篡改，只有在服务端才能还原</p><p>JavaScript</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">HMACSHA256</span>(</span><br><span class="line">  <span class="title function_">base64UrlEncode</span>(header) + <span class="string">&quot;.&quot;</span> +</span><br><span class="line">  <span class="title function_">base64UrlEncode</span>(payload),</span><br><span class="line">  abcdefg</span><br><span class="line">)</span><br></pre></td></tr></table></figure><h2 id="个人感悟"><a href="#个人感悟" class="headerlink" title="个人感悟"></a>个人感悟</h2><p>其实这个东西不难理解，客户端向服务端发送账号密码，服务端返回给客户端一个jwt，而自己留存一个secret（这玩意只有服务端知道，客户端肯定拿不到），然后以后客户端发送请求的时候，服务端进行一次计算操作，</p><p>这个计算式这样的</p><p>header中使用的加密算法（”Header+.+Payload“，secret）&#x3D;结果</p><p>这个结果就是signature，然后再和发送过来的jwt的signature进行比对，如果一致那么准许客户端访问服务端的页面。</p><p>也正是这样防止了客户端对请求中的header和payload进行更改，因为你一旦进行更改两者中的任意一个 对最后计算得到的signature产生影响，最后服务端将计算得到的signature和jwt中的signature进行比对发现不一致，那么服务端就不允许你访问页面了。</p><p><strong>当然你的secret也就是密钥如果被别人知道了，那么你的网站大概率是要玩完的。</strong></p><h2 id="实现"><a href="#实现" class="headerlink" title="实现"></a>实现</h2><h3 id="flask后端"><a href="#flask后端" class="headerlink" title="flask后端"></a>flask后端</h3><p>数据库连接啥的自己去配。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&quot;/login&quot;</span>, methods=[<span class="string">&quot;POST&quot;</span>]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">login</span>():</span><br><span class="line">    data = request.json</span><br><span class="line">    username = data.get(<span class="string">&quot;username&quot;</span>)</span><br><span class="line">    password = data.get(<span class="string">&quot;password&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 查询数据库验证用户名和密码</span></span><br><span class="line">    <span class="keyword">with</span> db.cursor() <span class="keyword">as</span> cursor:</span><br><span class="line">        query = <span class="string">&quot;SELECT * FROM users WHERE username = %s AND password = %s&quot;</span></span><br><span class="line">        cursor.execute(query, (username, password))</span><br><span class="line">        user = cursor.fetchone()</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> user:</span><br><span class="line">            <span class="comment"># 设置过期时间为5秒后</span></span><br><span class="line">            expiration = datetime.utcnow() + timedelta(seconds=<span class="number">5</span>)</span><br><span class="line">            <span class="comment"># 生成JWT令牌</span></span><br><span class="line">            token = jwt.encode(</span><br><span class="line">                &#123;<span class="string">&quot;id&quot;</span>: user[<span class="number">0</span>], <span class="string">&quot;username&quot;</span>: user[<span class="number">1</span>], <span class="string">&quot;exp&quot;</span>: expiration&#125;,</span><br><span class="line">                <span class="string">&quot;magic你想写啥就写啥 一个密钥而已&quot;</span>,</span><br><span class="line">                algorithm=<span class="string">&quot;HS256&quot;</span></span><br><span class="line">            )</span><br><span class="line">            <span class="keyword">return</span> jsonify(&#123;<span class="string">&quot;token&quot;</span>: token&#125;)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> jsonify(&#123;<span class="string">&quot;message&quot;</span>: <span class="string">&quot;Authentication failed.&quot;</span>&#125;), <span class="number">401</span></span><br><span class="line"><span class="comment"># 受保护的路由，需要验证JWT</span></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&quot;/protected&quot;</span>, methods=[<span class="string">&quot;GET&quot;</span>]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">protected</span>():</span><br><span class="line">    token = request.headers.get(<span class="string">&quot;Authorization&quot;</span>).split()[<span class="number">1</span>]</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        decoded = jwt.decode(token, <span class="string">&quot;your_secret_key&quot;</span>, algorithms=[<span class="string">&quot;HS256&quot;</span>])</span><br><span class="line">        <span class="keyword">return</span> jsonify(&#123;<span class="string">&quot;message&quot;</span>: <span class="string">&quot;Protected route accessed.&quot;</span>&#125;)</span><br><span class="line">    <span class="keyword">except</span> jwt.ExpiredSignatureError:</span><br><span class="line">        <span class="keyword">return</span> jsonify(&#123;<span class="string">&quot;message&quot;</span>: <span class="string">&quot;Token has expired.&quot;</span>&#125;), <span class="number">401</span></span><br><span class="line">    <span class="keyword">except</span> jwt.DecodeError:</span><br><span class="line">        <span class="keyword">return</span> jsonify(&#123;<span class="string">&quot;message&quot;</span>: <span class="string">&quot;Token is invalid.&quot;</span>&#125;), <span class="number">401</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    app.run(host=<span class="string">&quot;0.0.0.0&quot;</span>, port=<span class="number">5000</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="react前端"><a href="#react前端" class="headerlink" title="react前端"></a>react前端</h3><p>使用了一个bootstrap的UI，然后自定义了一些css文件方便查看。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Container</span>, <span class="title class_">Form</span>, <span class="title class_">Button</span>, <span class="title class_">Row</span>, <span class="title class_">Col</span>, <span class="title class_">Alert</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;react-bootstrap&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;../YourCustomStyle.css&#x27;</span>; <span class="comment">// 导入自定义的CSS样式文件</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">Login</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> [username, setUsername] = <span class="title function_">useState</span>(<span class="string">&#x27;&#x27;</span>);</span><br><span class="line">  <span class="keyword">const</span> [password, setPassword] = <span class="title function_">useState</span>(<span class="string">&#x27;&#x27;</span>);</span><br><span class="line">  <span class="keyword">const</span> [accessAllowed, setAccessAllowed] = <span class="title function_">useState</span>(<span class="literal">null</span>);</span><br><span class="line">  <span class="keyword">const</span> [loggedIn, setLoggedIn] = <span class="title function_">useState</span>(<span class="literal">false</span>); <span class="comment">// 新增状态变量</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">handleUsernameChange</span> = (<span class="params">event</span>) =&gt; &#123;</span><br><span class="line">    <span class="title function_">setUsername</span>(event.<span class="property">target</span>.<span class="property">value</span>);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">handlePasswordChange</span> = (<span class="params">event</span>) =&gt; &#123;</span><br><span class="line">    <span class="title function_">setPassword</span>(event.<span class="property">target</span>.<span class="property">value</span>);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">handleLogin</span> = <span class="keyword">async</span> (<span class="params">event</span>) =&gt; &#123;</span><br><span class="line">    event.<span class="title function_">preventDefault</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> response = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">&#x27;http://localhost:5000/login&#x27;</span>, &#123;</span><br><span class="line">        <span class="attr">method</span>: <span class="string">&#x27;POST&#x27;</span>,</span><br><span class="line">        <span class="attr">headers</span>: &#123;</span><br><span class="line">          <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/json&#x27;</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">body</span>: <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(&#123; username, password &#125;),</span><br><span class="line">      &#125;);</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (response.<span class="property">ok</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> data = <span class="keyword">await</span> response.<span class="title function_">json</span>();</span><br><span class="line">        <span class="keyword">const</span> token = data.<span class="property">token</span>; <span class="comment">// 从响应中获取JWT令牌</span></span><br><span class="line">        <span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(<span class="string">&#x27;token&#x27;</span>, token); <span class="comment">// 存储令牌</span></span><br><span class="line">        <span class="title function_">setAccessAllowed</span>(<span class="literal">true</span>); <span class="comment">// 设置允许访问状态</span></span><br><span class="line">        <span class="title function_">setLoggedIn</span>(<span class="literal">true</span>); <span class="comment">// 设置已登录状态</span></span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="title function_">setAccessAllowed</span>(<span class="literal">false</span>); <span class="comment">// 设置不允许访问状态</span></span><br><span class="line">        <span class="title function_">setLoggedIn</span>(<span class="literal">false</span>); <span class="comment">// 设置未登录状态</span></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;Login failed&#x27;</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;An error occurred:&#x27;</span>, error);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">handleProtectedAccess</span> = <span class="keyword">async</span> (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> token = <span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&#x27;token&#x27;</span>);</span><br><span class="line"></span><br><span class="line">      <span class="keyword">const</span> response = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">&#x27;http://localhost:5000/protected&#x27;</span>, &#123;</span><br><span class="line">        <span class="attr">method</span>: <span class="string">&#x27;GET&#x27;</span>,</span><br><span class="line">        <span class="attr">headers</span>: &#123;</span><br><span class="line">          <span class="title class_">Authorization</span>: <span class="string">`Bearer <span class="subst">$&#123;token&#125;</span>`</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;);</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (response.<span class="property">ok</span>) &#123;</span><br><span class="line">        <span class="title function_">setAccessAllowed</span>(<span class="literal">true</span>);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="title function_">setAccessAllowed</span>(<span class="literal">false</span>);</span><br><span class="line">        <span class="title function_">setLoggedIn</span>(<span class="literal">false</span>); <span class="comment">// 设置未登录状态</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;An error occurred:&#x27;</span>, error);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">Container</span> <span class="attr">className</span>=<span class="string">&quot;mt-5&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;!loggedIn &amp;&amp; ( // 显示表单只有在未登录状态下才有效</span></span><br><span class="line"><span class="language-xml">         <span class="tag">&lt;<span class="name">Form</span> <span class="attr">onSubmit</span>=<span class="string">&#123;handleLogin&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">         <span class="tag">&lt;<span class="name">Form.Group</span> <span class="attr">controlId</span>=<span class="string">&quot;formUsername&quot;</span> <span class="attr">className</span>=<span class="string">&#x27;custom-font&#x27;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">           <span class="tag">&lt;<span class="name">Row</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">             <span class="tag">&lt;<span class="name">Col</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">               <span class="tag">&lt;<span class="name">Form.Label</span>&gt;</span>用户名<span class="tag">&lt;/<span class="name">Form.Label</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">             <span class="tag">&lt;/<span class="name">Col</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">           <span class="tag">&lt;/<span class="name">Row</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">           <span class="tag">&lt;<span class="name">Row</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">             <span class="tag">&lt;<span class="name">Col</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">               <span class="tag">&lt;<span class="name">Form.Control</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                 <span class="attr">type</span>=<span class="string">&quot;text&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                 <span class="attr">placeholder</span>=<span class="string">&quot;请输入用户名&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                 <span class="attr">value</span>=<span class="string">&#123;username&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                 <span class="attr">onChange</span>=<span class="string">&#123;handleUsernameChange&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">               /&gt;</span></span></span><br><span class="line"><span class="language-xml">             <span class="tag">&lt;/<span class="name">Col</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">           <span class="tag">&lt;/<span class="name">Row</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">         <span class="tag">&lt;/<span class="name">Form.Group</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"> </span></span><br><span class="line"><span class="language-xml">         <span class="tag">&lt;<span class="name">Form.Group</span> <span class="attr">controlId</span>=<span class="string">&quot;formPassword&quot;</span> <span class="attr">className</span>=<span class="string">&#x27;custom-font&#x27;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">           <span class="tag">&lt;<span class="name">Form.Label</span>&gt;</span>密码<span class="tag">&lt;/<span class="name">Form.Label</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">           <span class="tag">&lt;<span class="name">Form.Control</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">             <span class="attr">type</span>=<span class="string">&quot;password&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">             <span class="attr">placeholder</span>=<span class="string">&quot;请输入密码&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">             <span class="attr">value</span>=<span class="string">&#123;password&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">             <span class="attr">onChange</span>=<span class="string">&#123;handlePasswordChange&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">           /&gt;</span></span></span><br><span class="line"><span class="language-xml">         <span class="tag">&lt;/<span class="name">Form.Group</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"> </span></span><br><span class="line"><span class="language-xml">         <span class="tag">&lt;<span class="name">Button</span> <span class="attr">className</span>=<span class="string">&quot;mt-3 custom-font&quot;</span> <span class="attr">variant</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> &gt;</span></span></span><br><span class="line"><span class="language-xml">           登录</span></span><br><span class="line"><span class="language-xml">         <span class="tag">&lt;/<span class="name">Button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">       <span class="tag">&lt;/<span class="name">Form</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      )&#125;</span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">      &#123;loggedIn &amp;&amp; (</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Button</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">className</span>=<span class="string">&quot;mt-3&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">variant</span>=<span class="string">&quot;success&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">onClick</span>=<span class="string">&#123;handleProtectedAccess&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        &gt;</span></span></span><br><span class="line"><span class="language-xml">          访问受保护路由</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">Button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      )&#125;</span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">      &#123;accessAllowed === true &amp;&amp; (</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Alert</span> <span class="attr">className</span>=<span class="string">&quot;mt-3&quot;</span> <span class="attr">variant</span>=<span class="string">&quot;success&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          允许访问</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">Alert</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      )&#125;</span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">      &#123;accessAllowed === false &amp;&amp; (</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Alert</span> <span class="attr">className</span>=<span class="string">&quot;mt-3&quot;</span> <span class="attr">variant</span>=<span class="string">&quot;danger&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          不允许访问</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">Alert</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      )&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">Container</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">Login</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="效果"><a href="#效果" class="headerlink" title="效果"></a>效果</h2><p>这玩意就是闹着玩的，就是规定了一个生效时间5s的token，自登陆开始在5s内你可以访问一个被保护的路由，五秒后你就不能访问了，当然你可以自己延伸和拓展。</p><p><img src="/img/image-20230808201031052.png" alt="image-20230808201031052"></p>]]></content>
      
      
      <categories>
          
          <category> 数据库 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 数据库 JWT react </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>深度学习复习</title>
      <link href="/2023/06/25/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E5%A4%8D%E4%B9%A0/"/>
      <url>/2023/06/25/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E5%A4%8D%E4%B9%A0/</url>
      
        <content type="html"><![CDATA[<h1 id="深度学习复习"><a href="#深度学习复习" class="headerlink" title="深度学习复习"></a>深度学习复习</h1><h2 id="第二章"><a href="#第二章" class="headerlink" title="第二章"></a>第二章</h2><p><strong>1.掌握随机梯度下降算法</strong></p><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230626150802324.png" alt="image-20230626150802324"></p><p><strong>2.掌握批量梯度下降算法</strong></p><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230626150814079.png" alt="image-20230626150814079"></p><p><strong>3.理解正则化（L1，L2）</strong></p><p>正则化是一种避免过拟合的技术，它通过向模型的损失函数中添加一个惩罚项来降低模型的复杂度。L1正则化和L2正则化是最常见的两种正则化方法。</p><p><strong>L1正则化</strong>：也称为Lasso正则化。L1正则化将模型参数的绝对值的和作为惩罚项加到损失函数中。其形式是：</p><pre><code>L1: λ*Σ|w_i|</code></pre><p>其中λ是正则化系数，w_i是模型参数，Σ表示对所有模型参数求和。L1正则化会倾向于产生少量的特征，而其他的特征都是零，这是因为L1正则化会将不重要的特征的权重压缩为零。这种特性使得L1正则化可以被用作特征选择。</p><p><strong>L2正则化</strong>：也称为岭回归或权重衰减。L2正则化将模型参数的平方和作为惩罚项加到损失函数中。其形式是：</p><pre><code>L2: λ*Σ(w_i)^2</code></pre><p>其中λ是正则化系数，w_i是模型参数，Σ表示对所有模型参数求和。相较于L1正则化，L2正则化会保留更多的特征（即，所有特征的权重都会非零），但权重会接近于零。这意味着L2正则化可以防止某些特征对预测结果的影响过大。</p><p>在这两个公式中，λ是一个超参数，决定了正则化的强度。如果λ为零，则正则化项没有效果。如果λ非常大，那么正则化项的影响会增大，模型的权重将被强制为零或非常接近零。</p><p>总的来说，L1和L2正则化都是一种在模型优化过程中引入的对模型复杂度的约束，目的是防止模型过于复杂而导致过拟合，以提高模型的泛化能力。</p><p><strong>4.理解Droupout思想，处理流程</strong></p><p>Dropout是一种用于防止神经网络过拟合的正则化技术，它在训练过程中随机关闭（即，将其输出设置为0）神经网络中的一部分神经元。Dropout通过引入网络内部的噪声，从而使模型变得更加健壮，并提高了泛化能力。</p><p>以下是Dropout的基本处理流程：</p><ol><li><p><strong>初始化</strong>：选择一个Dropout比率，这是在训练过程中将要随机关闭的神经元的比例。例如，Dropout比率为0.5意味着在每次训练过程中，每一层的一半神经元都将被随机关闭。</p></li><li><p><strong>训练过程</strong>：在每次训练迭代中，首先选择要关闭的神经元。关闭的神经元在前向传播和反向传播过程中都不会有任何贡献。即，在前向传播过程中，被关闭的神经元的输出将被设置为0；在反向传播过程中，不会将任何梯度传播到被关闭的神经元。然后，用剩余的”活跃”神经元进行前向传播、计算损失、反向传播和参数更新。</p></li><li><p><strong>测试过程</strong>：在测试过程中（即，使用模型进行预测时），通常不使用Dropout，所有的神经元都会被使用。为了补偿训练过程中神经元的关闭，需要将每个神经元的输出乘以Dropout比率。这可以确保测试过程中神经元的期望输出与训练过程一致。</p></li></ol><p>Dropout的主要优点是它可以有效地防止神经网络的过拟合，而且实现简单，计算成本低。同时，因为在每次训练迭代中都会随机关闭一部分神经元，这使得网络的不同部分可以更独立地学习特征，这通常可以提高模型的泛化能力。</p><p><strong>5.掌握三大定理：没有免费午餐定理，丑小鸭定理，奥卡姆剃刀原理等</strong></p><p><strong>没有免费午餐定理（No Free Lunch Theorem）</strong></p><p>在机器学习领域，没有免费午餐（No Free Lunch, NFL）定理指的是不存在一种“最佳”或“通用”的机器学习算法，适用于所有的问题。换句话说，对于特定的问题，某一种机器学习算法可能会胜过其他算法，但对于另一种问题，情况可能就完全相反了。因此，选择最适合的算法通常取决于问题本身和相关数据。</p><p><strong>丑小鸭定理（Ugly Duckling Theorem）</strong></p><p>丑小鸭定理是由美国计算机科学家Watanabe提出的，它的主要观点是：在没有先验知识的情况下，所有事物之间的相似性都是一样的。在机器学习和模式识别领域，这个定理意味着我们不能在没有先验知识的情况下，确定哪种特征更加重要或者哪种度量方式更好。</p><p><strong>奥卡姆剃刀原理（Occam’s Razor）</strong></p><p>奥卡姆剃刀是一个科学和哲学中的原理，它主张在所有可能的解释或模型中，最简单的那一个通常是正确的。在机器学习中，这个原理常常被理解为：如果两个模型对数据有同样好的拟合效果，那么我们应该选择更简单的模型，因为简单的模型通常有更好的泛化能力，不容易产生过拟合。</p><p>以上三个定理都是在理论上引导我们如何更好地理解和选择机器学习模型，为我们提供了不同的视角来看待机器学习问题。</p><h2 id="第三章"><a href="#第三章" class="headerlink" title="第三章"></a>第三章</h2><h3 id="理解经验风险和结构风险"><a href="#理解经验风险和结构风险" class="headerlink" title="理解经验风险和结构风险"></a>理解经验风险和结构风险</h3><p>经验风险和结构风险都是机器学习中的重要概念，它们都与模型的性能和过拟合风险有关。</p><ol><li><p><strong>经验风险</strong>：经验风险是模型在训练数据上的平均损失。它度量了模型对训练数据的拟合程度。经验风险最小化是机器学习中常用的一种方法，其目标是在训练集上找到使得平均损失最小的模型。然而，完全依赖于经验风险最小化可能导致过拟合，因为模型可能过于复杂，过度地拟合了训练数据中的噪声和异常值。</p></li><li><p><strong>结构风险</strong>：结构风险则是对经验风险的一个修正，以防止过拟合。结构风险最小化考虑了模型的复杂度，通过在经验风险的基础上添加一个正则项（对应模型复杂度）来避免过拟合。正则项的存在使得模型需要在拟合数据（经验风险小）与保持简单（模型复杂度小）之间找到一个平衡。在许多情况下，结构风险最小化能够得到更好的泛化性能。</p></li></ol><p>简单地说，经验风险关注模型在训练数据上的表现，而结构风险则同时考虑了模型在训练数据上的表现和模型的复杂度，以期获得更好的泛化能力。</p><h2 id="第四章-前馈神经网络"><a href="#第四章-前馈神经网络" class="headerlink" title="第四章 前馈神经网络"></a>第四章 前馈神经网络</h2><h3 id="什么是relu"><a href="#什么是relu" class="headerlink" title="什么是relu"></a>什么是relu</h3><p>ReLU函数，全称为线性整流函数（Rectified Linear Unit），是神经网络中常用的激活函数之一。ReLU函数的定义很简单，对于输入x，如果x大于0，ReLU函数返回x；如果x小于或等于0，ReLU函数返回0。</p><p>用数学公式表示，ReLU函数可以定义为：</p><pre><code>f(x) = max(0, x)</code></pre><p>ReLU函数的图像是一个在0点断开的线性函数，对于所有正的输入，函数的值等于输入本身；对于所有负的输入，函数的值为0。</p><p>ReLU函数在神经网络中的应用具有一些优点：</p><ul><li><strong>简单</strong>：ReLU函数非常简单，易于计算，而且在反向传播时，它的导数要么是0（当x≤0时），要么是1（当x&gt;0时）。</li><li><strong>非线性</strong>：虽然ReLU函数在正区间内是线性的，但它是一个非线性函数，因此可以处理复杂的数据关系。</li><li><strong>避免梯度消失</strong>：对于深度神经网络，使用Sigmoid函数或者tanh函数等会产生梯度消失问题，而ReLU函数在正区间内的梯度为常数，因此可以缓解梯度消失问题。</li></ul><p>虽然ReLU函数有上述优点，但它也有一个缺点，就是当输入为负数时，ReLU函数的梯度为0，这可能会导致一些神经元”死亡”，即这些神经元将无法再对任何数据进行学习。为了解决这个问题，人们提出了一些ReLU函数的变体，如Leaky ReLU、Parametric ReLU（PReLU）和Exponential Linear Unit（ELU）等。</p><h3 id="激活函数优缺点"><a href="#激活函数优缺点" class="headerlink" title="激活函数优缺点"></a>激活函数优缺点</h3><p>好的，我会分析几种常见的激活函数（ReLU, Sigmoid, Tanh 和 Leaky ReLU）并给出对应的公式。</p><ol><li><p><strong>ReLU (Rectified Linear Unit)</strong></p><p>公式：f(x) &#x3D; max(0, x)</p><p>优点：</p><ul><li>计算效率高，因为ReLU只需要判断输入是否大于0。</li><li>不会出现梯度饱和问题，这在神经网络的反向传播中很有用，能解决深层网络的梯度消失问题。</li></ul><p>缺点：</p><ul><li>ReLU函数在x&lt;0时，梯度为0，所以一旦神经元进入这种状态就无法再次激活，这就是所谓的”死亡ReLU”问题。</li></ul></li><li><p><strong>Sigmoid</strong></p><p>公式：f(x) &#x3D; 1 &#x2F; (1 + exp(-x))</p><p>优点：</p><ul><li>Sigmoid函数输出的是0到1之间的数，有明确的“开”、“关”的特性（接近0就是关，接近1就是开）。</li></ul><p>缺点：</p><ul><li>当输入稍微远离了原点，Sigmoid函数就会饱和，导致梯度接近0，这在神经网络的反向传播中可能导致权重更新变慢或者不更新，这是著名的梯度消失问题。</li><li>Sigmoid函数的输出并非以0为中心的，这可能会导致优化过程中的收敛变慢。</li></ul></li><li><p><strong>Tanh</strong></p><p>公式：f(x) &#x3D; (exp(x) - exp(-x)) &#x2F; (exp(x) + exp(-x))</p><p>优点：</p><ul><li>Tanh函数输出的是-1到1之间的数，其输出以0为中心，这是tanh相比于sigmoid的一个优势。</li></ul><p>缺点：</p><ul><li>同Sigmoid一样，Tanh函数也有梯度消失和梯度饱和的问题。</li></ul></li><li><p><strong>Leaky ReLU</strong></p><p>公式：f(x) &#x3D; max(0.01x, x)</p><p>优点：</p><ul><li>Leaky ReLU试图解决ReLU的”死亡”问题，它允许在x&lt;0时有一个非零的梯度，使得死亡神经元有可能重新激活。</li></ul><p>缺点：</p><ul><li>Leaky ReLU的梯度在x&lt;0时依然很小，可能还是不利于神经网络的学习。</li></ul></li></ol><p>这些都是非常常用的激活函数，你可以根据具体的任务和需求来选择使用哪种激活函数。</p><h2 id="第五章-卷积"><a href="#第五章-卷积" class="headerlink" title="第五章 卷积"></a>第五章 卷积</h2><p><strong>卷积神经网络的特点（对比全连接网络）</strong></p><p>卷积神经网络（Convolutional Neural Networks, CNN）和全连接网络（Fully Connected Networks, FCN）都是神经网络的一种，不过他们在结构和应用方面有一些明显的不同。</p><p><strong>卷积神经网络（CNN）</strong>：</p><ol><li><p>局部连接：在CNN中，每个神经元仅与输入数据的一个局部区域相连，这与视觉系统的结构相似，对于图像这类数据具有很高的效率和有效性。</p></li><li><p>权重共享：CNN中的卷积层通过权重共享的方式，减少了需要学习的参数数量，有效降低了过拟合的风险。</p></li><li><p>空间或者时间上的次采样</p></li></ol><p>主要应用：图像识别、视频处理、自然语言处理等领域。</p><p><strong>全连接神经网络（FCN）</strong>：</p><ol><li><p>全连接：在FCN中，每一个神经元都与前一层的所有神经元连接，这使得网络可以学习输入数据的全局模式，但相比之下参数量较大，容易出现过拟合。</p></li><li><p>无平移不变性：如果输入图像或数据发生微小的位移或旋转，可能就会影响FCN的性能，因为它们对输入数据的位置非常敏感。</p></li><li><p>参数量大：由于每个神经元都与前一层的所有神经元相连，所以全连接网络通常有非常大的参数量，这使得它们需要更多的数据来防止过拟合，并且需要更多的计算资源。</p></li></ol><p>主要应用：全连接层通常在神经网络的末端使用，用于根据之前层的输出进行分类或回归等任务。</p><p>总结来说，卷积神经网络和全连接网络各有优势，选择哪种类型的网络取决于你的具体任务和数据。对于图像和视频这样的数据，CNN由于其结构特性通常能获得更好的效果。而在一些全局信息更重要的任务中，全连接网络可能会更加有效。</p><h3 id="Resnet"><a href="#Resnet" class="headerlink" title="Resnet"></a>Resnet</h3><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230626121956880.png" alt="image-20230626121956880"></p><h3 id="参数计算"><a href="#参数计算" class="headerlink" title="参数计算"></a>参数计算</h3><p>卷积神经网络（CNN）的参数数量由多种因素决定，包括卷积核的大小、输入和输出的深度（也称为通道数）、全连接层的神经元数量等。</p><p>以下是计算各个类型层的参数数量的公式：</p><ol><li><p><strong>卷积层</strong>：参数数量由卷积核的大小、输入的深度和卷积核的数量决定。具体的计算公式为：(卷积核的宽度 * 卷积核的高度 * 输入深度 + 1偏置) * 卷积核数量。如果输入深度为D，卷积核的尺寸为KxK（宽度为K，高度为K），卷积核的数量为N，那么卷积层的总参数数量为：(K * K * D + 1) * N。</p></li><li><p><strong>全连接层</strong>：全连接层的参数数量由该层的神经元数量以及前一层的输出大小决定。如果全连接层的神经元数量为N，前一层的输出大小为M，那么全连接层的参数数量为N * (M + 1)，这里+1是因为每个神经元都有一个偏置参数。</p></li></ol><p>卷积层的输出大小由输入大小、卷积核的大小、步长（stride）和填充（padding）决定。其计算公式为：（输入大小 - 卷积核大小 + 2 * padding）&#x2F; stride + 1。例如，如果输入的宽度和高度分别为W和H，卷积核的大小为K，步长为S，填充为P，卷积核的数量为N，那么输出的宽度和高度都是（W - K + 2 * P）&#x2F; S + 1，输出的深度则为N。</p><p>举例来说，假设输入的尺寸为32x32x3，卷积层使用了64个5x5的卷积核，步长为1，没有填充（padding&#x3D;0），则卷积层的参数数量为（5 * 5 * 3 + 1）* 64 &#x3D; 4864，输出的尺寸为（32 - 5 + 2 * 0）&#x2F; 1 + 1 &#x3D; 28，所以输出的尺寸为28x28x64。</p><p>希望这些信息对你有所帮助！</p><h2 id="第六章-循环神经网络"><a href="#第六章-循环神经网络" class="headerlink" title="第六章 循环神经网络"></a>第六章 循环神经网络</h2><h3 id="LSTM"><a href="#LSTM" class="headerlink" title="LSTM"></a>LSTM</h3><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230626120451371.png" alt="image-20230626120451371"></p><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230626121732344.png" alt="image-20230626121732344"></p><p>循环神经网络（Recurrent Neural Networks，RNN）和长短期记忆网络（Long Short Term Memory，LSTM）都是处理序列数据的重要工具。然而，LSTM在设计上有些重要的改进，使得它可以解决RNN在处理长序列时遇到的一些问题。这些优点和缺点包括：</p><p><strong>LSTM的优点：</strong></p><ol><li><p><strong>解决梯度消失问题：</strong>RNN在处理长序列时会遇到梯度消失问题，即当序列过长时，模型很难学习到序列早期的信息。LSTM通过引入“门”机制和单元状态（Cell State）来保留长期的信息，有效地解决了这个问题。</p></li><li><p><strong>长期依赖：</strong>由于其设计，LSTM能够处理具有长期依赖的序列，比如在文本生成、语音识别或机器翻译等任务中，需要理解并记忆长期上下文信息。</p></li></ol><p><strong>LSTM的缺点：</strong></p><ol><li><p><strong>复杂性：</strong>LSTM比基础的RNN更复杂，包含的参数更多，需要更长的训练时间，并且需要更多的计算资源。</p></li><li><p><strong>过拟合：</strong>由于LSTM的模型复杂度较高，如果训练数据量不足或模型训练不当，可能会导致过拟合。</p></li><li><p><strong>难以解释：</strong>LSTM的内部机制比基础的RNN复杂，这使得它的内部工作方式更难以解释和理解。</p></li></ol><p>相比之下，RNN的优点是其模型较为简单，计算量较小，而且模型的理解和解释相对较为直观。然而，其缺点主要是难以处理长序列和长期依赖问题，即梯度消失问题。</p><h3 id="GRU"><a href="#GRU" class="headerlink" title="GRU"></a>GRU</h3><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230626121814840.png" alt="image-20230626121814840"></p><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230626121802861.png" alt="image-20230626121802861"></p><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230626121835315.png" alt="image-20230626121835315"></p><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230626121901736.png" alt="image-20230626121901736"></p><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230626121923969.png" alt="image-20230626121923969"></p><p>长短期记忆网络（Long Short Term Memory，LSTM）和门控循环单元（Gated Recurrent Unit，GRU）都是为了解决循环神经网络（Recurrent Neural Networks，RNN）在处理长序列时遇到的梯度消失和梯度爆炸问题而设计的。</p><ol><li><p><strong>参数数量：</strong> GRU相对于LSTM的一个主要优势是它的模型参数更少。一个GRU单元只有两个门（重置门和更新门），而LSTM有三个门（遗忘门、输入门和输出门）。较少的参数意味着GRU更简单，可能需要较少的训练时间，也更不容易过拟合。</p></li><li><p><strong>复杂度：</strong> GRU比LSTM简化了很多，没有了output gate，并将forget gate和input gate合并为了一个single update gate。此外，GRU还合并了cell state和hidden state，而LSTM则将它们分开处理。</p></li><li><p><strong>性能：</strong> 尽管GRU更简单，但在实践中，LSTM和GRU的性能通常相当接近。选择使用哪一种，往往取决于特定应用的需求和限制。一些研究显示，在较短的序列中，GRU的表现可能更好一些；而在较长的序列中，LSTM的性能可能会更优。</p></li><li><p><strong>记忆能力：</strong> LSTM由于其独立的cell state和hidden state，具有长期记忆和短期记忆的能力，更能对长序列的信息进行存储和处理。而GRU由于合并了cell state和hidden state，可能在处理更长的序列时表现略逊一筹。</p></li><li><p><strong>计算效率：</strong> 由于参数更少，GRU在相同硬件上的计算效率更高，尤其在需要快速训练模型的场景中。</p></li></ol><p>总的来说，GRU相对于LSTM，主要的改进在于简化了模型结构，减少了参数数量，提高了计算效率，但这也可能导致了某种程度上的性能牺牲，特别是在处理长序列时。在实际使用中，哪一种模型更优会取决于具体的任务和数据。</p><h3 id="序列到序列模型（同步和异步）"><a href="#序列到序列模型（同步和异步）" class="headerlink" title="序列到序列模型（同步和异步）"></a>序列到序列模型（同步和异步）</h3><p>序列到序列（Seq2Seq）模型是一种使用神经网络将一个序列映射到另一个序列的方法。它主要由两部分组成：编码器（Encoder）和解码器（Decoder）。编码器将输入序列编码成一个固定的向量，解码器则将这个向量解码为输出序列。</p><p>在同步（Synchronous）和异步（Asynchronous）的上下文中，这通常指的是编码器和解码器的执行方式。在同步模型中，编码器和解码器同时执行；在异步模型中，编码器首先对整个输入序列进行编码，然后解码器再对该编码进行解码。</p><p><strong>具体应用：</strong></p><p>Seq2Seq模型广泛应用于自然语言处理（NLP）任务，如机器翻译、文本摘要、对话系统（chatbots）、语音识别等。例如，在机器翻译中，输入序列是源语言的句子，输出序列是目标语言的句子。</p><p><strong>公式表达：</strong></p><p>Seq2Seq模型的公式表达可以有很多变体，但其核心思想是使用编码器将输入序列x &#x3D; [x1, x2, …, xT]编码成上下文向量c，然后使用解码器将上下文向量c解码为输出序列y &#x3D; [y1, y2, …, yT’]。</p><p>对于基于RNN的Seq2Seq模型，公式可以表示为：</p><ul><li>Encoder: h_t &#x3D; f(x_t, h_{t-1})</li><li>Context Vector: c &#x3D; q({h_1, h_2, …, h_T})</li><li>Decoder: h’<em>t &#x3D; f(y</em>{t-1}, h’_{t-1}, c)</li></ul><p>这里的f是RNN（如LSTM或GRU）的隐藏状态更新函数，q是从所有隐藏状态生成上下文向量的函数。在最简单的Seq2Seq模型中，q通常是取最后一个隐藏状态，即c &#x3D; h_T。</p><p><strong>优点：</strong></p><ol><li>Seq2Seq模型可以处理变长的输入和输出序列，非常适合处理自然语言等序列数据。</li><li>Seq2Seq模型能够学习到输入和输出之间的复杂映射关系。</li><li>使用注意力机制（Attention）的Seq2Seq模型可以对输入序列的不同部分分配不同的注意力，使模型能够关注到输入序列的重要部分。</li></ol><p><strong>缺点：</strong></p><ol><li>Seq2Seq模型需要大量的训练数据和计算资源。</li><li>如果输入序列很长，Seq2Seq模型可能难以捕捉到序列中的长距离依赖关系。</li><li>在基本的Seq2Seq模型中，所有信息都需要压缩到固定大小的上下文向量中，可能会导致信息丢失。虽然注意力机制可以缓解这个问题，但并</li></ol><h2 id="第七章-网络优化"><a href="#第七章-网络优化" class="headerlink" title="第七章 网络优化"></a>第七章 网络优化</h2><h3 id="学习率调整三大算法"><a href="#学习率调整三大算法" class="headerlink" title="学习率调整三大算法"></a>学习率调整三大算法</h3><h4 id="AdaGrad算法"><a href="#AdaGrad算法" class="headerlink" title="AdaGrad算法"></a><strong>AdaGrad算法</strong></h4><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230626123848898.png" alt="image-20230626123848898"></p><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230626123859296.png" alt="image-20230626123859296"></p><h4 id="RMSprop算法"><a href="#RMSprop算法" class="headerlink" title="RMSprop算法"></a><strong>RMSprop算法</strong></h4><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230626123925133.png" alt="image-20230626123925133"></p><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230626123935096.png" alt="image-20230626123935096"></p><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230626123945217.png" alt="image-20230626123945217"></p><h4 id="AdaDelta算法"><a href="#AdaDelta算法" class="headerlink" title="AdaDelta算法"></a><strong>AdaDelta算法</strong></h4><p>AdaDelta 算法也是 AdaGrad 算法的一个改进．和 RMSprop算法类似，AdaDelta 算法通过梯度平方的指数衰减移动平均来调整学习率．此 外，AdaDelta算法还引入了每次参数更新差值Δ𝜃的平方的指数衰减权移动平均</p><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230626124022839.png" alt="image-20230626124022839"></p><h4 id="自适应学习率"><a href="#自适应学习率" class="headerlink" title="自适应学习率"></a>自适应学习率</h4><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230626124051262.png" alt="image-20230626124051262"></p><h3 id="梯度优化"><a href="#梯度优化" class="headerlink" title="梯度优化"></a>梯度优化</h3><h4 id="动量法"><a href="#动量法" class="headerlink" title="动量法"></a>动量法</h4><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230626125406637.png" alt="image-20230626125406637"></p><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230626125418719.png" alt="image-20230626125418719"></p><h4 id="Nesterov加速梯度"><a href="#Nesterov加速梯度" class="headerlink" title="Nesterov加速梯度"></a>Nesterov加速梯度</h4><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230626125431081.png" alt="image-20230626125431081"></p><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230626125444693.png" alt="image-20230626125444693"></p><h4 id="Adam算法"><a href="#Adam算法" class="headerlink" title="Adam算法"></a>Adam算法</h4><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230626125501995.png" alt="image-20230626125501995"></p><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230626125510538.png" alt="image-20230626125510538"></p><h3 id="梯度截断"><a href="#梯度截断" class="headerlink" title="梯度截断"></a>梯度截断</h3><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230626125541612.png" alt="image-20230626125541612"></p><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230626125550946.png" alt="image-20230626125550946"></p><h3 id="数据预处理归一化三种方法"><a href="#数据预处理归一化三种方法" class="headerlink" title="数据预处理归一化三种方法"></a>数据预处理归一化三种方法</h3><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230626130133869.png" alt="image-20230626130133869"></p><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230626130149430.png" alt="image-20230626130149430"></p><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230626130201591.png" alt="image-20230626130201591"></p><h3 id="丢弃法"><a href="#丢弃法" class="headerlink" title="丢弃法"></a>丢弃法</h3><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230626125748332.png" alt="image-20230626125748332"></p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230626125803315.png" alt="image-20230626125803315" style="zoom:150%;" /><h3 id="逐层归一化"><a href="#逐层归一化" class="headerlink" title="逐层归一化"></a>逐层归一化</h3><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230626125956621.png" alt="image-20230626125956621"></p><h3 id="批量归一化"><a href="#批量归一化" class="headerlink" title="批量归一化"></a>批量归一化</h3><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230626130011016.png" alt="image-20230626130011016"></p><h3 id="层归一化"><a href="#层归一化" class="headerlink" title="层归一化"></a>层归一化</h3><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230626130034815.png" alt="image-20230626130034815"></p><h2 id="第八章"><a href="#第八章" class="headerlink" title="第八章"></a>第八章</h2><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230626135706945.png" alt="image-20230626135706945"></p><h3 id="自注意力模型"><a href="#自注意力模型" class="headerlink" title="自注意力模型"></a>自注意力模型</h3><p>在注意力模型尤其是 Soft Attention 模型中，Source 和输出 Target 的内容是不同的，比如中-英机器翻译，Source 对应的中文语句，Target 对应的英文语句。</p><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230626141459003.png" alt="image-20230626141459003"></p><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230626141515991.png" alt="image-20230626141515991"></p><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230626141533403.png" alt="image-20230626141533403"></p><p>自注意力模型（Self-Attention），也称为自我注意力模型或者内部注意力模型，是一种在处理序列数据时，允许每个元素都能注意到序列中其他所有元素的模型。在自然语言处理（NLP）中，它已经成为许多任务的重要组成部分，如Transformer模型和BERT模型等。</p><p><strong>自注意力的意义：</strong></p><p>自注意力的核心思想是，对于一个序列中的每个元素，都生成一个新的表示，这个新的表示是原序列中所有元素的加权求和，而这些权重由元素之间的相互关系决定。</p><p>自注意力允许模型并行地处理序列中的所有元素，而不像循环神经网络（RNN）那样逐个处理元素，因此计算效率更高。此外，自注意力能够捕捉到序列中任意距离的依赖关系，而不仅仅是局部或固定距离的依赖关系。</p><p><strong>自注意力的公式：</strong></p><p>假设输入序列为X &#x3D; [x_1, x_2, …, x_n]，每个x_i是一个d维的向量。自注意力首先会计算三个新的向量序列：Q（Query），K（Key）和V（Value），它们都是由X乘以不同的权重矩阵得到的：</p><p>Q &#x3D; XW_Q<br>K &#x3D; XW_K<br>V &#x3D; XW_V</p><p>这里的W_Q，W_K和W_V都是模型要学习的参数。</p><p>然后，计算Query和Key的点积，再除以一个缩放因子（通常是d的平方根），得到注意力得分：</p><p>score &#x3D; QK^T &#x2F; sqrt(d)</p><p>通过softmax函数，将score转化为权重：</p><p>weights &#x3D; softmax(score)</p><p>最后，用这些权重对Value序列进行加权求和，得到输出序列：</p><p>Z &#x3D; weights * V</p><p><strong>自注意力的处理流程：</strong></p><ol><li>计算Query、Key和Value序列。</li><li>计算注意力得分（Query和Key的点积）。</li><li>通过softmax函数，将注意力得分转化为权重。</li><li>对Value序列进行加权求和，得到输出。</li></ol><p>这种自注意力机制使得模型能够关注到序列中的任何位置，提高了模型处理长序列和捕捉长距离依赖的能力。</p><h3 id="transformer"><a href="#transformer" class="headerlink" title="transformer"></a>transformer</h3><p>Transformer优点：transformer不但对seq2seq模型两点缺点有了实质性的改进(多头交互式attention模块)，而且引入了self-attention模块，让源序列和目标序列首先“自关联”起来，使得源序列和目标序列自身的embedding表示所蕴含的信息更加丰富，而且后续的FFN层也增强了模型的表达能力，并且Transformer并行计算的能力是远远超过seq2seq系列的模型，因此我认为这是transformer优于seq2seq模型的地方。</p><h2 id="第十四章-深度强化学习"><a href="#第十四章-深度强化学习" class="headerlink" title="第十四章  深度强化学习"></a>第十四章  深度强化学习</h2><h3 id="深度强化学习五要素"><a href="#深度强化学习五要素" class="headerlink" title="深度强化学习五要素"></a>深度强化学习五要素</h3><p>深度强化学习（Deep Reinforcement Learning, DRL）是强化学习（Reinforcement Learning, RL）和深度学习（Deep Learning, DL）的结合。在强化学习中，有五个基本组成部分，也可以看作是五个要素：</p><ol><li><p><strong>环境（Environment）</strong>：这是一个被学习的系统或问题，比如棋盘游戏、控制问题、马尔科夫决策过程等。在这个环境中，智能体（Agent）通过执行一系列的动作（Actions）来达到某种目标。</p></li><li><p><strong>智能体（Agent）</strong>：智能体是在环境中执行动作、学习和做出决策的实体。在深度强化学习中，智能体通常会有一个或多个深度神经网络来帮助它进行决策和学习。</p></li><li><p><strong>状态（State）</strong>：状态代表了环境在某一时刻的条件或信息。例如，在棋盘游戏中，状态可能包括棋盘的布局、游戏的规则等。状态为智能体提供了做出决策的基础信息。</p></li><li><p><strong>动作（Action）</strong>：动作是智能体在给定状态下可以执行的操作。例如，在棋盘游戏中，动作可能包括移动一颗棋子、跳过轮次等。</p></li><li><p><strong>奖赏（Reward）</strong>：奖赏是一个信号，表明智能体的某个动作在达到目标方面的效果如何。奖赏可以是正的（表明智能体的动作有助于达到目标），也可以是负的（表明智能体的动作阻碍了达到目标）。强化学习的目标就是通过学习找到一个策略，使得智能体能够最大化长期的累积奖赏。</p></li></ol><p>在深度强化学习中，上述五个要素仍然适用，只是学习和决策的过程中加入了深度学习的技术，比如使用深度神经网络来表示和学习环境的状态、智能体的策略等。</p><h3 id="两个值函数"><a href="#两个值函数" class="headerlink" title="两个值函数"></a>两个值函数</h3><h4 id="状态值函数"><a href="#状态值函数" class="headerlink" title="状态值函数"></a>状态值函数</h4><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230626142614749.png" alt="image-20230626142614749"></p><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230626142705970.png" alt="image-20230626142705970"></p><h4 id="状态-动作值函数（-Q函数）"><a href="#状态-动作值函数（-Q函数）" class="headerlink" title="状态-动作值函数（ Q函数）"></a>状态-动作值函数（ Q函数）</h4><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230626142727070.png" alt="image-20230626142727070"></p><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230626142741740.png" alt="image-20230626142741740"></p><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230626142753987.png" alt="image-20230626142753987"></p><h3 id="策略迭代"><a href="#策略迭代" class="headerlink" title="策略迭代"></a>策略迭代</h3><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230626145756376.png" alt="image-20230626145756376"></p><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230626145816966.png" alt="image-20230626145816966"></p><h3 id="值迭代"><a href="#值迭代" class="headerlink" title="值迭代"></a>值迭代</h3><p><img src="/../../../../../AppData/Roaming/Typora/typora-user-images/image-20230626145856591.png" alt="image-20230626145856591"></p><p><img src="/../../../../../AppData/Roaming/Typora/typora-user-images/image-20230626145906052.png" alt="image-20230626145906052"></p><h3 id="Qlearning"><a href="#Qlearning" class="headerlink" title="Qlearning"></a>Qlearning</h3><p>Q-learning是一种被广泛使用的强化学习算法。在强化学习中，智能体(agent)在环境中采取动作，以最大化其总奖励。Q-learning算法能够学习一个策略，用来告诉智能体在给定状态下应采取什么样的行动。</p><p>Q-learning中的”Q”代表”质量”。在Q-learning算法中，智能体学习一个函数Q，这个函数接受一个状态和一个动作作为输入，并输出一个估计值，表示在给定状态下执行该动作的预期奖励。</p><p>Q-learning算法的核心是基于贝尔曼方程的Q值迭代更新公式，如下所示：</p><p>Q(s, a) ← Q(s, a) + α [r + γ max_a’ Q(s’, a’) - Q(s, a)]</p><p>这里：</p><ul><li>Q(s, a)表示在状态s下执行动作a的预期奖励。</li><li>α 是学习率，它决定了我们应该多大程度上考虑新的信息（即奖励和下一个状态的最大Q值）。</li><li>r 是智能体执行动作a并转移到状态s’后收到的即时奖励。</li><li>γ 是折扣因子，它决定了我们应该多大程度上考虑未来的奖励。值越接近1，我们考虑的未来奖励就越多。</li><li>max_a’ Q(s’, a’) 是在新状态s’下可能的所有动作a’的最大预期奖励。</li></ul><p>Q-learning算法包括以下基本步骤：</p><ol><li>初始化Q值表，通常是所有零。</li><li>对于每一个情节(episode)，进行以下操作：<ul><li>选择一个状态s。</li><li>选择一个动作a。这通常是根据某种策略（如ε-贪婪策略）从当前状态s的可能动作中选择的。</li><li>执行动作a，观察奖励r和新状态s’。</li><li>使用上面的公式更新Q(s, a)。</li></ul></li></ol><p>这个过程会在许多情节中反复进行，直到Q值表收敛为实际值。然后，智能体可以使用这个Q值表来选择执行最优动作。</p>]]></content>
      
      
      <categories>
          
          <category> 深度学习 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 深度学习 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>云计算综合实训3-三个小实验</title>
      <link href="/2023/05/26/%E4%BA%91%E8%AE%A1%E7%AE%97%E7%BB%BC%E5%90%88%E5%AE%9E%E8%AE%AD3-%E4%B8%89%E4%B8%AA%E5%B0%8F%E5%AE%9E%E9%AA%8C/"/>
      <url>/2023/05/26/%E4%BA%91%E8%AE%A1%E7%AE%97%E7%BB%BC%E5%90%88%E5%AE%9E%E8%AE%AD3-%E4%B8%89%E4%B8%AA%E5%B0%8F%E5%AE%9E%E9%AA%8C/</url>
      
        <content type="html"><![CDATA[<h1 id="云计算综合实训3-若干个小实验"><a href="#云计算综合实训3-若干个小实验" class="headerlink" title="云计算综合实训3 若干个小实验"></a>云计算综合实训3 若干个小实验</h1><h3 id="1-配置服务器组的负载均衡"><a href="#1-配置服务器组的负载均衡" class="headerlink" title="1.配置服务器组的负载均衡"></a>1.配置服务器组的负载均衡</h3><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230523145753859-1685073629412-1.png" alt="image-20230523145753859"></p><p> 点击左侧导航栏处的 <strong>云产品资源</strong>，查看 <strong>云服务器ECS-1</strong> 和 <strong>云服务器ECS-2</strong> 的相关信息。</p><h3 id="2-输入弹性IP"><a href="#2-输入弹性IP" class="headerlink" title="2.输入弹性IP"></a>2.输入弹性IP</h3><ol start="2"><li>打开浏览器，在输入框中输入 <strong>云产品资源</strong> 提供的 <strong>云服务器ECS-1</strong> 的 <strong>弹性IP</strong> ，页面如下图：</li></ol><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230523145541592-1685073629413-2.png" alt="image-20230523145541592"></p><p>配置会话保持并调整1:3的权重。</p><h3 id="3-关闭一个实例"><a href="#3-关闭一个实例" class="headerlink" title="3.关闭一个实例"></a>3.关闭一个实例</h3><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230523150304495-1685073629413-3.png" alt="image-20230523150304495"></p><h3 id="4-现在就只能显示一个了，实验成功"><a href="#4-现在就只能显示一个了，实验成功" class="headerlink" title="4.现在就只能显示一个了，实验成功"></a>4.现在就只能显示一个了，实验成功</h3><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230523150335433-1685073629413-4.png" alt="image-20230523150335433"></p><h1 id="半小时搭建个人网盘"><a href="#半小时搭建个人网盘" class="headerlink" title="半小时搭建个人网盘"></a>半小时搭建个人网盘</h1><h3 id="1-运行cloudreve"><a href="#1-运行cloudreve" class="headerlink" title="1.运行cloudreve"></a>1.运行cloudreve</h3><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230523155020931-1685073629413-6.png" alt="image-20230523155020931"></p><h3 id="2-安装ossfs"><a href="#2-安装ossfs" class="headerlink" title="2.安装ossfs"></a>2.安装ossfs</h3><p>ossfs能让您在Linux系统中，将对象存储OSS的存储空间（Bucket）挂载到本地文件系统中，您能够像操作本地文件一样操作OSS的对象（Object），实现数据的共享。</p><p>执行如下命令，下载ossfs安装包。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget https://gosspublic.alicdn.com/ossfs/ossfs_1.80.6_centos8.0_x86_64.rpm</span><br></pre></td></tr></table></figure><p>下载完毕后，执行如下命令，安装ossfs。</p><p>2.1 先更换yum源（Centos8 yum 官方源下线）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">#1.先删除系统内过期的.repo文件</span><br><span class="line">rm -f /etc/yum.repos.d/*</span><br><span class="line"></span><br><span class="line">#2.下载新的 CentOS-Base.repo 到 /etc/yum.repos.d/</span><br><span class="line">wget -O /etc/yum.repos.d/CentOS-Base.repo https://mirrors.aliyun.com/repo/Centos-vault-8.5.2111.repo</span><br><span class="line"></span><br><span class="line">#3.运行 yum makecache 生成缓存</span><br><span class="line">yum clean all &amp;&amp; yum makecache</span><br></pre></td></tr></table></figure><p>2.2 安装ossfs</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install -y ./ossfs_1.80.6_centos8.0_x86_64.rpm</span><br></pre></td></tr></table></figure><p>返回结果如下所示，表示ossfs安装成功</p><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230523155349267-1685073629413-5.png" alt="image-20230523155349267"></p><h3 id="3-挂载oss"><a href="#3-挂载oss" class="headerlink" title="3.挂载oss"></a>3.挂载oss</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo adc-oss-labs01969:LTAI5tFcH5wJ3YZiay6ayxS6:aBmeIFh4nGs0WEGw6rviu6OPxaLBjt &gt; /etc/passwd-ossfs</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230523155717223-1685073629413-8.png" alt="image-20230523155717223"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ossfs adc-oss-labs01969 oss -o url=oss-cn-shanghai-internal.aliyuncs.com</span><br></pre></td></tr></table></figure><p>查看是否挂载成功</p><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230523160059825-1685073629413-7.png" alt="image-20230523160059825"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">#! /bin/bash</span><br><span class="line">#</span><br><span class="line"># ossfs      Automount Aliyun OSS Bucket in the specified direcotry.</span><br><span class="line">#</span><br><span class="line"># chkconfig: 2345 90 10</span><br><span class="line"># description: Activates/Deactivates ossfs configured to start at boot time.</span><br><span class="line"></span><br><span class="line">ossfs adc-oss-labs01969 oss -o url=oss-cn-shanghai-internal.aliyuncs.com -oallow_other</span><br></pre></td></tr></table></figure><h3 id="4-配置个人网盘"><a href="#4-配置个人网盘" class="headerlink" title="4.配置个人网盘"></a>4.配置个人网盘</h3><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230523160714379-1685073629413-9.png" alt="image-20230523160714379"></p><p>上传个游戏gif图片</p><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230523160920459-1685073629413-10.png" alt="image-20230523160920459"></p><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230523161230770-1685073629413-11.png" alt="image-20230523161230770"></p><p>在阿里云的桶中找到了图片  </p><p>实验完成</p><h1 id="Docker安装和配置"><a href="#Docker安装和配置" class="headerlink" title="Docker安装和配置"></a>Docker安装和配置</h1><h3 id="1-安装docker"><a href="#1-安装docker" class="headerlink" title="1.安装docker"></a>1.安装docker</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">yum install -y yum-utils device-mapper-persistent-data lvm2</span><br><span class="line"></span><br><span class="line">yum install -y jq</span><br><span class="line"></span><br><span class="line">yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo </span><br></pre></td></tr></table></figure><p>源添加成功后，我们可以使用yum list命令查看当前的docker源中支持的安装包版本列表。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum list docker-ce --showduplicates | sort -r</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230523163544700.png" alt="image-20230523163544700"></p><p>安装docker应用</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install -y docker-ce.x86_64 3:20.10.16-3.el7 </span><br></pre></td></tr></table></figure><p>启动docker</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl start docker.service</span><br></pre></td></tr></table></figure><h3 id="2-Docker的配置"><a href="#2-Docker的配置" class="headerlink" title="2.Docker的配置"></a>2.Docker的配置</h3><ol><li>镜像源的配置</li></ol><p>通过docker拉取镜像时，默认会通过国外的镜像源进行下载，因此可以配置国内的镜像源以加快下载速度。修改docker的镜像源时，我们使用vi编辑文件 &#x2F;etc&#x2F;docker&#x2F;daemon.json 。注意使用vi编辑器时：</p><ol><li>需要先按i键进入编辑模式。</li><li>编辑完成之后按esc退出编辑模式。</li><li>然后按大写的ZZ保存并退出vi。</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">   &quot;registry-mirrors&quot;:[&quot;https://[1452471854402729].mirror.aliyuncs.com&quot;]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>设置自启动</p><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230523164226764.png" alt="image-20230523164226764"></p><h3 id="3-Docker的快速上手"><a href="#3-Docker的快速上手" class="headerlink" title="3.Docker的快速上手"></a>3.Docker的快速上手</h3><p>在前面的小节中我们介绍了Docker 的安装的配置，接下来为大家介绍一些Docker的快速上手命令和用法。</p><p>1.启动hello-world</p><p>Docker安装配置成功之后，我们就可以通过docker run命令启动轻量级的容器虚拟机。我们执行如下命令</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run hello-world</span><br></pre></td></tr></table></figure><p>会发现屏幕上输出了Hello from Docker!信息。这个信息输出表示hello-world容器虚拟机启动成功。</p><p>2.启动长期运行的bash容器</p><p>在上一个步骤中，我们演示了docker最基本的用法，这种方式启动的hello-world容器，在启动之后会输出文字，在输出之后容器就会结束。</p><p>接下来我们来启动一个可以长期运行的bash容器。我们在命令行中输入如下命令，运行成功后会看到命令提示行变为bash，这表示容器虚拟机已经持续运行。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -it bash</span><br></pre></td></tr></table></figure><p>3.bash容器的退出</p><p>在运行的bash容器中我们可以使用一些基本的linux命令，如pwd，ls等</p><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230523164525270.png" alt="image-20230523164525270"></p><p>4.容器的查找和下载</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker search ubuntu</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230523164655884.png" alt="image-20230523164655884"></p><p>2.查找容器的版本信息</p><p>在找到所需要的容器镜像的名称之后，通常需要进一步在docker的镜像源中查找该镜像的版本列表。由于docker本身没有直接提供查看版本的功能，因此在这里我们为大家提供了一个可以查看镜像版本的简单脚本docker-tags。我们生成docker-tags脚本并加入以下内容 ，</p><p>注意使用vi编辑器时：</p><ol><li>需要先按i键进入编辑模式。</li><li>编辑完成之后按esc退出编辑模式。</li><li>然后按大写的ZZ保存并退出vi</li></ol><p>chmod 777 docker-tags  .&#x2F;docker-tags ubuntu</p><p>当镜像源已经拉取到本地之后，我们可以通过docker images命令来查看已经拉取到的本地镜像。</p><p>然后下载ubuntu镜像 <img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230523170155752.png" alt="image-20230523170155752"></p><p>实验完成</p>]]></content>
      
      
      <categories>
          
          <category> 云计算 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 云计算 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>云计算综合实训2kvm学习</title>
      <link href="/2023/05/18/%E4%BA%91%E8%AE%A1%E7%AE%97%E7%BB%BC%E5%90%88%E5%AE%9E%E8%AE%AD2kvm%E5%AD%A6%E4%B9%A0/"/>
      <url>/2023/05/18/%E4%BA%91%E8%AE%A1%E7%AE%97%E7%BB%BC%E5%90%88%E5%AE%9E%E8%AE%AD2kvm%E5%AD%A6%E4%B9%A0/</url>
      
        <content type="html"><![CDATA[<h1 id="云计算实验2虚拟机配置"><a href="#云计算实验2虚拟机配置" class="headerlink" title="云计算实验2虚拟机配置"></a>云计算实验2虚拟机配置</h1><h2 id="1-下载iso文件后安装centos7"><a href="#1-下载iso文件后安装centos7" class="headerlink" title="1.下载iso文件后安装centos7"></a>1.下载iso文件后安装centos7</h2><p>设置密码为123456</p><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230516142816152.png" alt="image-20230516142816152"></p><p>进入网络配置目录</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cd /etc/sysconfig/network-scripts/</span><br><span class="line">ip addr</span><br><span class="line">ls</span><br><span class="line">vi ifcfg-ens33</span><br></pre></td></tr></table></figure><h2 id="2-确认ip-网关-等信息"><a href="#2-确认ip-网关-等信息" class="headerlink" title="2.确认ip 网关 等信息"></a>2.确认ip 网关 等信息</h2><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230516144859898.png" alt="image-20230516144859898"></p><p>配置的网络ip地址为192.168.150.251</p><h2 id="3-使用ssh远程连接"><a href="#3-使用ssh远程连接" class="headerlink" title="3.使用ssh远程连接"></a>3.使用ssh远程连接</h2><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230516155402269.png" alt="image-20230516155402269"></p><p>，使用sftp协议传输文件，将镜像文件传输到opt文件夹里面去</p><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230516155858595.png" alt="image-20230516155858595"></p><h2 id="4-关闭防火墙并装组件"><a href="#4-关闭防火墙并装组件" class="headerlink" title="4.关闭防火墙并装组件"></a>4.关闭防火墙并装组件</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">systemctl disable firewalld.service</span><br><span class="line"></span><br><span class="line">vi /etc/selinux/config</span><br><span class="line"></span><br><span class="line">systemctl status firewalld</span><br></pre></td></tr></table></figure><h3 id="4-1安装虚拟化组件"><a href="#4-1安装虚拟化组件" class="headerlink" title="4.1安装虚拟化组件"></a>4.1安装虚拟化组件</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">yum -y install libvirt virt-install wget net-tools bridge-uti</span><br><span class="line"></span><br><span class="line">yum -y install qemu-kvm qemu-kvm-tool</span><br><span class="line"></span><br><span class="line">systemctl start libvirtd</span><br><span class="line"></span><br><span class="line">systemctl enable libvirtd</span><br><span class="line">安装vim</span><br><span class="line">yum -y install vim</span><br></pre></td></tr></table></figure><h3 id="4-2网桥搭建"><a href="#4-2网桥搭建" class="headerlink" title="4.2网桥搭建"></a>4.2网桥搭建</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd /etc/sysconfig/network-scripts/</span><br><span class="line">cp ifcfg-ens33 ifcfg-br0</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230518221106770.png" alt="image-20230518221106770"></p><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230516171155374.png" alt="image-20230516171155374"></p><h2 id="5-VNC环境搭建"><a href="#5-VNC环境搭建" class="headerlink" title="5.VNC环境搭建"></a>5.VNC环境搭建</h2><p>安装vnc服务</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y install tigervnc tigervnc-server</span><br></pre></td></tr></table></figure><p>vnc 服务配置——宿主机远程控制</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">cp /lib/systemd/system/vncserver@.service /etc/systemd/system/vncserver@:1.service</span><br><span class="line"></span><br><span class="line">编辑刚刚复制得到的文件，将文件中的&lt;USER&gt;修改为 VNC Client(或者 VNC Viewer)连接</span><br><span class="line">的账号，我只设置一个用户 root，多用户再增加对应的 vncserver@:2.service</span><br><span class="line"></span><br><span class="line">vim /etc/systemd/system/vncserver@:1.service</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230518221620546.png" alt="image-20230518221620546"></p><p>设置 vnc 连接密码,输入命令 vncpasswd 以后连续输入两次密码，然后直接连 续回车</p><p>设置开机自启动</p><p>systemctl start vncserver@:1.service </p><p>systemctl enable vncserver@:1.service</p><p>vncserver</p><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230518221941253.png" alt="image-20230518221941253"></p><h2 id="6-创建虚拟机VM01"><a href="#6-创建虚拟机VM01" class="headerlink" title="6.创建虚拟机VM01"></a>6.创建虚拟机VM01</h2><h3 id="1-建立虚拟机"><a href="#1-建立虚拟机" class="headerlink" title="1.建立虚拟机"></a>1.建立虚拟机</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">virt-install --name vm01 --virt-type kvm --video vga --memory 1024 --vcpu 1 --disk size=8 --cdrom /opt/CentOS-7-x86_64-Minimal-2009.iso --network network=default --graphics vnc,listen=0.0.0.0,port=5900,password=123456 --noautoconsole</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230518222304700.png" alt="image-20230518222304700"></p><h3 id="2-virsh-vncdisplay-vm01重新开一下"><a href="#2-virsh-vncdisplay-vm01重新开一下" class="headerlink" title="2.virsh vncdisplay vm01重新开一下"></a>2.virsh vncdisplay vm01重新开一下</h3><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230518223540946.png" alt="image-20230518223540946"></p><h3 id="3-刚开始注意是没有地址的"><a href="#3-刚开始注意是没有地址的" class="headerlink" title="3.刚开始注意是没有地址的"></a>3.刚开始注意是没有地址的</h3><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230518223817867.png" alt="image-20230518223817867"></p><p>需要再去配置一下</p><h3 id="4-重启网络"><a href="#4-重启网络" class="headerlink" title="4.重启网络"></a>4.重启网络</h3><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230518224214166.png" alt="image-20230518224214166"></p><h3 id="5-实验完成"><a href="#5-实验完成" class="headerlink" title="5.实验完成"></a>5.实验完成</h3><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230518224318054.png" alt="image-20230518224318054"></p>]]></content>
      
      
      <categories>
          
          <category> 云计算 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 云计算 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>云计算实验</title>
      <link href="/2023/05/17/%E4%BA%91%E8%AE%A1%E7%AE%97%E5%AE%9E%E9%AA%8C/"/>
      <url>/2023/05/17/%E4%BA%91%E8%AE%A1%E7%AE%97%E5%AE%9E%E9%AA%8C/</url>
      
        <content type="html"><![CDATA[<h1 id="云计算第三题编程题"><a href="#云计算第三题编程题" class="headerlink" title="云计算第三题编程题"></a>云计算第三题编程题</h1><p>3.DFS针对大数据文件来设计，处理小文件效率低。</p><p>阅读『File-Based Data Structures』中关于『Hadoop’s SequenceFile』的介绍。编写代码，使用『 SequenceFile 』实现多个小文件的存储。要求如下：</p><p>1、开发环境：Intellj IDEA + MAVEN，JDK 1.8, Hadoop 2.9.2</p><p>2、写文件：输入：100张图片的文件夹，输出：包含所有图片的SequenceFile格式文件</p><p>3、读文件：输入：包含所有图片的SequenceFile格式文件，输出：所有图片</p><p>压缩后上传程序源文件（压缩文件名：学号_姓名_HDFS.rar）和运行截图。</p><h2 id="操作步骤"><a href="#操作步骤" class="headerlink" title="操作步骤"></a>操作步骤</h2><h3 id="1-配置java环境和下载idea"><a href="#1-配置java环境和下载idea" class="headerlink" title="1.配置java环境和下载idea"></a>1.配置java环境和下载idea</h3><p>电脑本来就有，跳过</p><h3 id="2-去maven仓库里找对应版本的hadoop"><a href="#2-去maven仓库里找对应版本的hadoop" class="headerlink" title="2.去maven仓库里找对应版本的hadoop"></a>2.去maven仓库里找对应版本的hadoop</h3><p><a class="link"   href="https://mvnrepository.com/" >https://mvnrepository.com/<i class="fas fa-external-link-alt"></i></a></p><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230516102048403.png" alt="image-20230516102048403"></p><h3 id="3-添加依赖项并搞100张图"><a href="#3-添加依赖项并搞100张图" class="headerlink" title="3.添加依赖项并搞100张图"></a>3.添加依赖项并搞100张图</h3><p>这里有个坑，添加完成后推出你才能正确导入包，我觉得可能是我配置的问题</p><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230516102644777.png" alt="image-20230516102644777"></p><p>写个代码检查一下hadoop 版本与老师要求的一不一样</p><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230516105310798.png" alt="image-20230516105310798"></p><p><strong>去哪里整一百张图片（那肯定是用我可爱的头像们）</strong></p><p>刚好一百个</p><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230516111752236.png" alt="image-20230516111752236"></p><h3 id="4-写文件"><a href="#4-写文件" class="headerlink" title="4.写文件"></a>4.写文件</h3><p>首先，代码中创建了一个 <code>Configuration</code> 对象和一个 <code>FileSystem</code> 对象，用于与 Hadoop 文件系统进行交互。然后，指定了输出的 SequenceFile 的路径 <code>output/sequenceFile</code>。</p><p>接下来，代码使用 <code>SequenceFile.createWriter()</code> 方法创建了一个 <code>SequenceFile.Writer</code> 对象。该方法接受多个参数，包括文件系统对象、配置对象、输出文件路径、键的类和值的类。在这个例子中，键的类型是 <code>Text</code>，值的类型是 <code>BytesWritable</code>。</p><p>然后，代码遍历一个名为 <code>input/images</code> 的文件夹中的所有文件。对于每个文件，它将文件的绝对路径设置为键的值，并使用 <code>FileInputStream</code> 读取文件内容。将文件内容存储在 <code>byte</code> 数组中，然后将该数组设置为值，并使用 <code>writer.append()</code> 方法将键值对追加到 SequenceFile 中。</p><p>最后，使用 <code>IOUtils.closeStream()</code> 方法关闭 <code>SequenceFile.Writer</code>，确保资源被正确释放。</p><p>这段代码的作用是将多个图片文件写入 SequenceFile，以便后续可以使用 SequenceFile 读取这些图片文件。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// Source code recreated from a .class file by IntelliJ IDEA</span></span><br><span class="line"><span class="comment">// (powered by FernFlower decompiler)</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">package</span> org.example;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.FileInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.conf.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.fs.FileSystem;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.fs.Path;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.io.BytesWritable;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.io.IOUtils;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.io.SequenceFile;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.io.Text;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WriteImageToSequenceFile</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">WriteImageToSequenceFile</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="type">Configuration</span> <span class="variable">conf</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Configuration</span>();</span><br><span class="line">        <span class="type">FileSystem</span> <span class="variable">fs</span> <span class="operator">=</span> FileSystem.get(conf);</span><br><span class="line">        <span class="type">Path</span> <span class="variable">outputPath</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Path</span>(<span class="string">&quot;output/sequenceFile&quot;</span>);</span><br><span class="line">        <span class="type">Text</span> <span class="variable">key</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Text</span>();</span><br><span class="line">        <span class="type">BytesWritable</span> <span class="variable">value</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BytesWritable</span>();</span><br><span class="line">        SequenceFile.<span class="type">Writer</span> <span class="variable">writer</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            writer = SequenceFile.createWriter(fs, conf, outputPath, key.getClass(), value.getClass());</span><br><span class="line">            <span class="type">File</span> <span class="variable">folder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;input/images&quot;</span>);</span><br><span class="line">            File[] files = folder.listFiles();</span><br><span class="line">            File[] var9 = files;</span><br><span class="line">            <span class="type">int</span> <span class="variable">var10</span> <span class="operator">=</span> files.length;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">var11</span> <span class="operator">=</span> <span class="number">0</span>; var11 &lt; var10; ++var11) &#123;</span><br><span class="line">                <span class="type">File</span> <span class="variable">file</span> <span class="operator">=</span> var9[var11];</span><br><span class="line">                key.set(file.getAbsolutePath());</span><br><span class="line">                <span class="type">FileInputStream</span> <span class="variable">fis</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(file);</span><br><span class="line">                <span class="type">byte</span>[] content = <span class="keyword">new</span> <span class="title class_">byte</span>[(<span class="type">int</span>)file.length()];</span><br><span class="line">                IOUtils.readFully(fis, content, <span class="number">0</span>, content.length);</span><br><span class="line">                value.set(content, <span class="number">0</span>, content.length);</span><br><span class="line">                writer.append(key, value);</span><br><span class="line">                fis.close();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            IOUtils.closeStream(writer);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230516110845672.png" alt="image-20230516110845672"></p><h3 id="5-读文件"><a href="#5-读文件" class="headerlink" title="5.读文件"></a>5.读文件</h3><p>这段代码是一个使用 Hadoop 的 SequenceFile 从文件中读取图像数据的示例。</p><p>代码中首先创建了一个 <code>Configuration</code> 对象和一个 <code>FileSystem</code> 对象，用于与 Hadoop 文件系统进行交互。然后指定了输入 SequenceFile 的路径 <code>output/sequenceFile</code>。</p><p>接下来，使用 <code>SequenceFile.Reader</code> 对象来读取 SequenceFile 中的数据。使用 <code>SequenceFile.Reader</code> 的 <code>next()</code> 方法循环遍历文件中的每个键值对。在每次迭代中，将键转换为字符串，并使用 <code>File</code> 类获取文件名。然后在输出文件夹 <code>output/images/</code> 中创建一个新的文件对象，并使用 <code>FileOutputStream</code> 写入文件的字节内容。</p><p>最后，在完成文件读取后，使用 <code>IOUtils.closeStream()</code> 方法关闭 <code>SequenceFile.Reader</code>，确保资源被正确释放。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.example;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.conf.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.fs.FileSystem;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.fs.Path;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.io.BytesWritable;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.io.IOUtils;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.io.SequenceFile;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.io.Text;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.FileOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ReadImageFromSequenceFile</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="type">Configuration</span> <span class="variable">conf</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Configuration</span>();</span><br><span class="line">        <span class="type">FileSystem</span> <span class="variable">fs</span> <span class="operator">=</span> FileSystem.get(conf);</span><br><span class="line">        <span class="type">Path</span> <span class="variable">inputPath</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Path</span>(<span class="string">&quot;output/sequenceFile&quot;</span>);</span><br><span class="line">        <span class="type">Text</span> <span class="variable">key</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Text</span>();</span><br><span class="line">        <span class="type">BytesWritable</span> <span class="variable">value</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BytesWritable</span>();</span><br><span class="line">        SequenceFile.<span class="type">Reader</span> <span class="variable">reader</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            reader = <span class="keyword">new</span> <span class="title class_">SequenceFile</span>.Reader(fs, inputPath, conf);</span><br><span class="line">            <span class="keyword">while</span> (reader.next(key, value)) &#123;</span><br><span class="line">                <span class="type">File</span> <span class="variable">file</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;output/images/&quot;</span> + <span class="keyword">new</span> <span class="title class_">File</span>(key.toString()).getName());</span><br><span class="line">                <span class="type">FileOutputStream</span> <span class="variable">fos</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(file);</span><br><span class="line">                fos.write(value.getBytes(), <span class="number">0</span>, value.getLength());</span><br><span class="line">                fos.close();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            IOUtils.closeStream(reader);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230516111845131.png" alt="image-20230516111845131"></p>]]></content>
      
      
      <categories>
          
          <category> 云计算 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 云计算 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>云计算概念</title>
      <link href="/2023/05/17/%E4%BA%91%E8%AE%A1%E7%AE%97%E6%A6%82%E5%BF%B5/"/>
      <url>/2023/05/17/%E4%BA%91%E8%AE%A1%E7%AE%97%E6%A6%82%E5%BF%B5/</url>
      
        <content type="html"><![CDATA[<h1 id="云计算三道题"><a href="#云计算三道题" class="headerlink" title="云计算三道题"></a>云计算三道题</h1><blockquote><p>以下内容均为个人原创</p></blockquote><h3 id="1-写数据的过程中，Pipeline上的一个DataNode失效了，HDFS如何处理？"><a href="#1-写数据的过程中，Pipeline上的一个DataNode失效了，HDFS如何处理？" class="headerlink" title="1.写数据的过程中，Pipeline上的一个DataNode失效了，HDFS如何处理？"></a>1.写数据的过程中，Pipeline上的一个DataNode失效了，HDFS如何处理？</h3><p>在文章的第66页，的下班篇和67页上半篇明确讲述了DataNode失效HDFS的处理过程。</p><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230516091115523.png" alt="image-20230516091115523"></p><p>原文描述了在Hadoop HDFS中，当数据正在写入DataNode时，如果发生DataNode失败，将会执行的一系列透明操作。以下是对这个过程的中文总结：</p><ol><li><p>首先，数据流管道会被关闭，同时，ack队列中的任何数据包会被加入到数据队列的前部，这样就能确保从失败节点下游的DataNode不会错过任何数据包。</p></li><li><p>在健康的DataNode上的当前数据块会被赋予一个新的标识符，并且这个新的标识符会被通知给NameNode，这样如果失败的DataNode在之后恢复了，那么这个失败DataNode上的部分数据块会被删除。</p></li><li><p>失败的DataNode会被从数据流管道中移除，而数据块剩余的部分会被写入到管道中的两个健康的DataNode。</p></li><li><p>NameNode会注意到数据块的副本数不足，因此会安排在另一个节点上创建一个额外的副本。然后，后续的数据块会像正常情况一样被处理。</p></li><li><p>有可能，但不太可能，在写入一个数据块的时候有多个DataNode失败。只要写入的副本数达到了dfs.replication.min的数量（默认是一个），那么写操作就会成功，并且这个数据块会在集群中异步地被复制，直到达到它的目标副本因子（dfs.replication，默认是三个）。</p></li><li><p>当客户端完成数据写入后，它会在数据流上调用close()函数。这个操作会将所有剩余的数据包刷新到DataNode管道，并且在联系NameNode来标记文件完成之前，会等待收到确认。</p></li><li><p>NameNode已经知道文件由哪些数据块组成（通过Data Streamer请求数据块分配），因此它只需要等待数据块被最小化复制，然后就可以成功返回。</p></li></ol><h3 id="2、HDFS-如何保证数据的完整性（Data-Integrity）？"><a href="#2、HDFS-如何保证数据的完整性（Data-Integrity）？" class="headerlink" title="2、HDFS 如何保证数据的完整性（Data Integrity）？"></a>2、HDFS 如何保证数据的完整性（Data Integrity）？</h3><p>这个在文章第75页就有阐述。</p><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230516091724278.png" alt="image-20230516091724278"></p><p>以下是对这段内容的中文总结：</p><ol><li><p><strong>校验和</strong>：HDFS对所有写入的数据进行校验和计算，并默认在读取数据时验证校验和。每io.bytes.per.checksum（默认512字节）的数据会生成一个单独的校验和。由于CRC-32校验和是4字节长，所以存储开销小于1%。</p></li><li><p><strong>DataNode的责任</strong>：DataNode负责在存储数据及其校验和之前验证它们接收的数据。这适用于从客户端接收的数据，也适用于在复制过程中从其他DataNode接收的数据。在数据写入过程中，客户端将数据发送到一组DataNode，管道中的最后一个DataNode会验证校验和。如果检测到错误，客户端会收到一个ChecksumException，它是IOException的一个子类，客户端应以特定于应用程序的方式处理它，例如，重试操作。</p></li><li><p><strong>客户端的校验和验证</strong>：当客户端从DataNode读取数据时，它们也会验证校验和，并将其与DataNode存储的校验和进行比较。每个DataNode都会保留一个校验和验证的持久化日志，所以它知道每个数据块最后一次被验证的时间。当客户端成功验证一个数据块时，它会告知DataNode，DataNode随后会更新它的日志。这样的统计数据对于检测坏硬盘非常有价值。</p></li><li><p><strong>DataNode的数据块扫描器</strong>：除了在客户端读取时进行数据块验证之外，每个DataNode都会在后台线程中运行一个DataBlockScanner，定期验证DataNode上存储的所有数据块。这主要是为了防止物理存储介质上的”bit rot”（位翻转）导致的数据损坏。</p></li><li><p><strong>数据块修复</strong>：由于HDFS存储了数据块的副本，所以它可以通过复制一个完好的副本来”修复”损坏的数据块。如果客户端在读取数据块时检测到错误，它会在抛出ChecksumException之前，将损坏的数据块和它试图读取的DataNode报告给NameNode。NameNode会将损坏的数据块副本标记为损坏，不再将客户端指向它，也不会尝试将此副本复制到其他DataNode。然后，它会安排在另一个DataNode上复制该数据块的副本，使得其副本数量回到预期的水平。一旦副本复制的过程完成，损坏的副本就会被删除。这是HDFS自我修复的一种机制，可以确保数据块的副本数量始终维持在预期水平。</p></li></ol><p>最后，作者提到了一种禁用校验和验证的方法。你可以在FileSystem上调用setVerifyChecksum()方法并传入false，然后使用open()方法来读取文件。同样的效果也可以通过在-shell中使用-ignoreCrc选项配合-get或等效的-copyToLocal命令来实现。这个功能在你想要检查可能已经损坏的文件时非常有用。例如，你可能想要查看文件是否可以在删除之前被恢复。</p>]]></content>
      
      
      <categories>
          
          <category> 云计算 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 云计算 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/2023/05/11/%E7%BD%91%E7%AB%99demo%E5%B1%95%E7%A4%BA/"/>
      <url>/2023/05/11/%E7%BD%91%E7%AB%99demo%E5%B1%95%E7%A4%BA/</url>
      
        <content type="html"><![CDATA[<h1 id="网站demo展示"><a href="#网站demo展示" class="headerlink" title="网站demo展示"></a>网站demo展示</h1><p>使用了 最新的Bootstrap的响应式CDN （bootstrap5） 和 Font Awesome 的 CDN。</p><p>该网站为一个前端知识学习平台，旨在建立一个开放式的平台，目前网站demo演示</p><p><strong>主页 index.html</strong></p><p>菜单栏采用竖式结构，更方便用户进行点击观看</p><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230511210429258.png" alt="image-20230511210429258"></p><p>响应式设计适用于手机屏幕</p><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230511210547642.png" alt="image-20230511210547642"></p><p><strong>学习路线页面 map.html</strong></p><p>在该页面中 用户可以根据自己的前端编程水平的不同来选择合适的学习路线</p><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230511210403887.png" alt="image-20230511210403887"></p><p><strong>关于页面 about.html</strong></p><p>介绍本网站的用途和开发使用的技术(目前仍在开发中)</p><p><strong>问题问答区 faq.html</strong></p><p>在问题问答区主要展示那么几个网站管理者经常收到的问题，下面的发送框可以让客户发送问题询问网站管理者</p><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230511210710118.png" alt="image-20230511210710118"></p><p>网站交流区也正在开发中</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>云计算综合实训1linux命令</title>
      <link href="/2023/05/10/%E4%BA%91%E8%AE%A1%E7%AE%97%E7%BB%BC%E5%90%88%E5%AE%9E%E8%AE%AD1linux%E5%91%BD%E4%BB%A4/"/>
      <url>/2023/05/10/%E4%BA%91%E8%AE%A1%E7%AE%97%E7%BB%BC%E5%90%88%E5%AE%9E%E8%AE%AD1linux%E5%91%BD%E4%BB%A4/</url>
      
        <content type="html"><![CDATA[<h2 id="Linux常用命令"><a href="#Linux常用命令" class="headerlink" title="Linux常用命令"></a>Linux常用命令</h2><blockquote><p>本人曾经接触过linux，也做过相应的前端开发，所以实验平台选择的是我众多服务器中的一台linux服务器，为了舍弃繁琐的输入 我直接用了echo 再用管道符将前一命令输入作为后面命令输出</p></blockquote><p>实验平台</p><blockquote><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230509234727785.png" alt="image-20230509234727785"></p></blockquote><h3 id="1-修改下root密码，变为123456"><a href="#1-修改下root密码，变为123456" class="headerlink" title="1.修改下root密码，变为123456"></a>1.修改下root密码，变为123456</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo &quot;123456&quot; | passwd --stdin root</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230509235748480.png" alt="image-20230509235748480"></p><h3 id="2-创建一个用户，用户的名字就是大家自己名字的首字母简拼（lijianye"><a href="#2-创建一个用户，用户的名字就是大家自己名字的首字母简拼（lijianye" class="headerlink" title="2.创建一个用户，用户的名字就是大家自己名字的首字母简拼（lijianye)"></a>2.创建一个用户，用户的名字就是大家自己名字的首字母简拼（lijianye)</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">useradd ljy</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230509235809319.png" alt="image-20230509235809319"></p><h3 id="3-为创建的这个用户给个密码123456"><a href="#3-为创建的这个用户给个密码123456" class="headerlink" title="3.为创建的这个用户给个密码123456"></a>3.为创建的这个用户给个密码123456</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo &quot;123456&quot; | passwd --stdin ljy</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230509235854582.png" alt="image-20230509235854582"></p><h3 id="4-切换到lijianye这个用户下"><a href="#4-切换到lijianye这个用户下" class="headerlink" title="4.切换到lijianye这个用户下"></a>4.切换到lijianye这个用户下</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">su - ljy</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230509235930226.png" alt="image-20230509235930226"></p><h3 id="5-切换到lijianye这个家目录下"><a href="#5-切换到lijianye这个家目录下" class="headerlink" title="5.切换到lijianye这个家目录下"></a>5.切换到lijianye这个家目录下</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd ~</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230510000044176.png" alt="image-20230510000044176"></p><h3 id="6-复制-x2F-etc-x2F-passwd文件到张三的加目录下并且改名为123-txt"><a href="#6-复制-x2F-etc-x2F-passwd文件到张三的加目录下并且改名为123-txt" class="headerlink" title="6.复制&#x2F;etc&#x2F;passwd文件到张三的加目录下并且改名为123.txt"></a>6.复制&#x2F;etc&#x2F;passwd文件到张三的加目录下并且改名为123.txt</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp /etc/passwd ~/123.txt</span><br></pre></td></tr></table></figure><h3 id="7-查看一下这个123-txt的内容"><a href="#7-查看一下这个123-txt的内容" class="headerlink" title="7.查看一下这个123.txt的内容"></a>7.查看一下这个123.txt的内容</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat ~/123.txt</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230510000339088.png" alt="image-20230510000339088"></p><h3 id="8-查看下123-txt的文件大小和创建时间"><a href="#8-查看下123-txt的文件大小和创建时间" class="headerlink" title="8.查看下123.txt的文件大小和创建时间"></a>8.查看下123.txt的文件大小和创建时间</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ls -lh ~/123.txt</span><br></pre></td></tr></table></figure><p>另外又把vm虚拟机下了回来，模仿老师的步骤建立了一个centos8的操作系统的虚拟机</p><p>​                               </p>]]></content>
      
      
      <categories>
          
          <category> 云计算 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 云计算 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>docker配置mysql</title>
      <link href="/2023/05/10/docker%E9%85%8D%E7%BD%AEmysql/"/>
      <url>/2023/05/10/docker%E9%85%8D%E7%BD%AEmysql/</url>
      
        <content type="html"><![CDATA[<h4 id=""><a href="#" class="headerlink" title=""></a></h4><h1 id="Docker安装配置mysql"><a href="#Docker安装配置mysql" class="headerlink" title="Docker安装配置mysql"></a>Docker安装配置mysql</h1><p>1.拉取docker镜像 并创建容器</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker pull mysql:8.0</span><br><span class="line">docker run --name mysqlDatabase -e MYSQL_ROOT_PASSWORD=123456 -e MYSQL_DATABASE=mydatabase -e MYSQL_USER=admin -e MYSQL_PASSWORD=123456 -p 3306:3306 -d mysql:8.0</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>2.拉取 phpMyAdmin 镜像</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker pull phpmyadmin/phpmyadmin</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>使用phpmyadmin打开容器的数据库</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker run --name phpmyadmin --link mysqlDatabase:db -p 80:80 -d phpmyadmin/phpmyadmin</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>这个先不急 以后会用 </p><h2 id="内网穿透"><a href="#内网穿透" class="headerlink" title="内网穿透"></a>内网穿透</h2><p>参考了这篇博客 <a class="link"   href="https://gitee.com/spoto/natserver" >自建内网穿透服务器: 通过FRP，Zerotier等几种通过自己服务器实现内网穿透的教程 (gitee.com)<i class="fas fa-external-link-alt"></i></a></p><p>我真的会谢</p><p>一天真的就被着破网络搞得头大，原来docker默认的是桥接模式</p><p>最后发现原来配置要用host模式，我真的是无语</p><p>我的配置文件frpc.ini在e盘</p><blockquote><p>–network&#x3D;host </p><p>一个小小的参数 拯救了代码的红色   不改成host模式  本地主机就只会拒绝外面访问docker容器</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d --name frpc --restart=always --network=host -v E:\\frpc.ini:/etc/frp/frpc.ini snowdreamtech/frpc</span><br></pre></td></tr></table></figure><h2 id="部署我们团队的应用"><a href="#部署我们团队的应用" class="headerlink" title="部署我们团队的应用"></a>部署我们团队的应用</h2><p>部署到30端口</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -it --name my-node-app -v E:\docker\demo-app:/app -p 3000:3000 -w /app node bash</span><br></pre></td></tr></table></figure><p>使用php部署一个班级文件收集表</p><h2 id="php"><a href="#php" class="headerlink" title="php"></a>php</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d --name uploadwebsite  -v E:\docker\uploadwebsite:/<span class="keyword">var</span>/www/html -p <span class="number">6580</span>:<span class="number">80</span> -w /<span class="keyword">var</span>/www/html php php -S <span class="number">0.0</span>.<span class="number">0.0</span>:<span class="number">80</span>  </span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 数据库 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 数据库 docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>docker环境配置</title>
      <link href="/2023/05/10/docker%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/"/>
      <url>/2023/05/10/docker%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/</url>
      
        <content type="html"><![CDATA[<h4 id=""><a href="#" class="headerlink" title=""></a></h4><h1 id="本地跑3D智慧医疗"><a href="#本地跑3D智慧医疗" class="headerlink" title="本地跑3D智慧医疗"></a>本地跑3D智慧医疗</h1><blockquote><p>亲身感觉和ai studio差不多，本地运转的时候我的内存飙到24g（还好我是32g内存），感觉ai studio也是运用了类似docker虚拟化的技术为每一个用户提供了一个镜像环境，因为磁盘100g刚好就是镜像文件+环境的大小。</p><p><strong>所以本地跑的好处是在训练速度差不多的情况下，训练时间变成了无限。而且对待各个文件好操作一点</strong></p></blockquote><h2 id="docker-环境配置"><a href="#docker-环境配置" class="headerlink" title="docker 环境配置"></a>docker 环境配置</h2><blockquote><p>c盘空间足够的可以忽略2 3 4 步骤</p></blockquote><h3 id="1-下载docker-desktop"><a href="#1-下载docker-desktop" class="headerlink" title="1.下载docker desktop"></a>1.下载docker desktop</h3><p>因为本机是window10，有些命令无法运行，所以用docker desktop是一个不错的选择</p><p>自己找教程</p><h3 id="2-更改镜像存储路径"><a href="#2-更改镜像存储路径" class="headerlink" title="2.更改镜像存储路径"></a>2.更改镜像存储路径</h3><p>放在c盘这谁受得了,放E盘</p><p>win 10 的 docker-desktop 在启动的时候，会启动两个 <code>wsl 子系统</code>: <code>docker-desktop</code> 以及 <code>docker-desktop-data</code><br>输入命令 <code>wsl -l -v --all</code> 可以看到这两个子系统</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">wsl --shutdown</span><br><span class="line">wsl --export docker-desktop-data E:\data\docker\docker-desktop-data.tar</span><br><span class="line"></span><br><span class="line">wsl --export docker-desktop E:\data\docker\docker-desktop.tar</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>可以看到 在 <code>E:\data\docker</code> 已存放了这两个子系统的 tar 包</p><h3 id="3-注销子系统"><a href="#3-注销子系统" class="headerlink" title="3.注销子系统"></a>3.注销子系统</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wsl --unregister docker-desktop</span><br><span class="line">wsl --unregister docker-desktop-data</span><br></pre></td></tr></table></figure><h3 id="4-重新导入"><a href="#4-重新导入" class="headerlink" title="4.重新导入"></a>4.重新导入</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wsl --import docker-desktop-data E:\data\docker\docker-desktop-data E:\data\docker\docker-desktop-data.tar --version 2</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wsl --import docker-desktop E:\data\docker\docker-desktop E:\data\docker\docker-desktop.tar --version 2</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="5-docker安装环境"><a href="#5-docker安装环境" class="headerlink" title="5.docker安装环境"></a>5.docker安装环境</h3><p>我的建议是去搞个加速器（美国梯子好一点，亲测）</p><p>这个地址是官方给的，我从官方的docker hub下面扒了一个最新的</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker pull paddlecloud/paddleseg:2.6-gpu-cuda11.2-cudnn8-latest</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="如何运转这个项目代码"><a href="#如何运转这个项目代码" class="headerlink" title="如何运转这个项目代码"></a>如何运转这个项目代码</h2><p>那是相当煎熬呀</p><p>挂载命令</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -it --name paddle_project --gpus all -v E:\final:/paddle_project -p 8888:8888 paddlecloud/paddleseg:2.6-gpu-cuda11.2-cudnn8-latest /bin/bash</span><br></pre></td></tr></table></figure><p>下载jupyter</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install jupyter</span><br></pre></td></tr></table></figure><blockquote><p>运行pip install 会出一些警告 直接不用管 耐心等待</p></blockquote><p>这个是在容器中使用jupyter打开官方项目的方法</p><p><strong>（不知道为啥 下面这个指令需要手动输入 很烦）</strong></p><p>启动容器后直接在终端里输入下面这些就好</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jupyter notebook --ip 0.0.0.0 --port 8888 --no-browser --allow-root --NotebookApp.token=&#x27;&#x27; --NotebookApp.password=&#x27;&#x27; --notebook-dir=/paddle_project</span><br></pre></td></tr></table></figure><p><a class="link"   href="http://localhost:8888/" >http://localhost:8888<i class="fas fa-external-link-alt"></i></a></p><p>输入上面这个网址就可以打开容器里的jupyter用镜像里的环境操作容器里的文件了</p><p>然后剩下的和ai studio里面的一模一样</p><blockquote><p>内存空间不用担心，镜像文件在e盘，那个盘1t，随便造</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> paddleseg </category>
          
      </categories>
      
      
        <tags>
            
            <tag> paddleseg docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>demo_风起必胜</title>
      <link href="/2023/04/06/paddleseg%E5%89%8D%E7%AB%AF-demo/"/>
      <url>/2023/04/06/paddleseg%E5%89%8D%E7%AB%AF-demo/</url>
      
        <content type="html"><![CDATA[<h1 id="风起必胜开发日志"><a href="#风起必胜开发日志" class="headerlink" title="风起必胜开发日志"></a>风起必胜开发日志</h1><h2 id="demo开发"><a href="#demo开发" class="headerlink" title="demo开发"></a>demo开发</h2><p>本次demo开发主要是为了熟练运用react前端架构并与后端进行交互</p><h2 id="前端"><a href="#前端" class="headerlink" title="前端"></a>前端</h2><h3 id="框架"><a href="#框架" class="headerlink" title="框架"></a>框架</h3><p>使用react框架 除了react之外还需要添加一些环境依赖项和包</p><blockquote><p># dependencies</p><p>&#x2F;node_modules</p><p>&#x2F;.pnp</p><p>.pnp.js</p><p># testing</p><p>&#x2F;coverage</p><p># production</p><p>&#x2F;build</p><p># misc</p><p>.DS_Store</p><p>.env.local</p><p>.env.development.local</p><p>.env.test.local</p><p>.env.production.local</p><p>npm-debug.log*</p><p>yarn-debug.log*</p><p>yarn-error.log*</p></blockquote><p><strong>重点</strong>：需要axios请求库，自行npm install axios吧</p><h3 id="代码详解"><a href="#代码详解" class="headerlink" title="代码详解"></a>代码详解</h3><h4 id="App-js"><a href="#App-js" class="headerlink" title="App.js"></a>App.js</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//导入 React 和 axios：</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//创建 React 组件并定义其状态：这里使用 React 的 useState Hook 来创建组件的状态。file 和 result 分别表示上传的图像文件和服务器返回的灰度化后的图像。</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [file, setFile] = <span class="title function_">useState</span>(<span class="literal">null</span>);</span><br><span class="line">  <span class="keyword">const</span> [result, setResult] = <span class="title function_">useState</span>(<span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="comment">//创建处理输入事件的函数：这个函数会在文件输入框的内容改变时被调用，将选择的文件保存到 file 状态中。</span></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">handleChange</span> = (<span class="params">event</span>) =&gt; &#123;</span><br><span class="line">    <span class="title function_">setFile</span>(event.<span class="property">target</span>.<span class="property">files</span>[<span class="number">0</span>]);</span><br><span class="line">  &#125;</span><br><span class="line"><span class="comment">//创建处理提交事件的函数 </span></span><br><span class="line"><span class="comment">/*这个函数会在用户点击 &quot;Send to Server&quot; 按钮时被调用。如果当前有文件被选择，</span></span><br><span class="line"><span class="comment">则使用 FileReader API 将文件读取为 base64 编码的字符串，并使用 axios 发送 POST 请求到服务器上的 </span></span><br><span class="line"><span class="comment">/grayscale 路径。imageBase64 是读取到的文件的 base64 编码，会作为请求体中的参数。如果请求成功，</span></span><br><span class="line"><span class="comment">则将服务器返回的灰度化后的图像保存到 result 状态中，否则打印出错误信息。 */</span></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">handleSubmit</span> = <span class="keyword">async</span> (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span> (file) &#123;</span><br><span class="line">      <span class="keyword">const</span> reader = <span class="keyword">new</span> <span class="title class_">FileReader</span>();</span><br><span class="line">      reader.<span class="property">onload</span> = <span class="keyword">async</span> (e) =&gt; &#123;</span><br><span class="line">        <span class="keyword">const</span> imageBase64 = e.<span class="property">target</span>.<span class="property">result</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">          <span class="keyword">const</span> response = <span class="keyword">await</span> axios.<span class="title function_">post</span>(<span class="string">&#x27;http://localhost:5000/grayscale&#x27;</span>, &#123;</span><br><span class="line">            <span class="attr">image</span>: imageBase64</span><br><span class="line">          &#125;);</span><br><span class="line">          <span class="title function_">setResult</span>(response.<span class="property">data</span>.<span class="property">result</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">          <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;Error:&#x27;</span>, error);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;;</span><br><span class="line">      reader.<span class="title function_">readAsDataURL</span>(file);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"><span class="comment">//渲染组建 懒得解释 会前端的都知道这些是干嘛的</span></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h1</span>&gt;</span>React-Flask Image Grayscale Example<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">input</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">type</span>=<span class="string">&quot;file&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">accept</span>=<span class="string">&quot;image/*&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">onChange</span>=<span class="string">&#123;handleChange&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;handleSubmit&#125;</span>&gt;</span>Send to Server<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;result &amp;&amp; <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&#123;result&#125;</span> <span class="attr">alt</span>=<span class="string">&quot;Grayscale result&quot;</span> /&gt;</span>&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="index-js"><a href="#index-js" class="headerlink" title="index.js"></a>index.js</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">ReactDOM</span> <span class="keyword">from</span> <span class="string">&#x27;react-dom&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./index.css&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="title class_">ReactDOM</span>.<span class="title function_">render</span>(</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">React.StrictMode</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">App</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">React.StrictMode</span>&gt;</span></span>,</span><br><span class="line">  <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;root&#x27;</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure><h2 id="后端"><a href="#后端" class="headerlink" title="后端"></a>后端</h2><h3 id="框架-1"><a href="#框架-1" class="headerlink" title="框架"></a>框架</h3><p>本次实践采用flask框架</p><p>软件功能介绍：用户可以上传图片并将其转化为一个适合图像处理的灰度图像。</p><p>具体的环境看要实现哪些图像变化的功能</p><h3 id="代码详解-1"><a href="#代码详解-1" class="headerlink" title="代码详解"></a>代码详解</h3><p>几乎没什么代码，就是利用了flask的一个路由功能</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">grayscale</span>():</span><br><span class="line">    image_data = request.json[<span class="string">&#x27;image&#x27;</span>].split(<span class="string">&#x27;,&#x27;</span>)[<span class="number">1</span>]</span><br><span class="line">    image = Image.<span class="built_in">open</span>(io.BytesIO(base64.b64decode(image_data)))</span><br><span class="line">    gray_image = ImageOps.grayscale(image)</span><br><span class="line">    buffered = io.BytesIO()</span><br><span class="line">    gray_image.save(buffered, <span class="built_in">format</span>=<span class="string">&quot;PNG&quot;</span>)</span><br><span class="line">    gray_image_base64 = base64.b64encode(buffered.getvalue()).decode(<span class="string">&#x27;ascii&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> jsonify(&#123;<span class="string">&quot;result&quot;</span>: <span class="string">f&#x27;data:image/png;base64,<span class="subst">&#123;gray_image_base64&#125;</span>&#x27;</span>&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>1.解码图像数据</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">image_data = request.json[<span class="string">&#x27;image&#x27;</span>].split(<span class="string">&#x27;,&#x27;</span>)[<span class="number">1</span>]</span><br><span class="line">image = Image.<span class="built_in">open</span>(io.BytesIO(base64.b64decode(image_data)))</span><br></pre></td></tr></table></figure><p>这里从客户端发送过来的请求中获取了 <code>image</code> 字段，然后使用 <code>base64.b64decode()</code> 方法将 base64 编码的数据解码为二进制数据。再使用 <code>io.BytesIO</code> 将二进制数据转换为内存流，最后使用 PIL 库中的 <code>Image.open()</code> 方法将图像数据转换为 PIL 的 Image 对象。</p><p>2.进行灰度化处理</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gray_image = ImageOps.grayscale(image)</span><br></pre></td></tr></table></figure><p>3.将灰度化后的图像数据转换为 base64 编码的 PNG 格式：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">buffered = io.BytesIO()</span><br><span class="line">gray_image.save(buffered, <span class="built_in">format</span>=<span class="string">&quot;PNG&quot;</span>)</span><br><span class="line">gray_image_base64 = base64.b64encode(buffered.getvalue()).decode(<span class="string">&#x27;ascii&#x27;</span>)</span><br></pre></td></tr></table></figure><p>这里使用 PIL 库中的 <code>Image.save()</code> 方法将灰度化后的图像数据以 PNG 格式保存到内存流中，并使用 <code>base64.b64encode()</code> 方法将内存流中的二进制数据编码为 base64 格式的字符串。</p><p>4.将处理后的图像数据返回给客户端：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> jsonify(&#123;<span class="string">&quot;result&quot;</span>: <span class="string">f&#x27;data:image/png;base64,<span class="subst">&#123;gray_image_base64&#125;</span>&#x27;</span>&#125;)</span><br></pre></td></tr></table></figure><p>这里使用 Flask 框架中的 <code>jsonify()</code> 函数将处理后的图像数据以 JSON 格式返回给客户端。返回的 JSON 数据中包含一个 <code>result</code> 字段，其值为一个包含了灰度化后图像数据的 base64 编码的 PNG 图片格式的字符串。</p><p>总结</p><p>总的来说，这段代码是一个 Flask 应用中的图像灰度化视图函数，将客户端发送过来的 base64 编码的图像数据进行灰度化处理，并将处理后的图像数据以 base64 编码的形式返回给客户端。 </p><h3 id="软件功能展示"><a href="#软件功能展示" class="headerlink" title="软件功能展示"></a>软件功能展示</h3><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230406180721954.png" alt="image-20230406180721954"></p><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230406180936448.png" alt="image-20230406180936448"></p><h2 id="黄师傅升级"><a href="#黄师傅升级" class="headerlink" title="黄师傅升级"></a>黄师傅升级</h2><p>黄师傅强力赞助，将自己页面的设计，但是黄师傅把传文件改成了formdata，与后端超级不匹配，很头疼&#x2F;(ㄒoㄒ)&#x2F;~~不过还好，用chatgpt将两个代码合成了一下 替换了一些函数</p><p>所以下次决定给黄师傅安好我的镜像python库</p><h3 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h3><p>需要的环境很离谱，很多，就不说了</p><h3 id="软件功能展示-1"><a href="#软件功能展示-1" class="headerlink" title="软件功能展示"></a>软件功能展示</h3><p>实现了拖拽上传</p><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230406194232414.png" alt="image-20230406194232414"></p><h2 id="部署"><a href="#部署" class="headerlink" title="部署"></a>部署</h2><p>先构建后手动上传到服务器（docker，windowsserver都行)</p><p>访问地址<a class="link"   href="http://49.234.34.44/" >http://49.234.34.44/<i class="fas fa-external-link-alt"></i></a></p><p>说是简单 光改破端口和改cors警告要了我老命，改的我想去死，下次一定一定一定要把地址复制好再上传部署。</p><p>效果还不错</p><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230406212906900.png" alt="image-20230406212906900"></p><h2 id="下一步要做的"><a href="#下一步要做的" class="headerlink" title="下一步要做的"></a>下一步要做的</h2><p>设计正式作品的线稿</p><p>进行产品概要设计</p><p>丰富功能 优化界面</p><p>再做出正式的参赛作品 </p>]]></content>
      
      
      <categories>
          
          <category> paddleseg </category>
          
      </categories>
      
      
        <tags>
            
            <tag> paddle_seg react </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>demo_风起必胜</title>
      <link href="/2023/04/06/demo-%E9%A3%8E%E8%B5%B7%E5%BF%85%E8%83%9C/"/>
      <url>/2023/04/06/demo-%E9%A3%8E%E8%B5%B7%E5%BF%85%E8%83%9C/</url>
      
        <content type="html"><![CDATA[<h3 id=""><a href="#" class="headerlink" title=""></a></h3><h1 id="风起必胜开发日志"><a href="#风起必胜开发日志" class="headerlink" title="风起必胜开发日志"></a>风起必胜开发日志</h1><h2 id="demo开发"><a href="#demo开发" class="headerlink" title="demo开发"></a>demo开发</h2><p>本次demo开发主要是为了熟练运用react前端架构并与后端进行交互</p><h2 id="前端"><a href="#前端" class="headerlink" title="前端"></a>前端</h2><h3 id="框架"><a href="#框架" class="headerlink" title="框架"></a>框架</h3><p>使用react框架 除了react之外还需要添加一些环境依赖项和包</p><blockquote><p># dependencies</p><p>&#x2F;node_modules</p><p>&#x2F;.pnp</p><p>.pnp.js</p><p># testing</p><p>&#x2F;coverage</p><p># production</p><p>&#x2F;build</p><p># misc</p><p>.DS_Store</p><p>.env.local</p><p>.env.development.local</p><p>.env.test.local</p><p>.env.production.local</p><p>npm-debug.log*</p><p>yarn-debug.log*</p><p>yarn-error.log*</p></blockquote><p><strong>重点</strong>：需要axios请求库，自行npm install axios吧</p><h3 id="代码详解"><a href="#代码详解" class="headerlink" title="代码详解"></a>代码详解</h3><h4 id="App-js"><a href="#App-js" class="headerlink" title="App.js"></a>App.js</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//导入 React 和 axios：</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//创建 React 组件并定义其状态：这里使用 React 的 useState Hook 来创建组件的状态。file 和 result 分别表示上传的图像文件和服务器返回的灰度化后的图像。</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [file, setFile] = <span class="title function_">useState</span>(<span class="literal">null</span>);</span><br><span class="line">  <span class="keyword">const</span> [result, setResult] = <span class="title function_">useState</span>(<span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="comment">//创建处理输入事件的函数：这个函数会在文件输入框的内容改变时被调用，将选择的文件保存到 file 状态中。</span></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">handleChange</span> = (<span class="params">event</span>) =&gt; &#123;</span><br><span class="line">    <span class="title function_">setFile</span>(event.<span class="property">target</span>.<span class="property">files</span>[<span class="number">0</span>]);</span><br><span class="line">  &#125;</span><br><span class="line"><span class="comment">//创建处理提交事件的函数 </span></span><br><span class="line"><span class="comment">/*这个函数会在用户点击 &quot;Send to Server&quot; 按钮时被调用。如果当前有文件被选择，</span></span><br><span class="line"><span class="comment">则使用 FileReader API 将文件读取为 base64 编码的字符串，并使用 axios 发送 POST 请求到服务器上的 </span></span><br><span class="line"><span class="comment">/grayscale 路径。imageBase64 是读取到的文件的 base64 编码，会作为请求体中的参数。如果请求成功，</span></span><br><span class="line"><span class="comment">则将服务器返回的灰度化后的图像保存到 result 状态中，否则打印出错误信息。 */</span></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">handleSubmit</span> = <span class="keyword">async</span> (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span> (file) &#123;</span><br><span class="line">      <span class="keyword">const</span> reader = <span class="keyword">new</span> <span class="title class_">FileReader</span>();</span><br><span class="line">      reader.<span class="property">onload</span> = <span class="keyword">async</span> (e) =&gt; &#123;</span><br><span class="line">        <span class="keyword">const</span> imageBase64 = e.<span class="property">target</span>.<span class="property">result</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">          <span class="keyword">const</span> response = <span class="keyword">await</span> axios.<span class="title function_">post</span>(<span class="string">&#x27;http://localhost:5000/grayscale&#x27;</span>, &#123;</span><br><span class="line">            <span class="attr">image</span>: imageBase64</span><br><span class="line">          &#125;);</span><br><span class="line">          <span class="title function_">setResult</span>(response.<span class="property">data</span>.<span class="property">result</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">          <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;Error:&#x27;</span>, error);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;;</span><br><span class="line">      reader.<span class="title function_">readAsDataURL</span>(file);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"><span class="comment">//渲染组建 懒得解释 会前端的都知道这些是干嘛的</span></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h1</span>&gt;</span>React-Flask Image Grayscale Example<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">input</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">type</span>=<span class="string">&quot;file&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">accept</span>=<span class="string">&quot;image/*&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">onChange</span>=<span class="string">&#123;handleChange&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;handleSubmit&#125;</span>&gt;</span>Send to Server<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;result &amp;&amp; <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&#123;result&#125;</span> <span class="attr">alt</span>=<span class="string">&quot;Grayscale result&quot;</span> /&gt;</span>&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="index-js"><a href="#index-js" class="headerlink" title="index.js"></a>index.js</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">ReactDOM</span> <span class="keyword">from</span> <span class="string">&#x27;react-dom&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./index.css&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="title class_">ReactDOM</span>.<span class="title function_">render</span>(</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">React.StrictMode</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">App</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">React.StrictMode</span>&gt;</span></span>,</span><br><span class="line">  <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;root&#x27;</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure><h2 id="后端"><a href="#后端" class="headerlink" title="后端"></a>后端</h2><h3 id="框架-1"><a href="#框架-1" class="headerlink" title="框架"></a>框架</h3><p>本次实践采用flask框架</p><p>软件功能介绍：用户可以上传图片并将其转化为一个适合图像处理的灰度图像。</p><p>具体的环境看要实现哪些图像变化的功能</p><h3 id="代码详解-1"><a href="#代码详解-1" class="headerlink" title="代码详解"></a>代码详解</h3><p>几乎没什么代码，就是利用了flask的一个路由功能</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">grayscale</span>():</span><br><span class="line">    image_data = request.json[<span class="string">&#x27;image&#x27;</span>].split(<span class="string">&#x27;,&#x27;</span>)[<span class="number">1</span>]</span><br><span class="line">    image = Image.<span class="built_in">open</span>(io.BytesIO(base64.b64decode(image_data)))</span><br><span class="line">    gray_image = ImageOps.grayscale(image)</span><br><span class="line">    buffered = io.BytesIO()</span><br><span class="line">    gray_image.save(buffered, <span class="built_in">format</span>=<span class="string">&quot;PNG&quot;</span>)</span><br><span class="line">    gray_image_base64 = base64.b64encode(buffered.getvalue()).decode(<span class="string">&#x27;ascii&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> jsonify(&#123;<span class="string">&quot;result&quot;</span>: <span class="string">f&#x27;data:image/png;base64,<span class="subst">&#123;gray_image_base64&#125;</span>&#x27;</span>&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>1.解码图像数据</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">image_data = request.json[<span class="string">&#x27;image&#x27;</span>].split(<span class="string">&#x27;,&#x27;</span>)[<span class="number">1</span>]</span><br><span class="line">image = Image.<span class="built_in">open</span>(io.BytesIO(base64.b64decode(image_data)))</span><br></pre></td></tr></table></figure><p>这里从客户端发送过来的请求中获取了 <code>image</code> 字段，然后使用 <code>base64.b64decode()</code> 方法将 base64 编码的数据解码为二进制数据。再使用 <code>io.BytesIO</code> 将二进制数据转换为内存流，最后使用 PIL 库中的 <code>Image.open()</code> 方法将图像数据转换为 PIL 的 Image 对象。</p><p>2.进行灰度化处理</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gray_image = ImageOps.grayscale(image)</span><br></pre></td></tr></table></figure><p>3.将灰度化后的图像数据转换为 base64 编码的 PNG 格式：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">buffered = io.BytesIO()</span><br><span class="line">gray_image.save(buffered, <span class="built_in">format</span>=<span class="string">&quot;PNG&quot;</span>)</span><br><span class="line">gray_image_base64 = base64.b64encode(buffered.getvalue()).decode(<span class="string">&#x27;ascii&#x27;</span>)</span><br></pre></td></tr></table></figure><p>这里使用 PIL 库中的 <code>Image.save()</code> 方法将灰度化后的图像数据以 PNG 格式保存到内存流中，并使用 <code>base64.b64encode()</code> 方法将内存流中的二进制数据编码为 base64 格式的字符串。</p><p>4.将处理后的图像数据返回给客户端：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> jsonify(&#123;<span class="string">&quot;result&quot;</span>: <span class="string">f&#x27;data:image/png;base64,<span class="subst">&#123;gray_image_base64&#125;</span>&#x27;</span>&#125;)</span><br></pre></td></tr></table></figure><p>这里使用 Flask 框架中的 <code>jsonify()</code> 函数将处理后的图像数据以 JSON 格式返回给客户端。返回的 JSON 数据中包含一个 <code>result</code> 字段，其值为一个包含了灰度化后图像数据的 base64 编码的 PNG 图片格式的字符串。</p><p>总结</p><p>总的来说，这段代码是一个 Flask 应用中的图像灰度化视图函数，将客户端发送过来的 base64 编码的图像数据进行灰度化处理，并将处理后的图像数据以 base64 编码的形式返回给客户端。 </p><h3 id="软件功能展示"><a href="#软件功能展示" class="headerlink" title="软件功能展示"></a>软件功能展示</h3><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230406180721954.png" alt="image-20230406180721954"></p><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230406180936448.png" alt="image-20230406180936448"></p><h2 id="黄师傅升级"><a href="#黄师傅升级" class="headerlink" title="黄师傅升级"></a>黄师傅升级</h2><p>黄师傅强力赞助，将自己页面的设计，但是黄师傅把传文件改成了formdata，与后端超级不匹配，很头疼&#x2F;(ㄒoㄒ)&#x2F;~~不过还好，用chatgpt将两个代码合成了一下 替换了一些函数</p><p>所以下次决定给黄师傅安好我的镜像python库</p><h3 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h3><p>需要的环境很离谱，很多，就不说了</p><h3 id="软件功能展示-1"><a href="#软件功能展示-1" class="headerlink" title="软件功能展示"></a>软件功能展示</h3><p>实现了拖拽上传</p><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230406194232414.png" alt="image-20230406194232414"></p><h2 id="部署"><a href="#部署" class="headerlink" title="部署"></a>部署</h2><p>先构建后手动上传到服务器（docker，windowsserver都行)</p><p>访问地址<a class="link"   href="http://49.234.34.44/" >http://49.234.34.44/<i class="fas fa-external-link-alt"></i></a></p><p>说是简单 光改破端口和改cors警告要了我老命，改的我想去死，下次一定一定一定要把地址复制好再上传部署。</p><p>效果还不错</p><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230406212906900.png" alt="image-20230406212906900"></p><h2 id="下一步要做的"><a href="#下一步要做的" class="headerlink" title="下一步要做的"></a>下一步要做的</h2><p>设计正式作品的线稿</p><p>进行产品概要设计</p><p>丰富功能 优化界面</p><p>再做出正式的参赛作品 </p>]]></content>
      
      
      <categories>
          
          <category> 数据库 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 数据库 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>大创代码</title>
      <link href="/2023/03/29/%E5%A4%A7%E5%88%9B%E4%BB%A3%E7%A0%81/"/>
      <url>/2023/03/29/%E5%A4%A7%E5%88%9B%E4%BB%A3%E7%A0%81/</url>
      
        <content type="html"><![CDATA[<h1 id="大创项目解读"><a href="#大创项目解读" class="headerlink" title="大创项目解读"></a>大创项目解读</h1><p>寒假时间的业余时间做了一些代码解读，至于怎么添加resnet小样本学习和fastrcnn还在研究，大部分代码是不含有专业知识的图像数据预处理，先解读以下各个文件的作用。</p><h2 id="1-fix-entra-files-py"><a href="#1-fix-entra-files-py" class="headerlink" title="1-fix-entra-files.py"></a>1-fix-entra-files.py</h2><blockquote><p>这个dirs可能就是版权声明几个人名没啥作用，没什么实际作用</p><p>这段代码的作用是：遍历一系列目录，找到以”.json”为后缀的文件，并对这些文件中的内容进行修改。</p><p>简单来说就是如果检查label 是不是 entra-dural fat需不需要重写那么就标记上</p><p>具体来说：</p><p>定义了一个名为”check_if_have_entra”的函数，该函数的输入是一个文件路径。函数的作用是读取该文件内容（期望该文件是一个json文件），查找其中的”shapes”键对应的值（预计是一个列表），遍历该列表，如果某一项的”label”键对应的值为”entra-dural fat”，则将该值改为”extra-dural fat”，并且标记该文件需要被重写。最后，如果该文件需要被重写，则将其内容写入该文件。</p><p>利用for循环遍历”dirs”列表中的每一个目录。对于每一个目录，首先获取该目录下所有文件的列表，并遍历该列表，如果当前项是一个目录，则再次获取该目录下的所有文件的列表，并遍历该列表，如果当前项的后缀是”.json”，则调用”check_if_have_entra”函数，将该文件路径作为输入。</p><p>整个代码实现了从一系列目录中寻找以”.json”为后缀的文</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os, json</span><br><span class="line"></span><br><span class="line">dirs = [<span class="string">&quot;赵晓慧&quot;</span>, <span class="string">&quot;周斌&quot;</span>, <span class="string">&quot;朱恒&quot;</span>, <span class="string">&quot;王传合&quot;</span>, <span class="string">&quot;沈文堂&quot;</span>, <span class="string">&quot;李明&quot;</span>, <span class="string">&quot;鞠洪法&quot;</span>, <span class="string">&quot;江英美&quot;</span>,</span><br><span class="line"><span class="string">&quot;杜长亮&quot;</span>, <span class="string">&quot;董祥文&quot;</span>, <span class="string">&quot;陈欣&quot;</span>, <span class="string">&quot;陈胜利&quot;</span>, <span class="string">&quot;鲍雪冬&quot;</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">check_if_have_entra</span>(<span class="params">file_path</span>):</span><br><span class="line">file_need_write = <span class="literal">False</span></span><br><span class="line">content = json.load(<span class="built_in">open</span>(file_path, encoding=<span class="string">&quot;utf-8&quot;</span>))</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> content[<span class="string">&quot;shapes&quot;</span>]:</span><br><span class="line"><span class="keyword">if</span> i[<span class="string">&quot;label&quot;</span>] == <span class="string">&quot;entra-dural fat&quot;</span>:</span><br><span class="line">i[<span class="string">&quot;label&quot;</span>] = <span class="string">&quot;extra-dural fat&quot;</span></span><br><span class="line">file_need_write = <span class="literal">True</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> file_need_write:</span><br><span class="line">f = <span class="built_in">open</span>(file_path, <span class="string">&quot;w&quot;</span>, encoding=<span class="string">&quot;utf-8&quot;</span>)</span><br><span class="line">json.dump(content, f)</span><br><span class="line"><span class="built_in">print</span>(file_path)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> dirs:</span><br><span class="line">dir_list = os.listdir(i)</span><br><span class="line"><span class="keyword">for</span> j <span class="keyword">in</span> dir_list:</span><br><span class="line">dir_name = os.path.join(i, j)</span><br><span class="line">sub_dir_list = os.listdir(dir_name)</span><br><span class="line"><span class="keyword">for</span> k <span class="keyword">in</span> sub_dir_list:</span><br><span class="line"><span class="keyword">if</span> k.split(<span class="string">&quot;.&quot;</span>)[-<span class="number">1</span>] == <span class="string">&quot;json&quot;</span>:</span><br><span class="line">file_path = os.path.join(dir_name, k)</span><br><span class="line">check_if_have_entra(file_path)</span><br></pre></td></tr></table></figure><h2 id="2-move-file-py"><a href="#2-move-file-py" class="headerlink" title="2.move-file.py"></a>2.move-file.py</h2><blockquote><p>下面的代码创建了两个目录：pic_dir 和 json_dir。如果这两个目录不存在，它们将被创建。</p><p>然后，它遍历了目录列表 dirs 中的每个目录，然后对于每个目录内的文件，调用 move_file 函数将其移动到 pic_dir 或 json_dir 目录中。move_file 函数检查文件扩展名，如果是 .jpg 则移动到 pic_dir，如果是 .json 则移动到 json_dir。移动文件是使用 shutil 库中的 move 函数实现的。 就是一个简单的移动文件的函数</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os, json, shutil</span><br><span class="line"></span><br><span class="line">dirs = [<span class="string">&quot;赵晓慧&quot;</span>, <span class="string">&quot;周斌&quot;</span>, <span class="string">&quot;朱恒&quot;</span>, <span class="string">&quot;王传合&quot;</span>, <span class="string">&quot;沈文堂&quot;</span>, <span class="string">&quot;李明&quot;</span>, <span class="string">&quot;鞠洪法&quot;</span>, <span class="string">&quot;江英美&quot;</span>,</span><br><span class="line"><span class="string">&quot;杜长亮&quot;</span>, <span class="string">&quot;董祥文&quot;</span>, <span class="string">&quot;陈欣&quot;</span>, <span class="string">&quot;陈胜利&quot;</span>, <span class="string">&quot;鲍雪冬&quot;</span>]</span><br><span class="line"></span><br><span class="line">pic_dir = <span class="string">&quot;pic/&quot;</span></span><br><span class="line">json_dir = <span class="string">&quot;json/&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(pic_dir):</span><br><span class="line">os.mkdir(pic_dir)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(json_dir):</span><br><span class="line">os.mkdir(json_dir)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">move_file</span>(<span class="params">file_path</span>):</span><br><span class="line"><span class="keyword">if</span> file_path.split(<span class="string">&quot;.&quot;</span>)[-<span class="number">1</span>] == <span class="string">&quot;jpg&quot;</span>:</span><br><span class="line">shutil.move(file_path, pic_dir)</span><br><span class="line"><span class="keyword">elif</span> file_path.split(<span class="string">&quot;.&quot;</span>)[-<span class="number">1</span>] == <span class="string">&quot;json&quot;</span>:</span><br><span class="line">shutil.move(file_path, json_dir)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> dirs:</span><br><span class="line">dir_list = os.listdir(i)</span><br><span class="line"><span class="keyword">for</span> j <span class="keyword">in</span> dir_list:</span><br><span class="line">dir_name = os.path.join(i, j)</span><br><span class="line">sub_dir_list = os.listdir(dir_name)</span><br><span class="line"><span class="keyword">for</span> k <span class="keyword">in</span> sub_dir_list:</span><br><span class="line">file_path = os.path.join(dir_name, k)</span><br><span class="line">move_file(file_path)</span><br><span class="line"> </span><br></pre></td></tr></table></figure><h2 id="3-move-Chinese"><a href="#3-move-Chinese" class="headerlink" title="3.move-Chinese"></a>3.move-Chinese</h2><blockquote><p>这段代码的作用是将文件夹 “json” 和 “pic” 中的文件的文件名批量更改。所以在json目录和pic目录下经常能看到不少学长学姐的名字</p><p>首先，定义了一个字典 <code>rename_list</code>，该字典将一个人的名字映射到一个名称（用英文表示）。然后，代码读取 “json” 目录中的文件列表，并遍历该列表。对于每个文件，它将检查其文件名是否包含字典中的任何人的名字。如果找到了，它将文件名中的名字替换为该人的名称（用英文表示）。同样的方法也用于 “pic” 目录中的文件。最后，代码将处理的文件数量打印出来。</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line">rename_list = &#123;</span><br><span class="line"><span class="string">&quot;周斌&quot;</span>: <span class="string">&quot;zhoubin&quot;</span>,</span><br><span class="line"><span class="string">&quot;赵晓慧&quot;</span>: <span class="string">&quot;zhaoxiaohui&quot;</span>,</span><br><span class="line"><span class="string">&quot;朱恒&quot;</span>: <span class="string">&quot;zhuheng&quot;</span>,</span><br><span class="line"><span class="string">&quot;鲍雪冬&quot;</span>: <span class="string">&quot;baoxuedong&quot;</span>,</span><br><span class="line"><span class="string">&quot;王传合&quot;</span>: <span class="string">&quot;wangchuanhe&quot;</span>, </span><br><span class="line"><span class="string">&quot;沈文堂&quot;</span>: <span class="string">&quot;shenwentang&quot;</span>, </span><br><span class="line"><span class="string">&quot;李明&quot;</span>: <span class="string">&quot;liming&quot;</span>, </span><br><span class="line"><span class="string">&quot;鞠洪法&quot;</span>: <span class="string">&quot;juhongfa&quot;</span>, </span><br><span class="line"><span class="string">&quot;江英美&quot;</span>: <span class="string">&quot;jiangyingmei&quot;</span>,</span><br><span class="line"><span class="string">&quot;杜长亮&quot;</span>: <span class="string">&quot;duchangliang&quot;</span>, </span><br><span class="line"><span class="string">&quot;董祥文&quot;</span>: <span class="string">&quot;dongxiangwen&quot;</span>, </span><br><span class="line"><span class="string">&quot;陈欣&quot;</span>: <span class="string">&quot;chenxin&quot;</span>, </span><br><span class="line"><span class="string">&quot;陈胜利&quot;</span>: <span class="string">&quot;chenshengli&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">json_path = <span class="string">&quot;json/&quot;</span></span><br><span class="line">pic_path = <span class="string">&quot;pic/&quot;</span></span><br><span class="line"></span><br><span class="line">file_list = os.listdir(json_path)</span><br><span class="line"></span><br><span class="line">file_num = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> file_list:</span><br><span class="line"><span class="keyword">for</span> j <span class="keyword">in</span> rename_list:</span><br><span class="line"><span class="keyword">if</span> j <span class="keyword">in</span> i:</span><br><span class="line">new_name = i.replace(j, rename_list[j])</span><br><span class="line">os.rename(</span><br><span class="line">os.path.join(json_path, i),</span><br><span class="line">os.path.join(json_path, new_name)</span><br><span class="line">)</span><br><span class="line">file_num += <span class="number">1</span></span><br><span class="line"></span><br><span class="line">file_list2 = os.listdir(pic_path)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> file_list2:</span><br><span class="line"><span class="keyword">for</span> j <span class="keyword">in</span> rename_list:</span><br><span class="line"><span class="keyword">if</span> j <span class="keyword">in</span> i:</span><br><span class="line">new_name = i.replace(j, rename_list[j])</span><br><span class="line">os.rename(</span><br><span class="line">os.path.join(pic_path, i),</span><br><span class="line">os.path.join(pic_path, new_name)</span><br><span class="line">)</span><br><span class="line">file_num += <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;共处理了&#123;&#125;个文件。&quot;</span>.<span class="built_in">format</span>(file_num))</span><br></pre></td></tr></table></figure><h2 id="4-check-json-num-equ-pic-py"><a href="#4-check-json-num-equ-pic-py" class="headerlink" title="4.check-json-num-equ-pic.py"></a>4.check-json-num-equ-pic.py</h2><blockquote><p>这段代码的功能是将两个文件夹（pic和json）中不匹配的文件移动到一个叫“not_matched”的新文件夹中。 如果有对不上号的就移动到not_matched文件夹中</p><p>首先，它会遍历 pic 文件夹中的文件，如果文件名加上”.json”不在json文件夹中，它就会将这个文件加入到files_not_matched列表中。如果“not_matched”文件夹不存在，它会创建一个。然后，它会遍历files_not_matched列表，将其中的文件从pic文件夹中移动到“not_matched”文件夹中。</p><p>接下来，它会遍历json文件夹中的文件，如果文件名加上”.jpg”不在pic文件夹中，它就会将这个文件加入到files_not_matched列表中。最后，它会遍历files_not_matched列表，将其中的文件从json文件夹中移动到“not_matched”文件夹中。</p><p>最后，它会打印出移动的文件数量和所有不匹配的文件的文件名。</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os, shutil</span><br><span class="line"></span><br><span class="line">pic_path = <span class="string">&quot;pic/&quot;</span></span><br><span class="line">json_path = <span class="string">&quot;json/&quot;</span></span><br><span class="line"></span><br><span class="line">pic_files = &#123;&#125;</span><br><span class="line">json_files = &#123;&#125;</span><br><span class="line"></span><br><span class="line">pic_list = os.listdir(pic_path)</span><br><span class="line">json_list = os.listdir(json_path)</span><br><span class="line"></span><br><span class="line">files_not_matched = []</span><br><span class="line"></span><br><span class="line">moved_file_num = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> pic_list:</span><br><span class="line"><span class="keyword">if</span> i.split(<span class="string">&quot;.&quot;</span>)[<span class="number">0</span>] + <span class="string">&quot;.json&quot;</span> <span class="keyword">not</span> <span class="keyword">in</span> json_list:</span><br><span class="line">files_not_matched.append(i)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(<span class="string">&quot;not_matched&quot;</span>):</span><br><span class="line">os.mkdir(<span class="string">&quot;not_matched&quot;</span>)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> files_not_matched:</span><br><span class="line">shutil.move(os.path.join(pic_path, i),</span><br><span class="line">os.path.join(<span class="string">&quot;not_matched&quot;</span>, i))</span><br><span class="line">moved_file_num += <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> files_not_matched:</span><br><span class="line"><span class="built_in">print</span>(i)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;now moved file num:&quot;</span>, moved_file_num)</span><br><span class="line"></span><br><span class="line">files_not_matched = []</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> json_list:</span><br><span class="line"><span class="keyword">if</span> i.split(<span class="string">&quot;.&quot;</span>)[<span class="number">0</span>] + <span class="string">&quot;.jpg&quot;</span> <span class="keyword">not</span> <span class="keyword">in</span> pic_list:</span><br><span class="line">files_not_matched.append(i)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> files_not_matched:</span><br><span class="line">shutil.move(os.path.join(json_path, i),</span><br><span class="line">os.path.join(<span class="string">&quot;not_matched&quot;</span>, i))</span><br><span class="line">moved_file_num += <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> files_not_matched:</span><br><span class="line"><span class="built_in">print</span>(i)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;total moved file num:&quot;</span>, moved_file_num)</span><br></pre></td></tr></table></figure><h2 id="5-remove-unknown-label-pic"><a href="#5-remove-unknown-label-pic" class="headerlink" title="5.remove-unknown-label-pic"></a>5.remove-unknown-label-pic</h2><blockquote><p>首先定义了一下label，这些标签对应的是图像分割中要识别的一些标签</p><p>这是一个把包含不知道的标签的 JSON 文件移动到指定文件夹的代码。它的思路是先将所有的 JSON 文件读入，并遍历里面的标签，如果发现标签不在预设的标签列表里面，就记录这个文件的文件名。然后判断是否已经有一个 “unknown_label” 文件夹，如果没有就新建一个。最后把这些文件移动到 “unknown_label” 文件夹里。最后打印结果，告诉用户有多少文件包含不知道的标签，有多少文件已经移动到 “unknown_label” 文件夹。</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> shutil</span><br><span class="line"></span><br><span class="line">labels = [<span class="string">&#x27;nerve&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;fibrous annulus&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;nucleus pulposus&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;ligamentum flavum&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;extra-dural fat&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;muscle&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;lamina&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;tool1&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;tool2&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;tool3&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;tool4&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;tool5&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;tool6&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;tool7&#x27;</span>]</span><br><span class="line"></span><br><span class="line">json_path = <span class="string">&quot;json/&quot;</span></span><br><span class="line"></span><br><span class="line">json_list = os.listdir(json_path)</span><br><span class="line"></span><br><span class="line">json_content = <span class="literal">None</span></span><br><span class="line"></span><br><span class="line">file_with_unknown_label = &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> json_list:</span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(os.path.join(json_path, i), encoding=<span class="string">&quot;utf-8&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">json_content = json.load(f)</span><br><span class="line"><span class="keyword">for</span> j <span class="keyword">in</span> json_content[<span class="string">&quot;shapes&quot;</span>]:</span><br><span class="line"><span class="keyword">if</span> j[<span class="string">&quot;label&quot;</span>] <span class="keyword">not</span> <span class="keyword">in</span> labels:</span><br><span class="line">file_with_unknown_label[i] = <span class="number">1</span> <span class="comment">#防止一个文件中有多个不认识的label</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(<span class="string">&quot;unknown_label&quot;</span>):</span><br><span class="line">os.mkdir(<span class="string">&quot;unknown_label&quot;</span>)</span><br><span class="line"></span><br><span class="line">count = <span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> file_with_unknown_label:</span><br><span class="line">shutil.move(os.path.join(json_path, i),</span><br><span class="line">os.path.join(<span class="string">&quot;unknown_label&quot;</span>, i))</span><br><span class="line">count += <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;&#123;&#125; files have unknown label. &#123;&#125; files moved.&quot;</span>.<span class="built_in">format</span>(</span><br><span class="line"><span class="built_in">len</span>(file_with_unknown_label),</span><br><span class="line">count)</span><br><span class="line">)</span><br></pre></td></tr></table></figure><h2 id="6-random-split-train-val-test"><a href="#6-random-split-train-val-test" class="headerlink" title="6.random-split-train-val-test"></a>6.random-split-train-val-test</h2><blockquote><p>这段代码是将 “json” 目录下的文件随机分成三个集合：训练集、验证集和测试集，其中，训练集占比 40%，验证集占比 20%，测试集占比 40%。把文件移动到 “train”、”val” 和 “test” 目录下。最后打印出文件移动的总数，以及每个集合中文件的数量。</p><p>其实完全可以手工来完成，不过学长这么搞了就这样吧</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os, shutil, random</span><br><span class="line"></span><br><span class="line">json_path = <span class="string">&quot;json/&quot;</span></span><br><span class="line"></span><br><span class="line">file_list = os.listdir(json_path)</span><br><span class="line"></span><br><span class="line">json_num = <span class="built_in">len</span>(file_list)</span><br><span class="line"></span><br><span class="line">split_map = [<span class="number">0</span> <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(json_num)]</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(<span class="string">&quot;train&quot;</span>):</span><br><span class="line">os.mkdir(<span class="string">&quot;train&quot;</span>)</span><br><span class="line"><span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(<span class="string">&quot;val&quot;</span>):</span><br><span class="line">os.mkdir(<span class="string">&quot;val&quot;</span>)</span><br><span class="line"><span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(<span class="string">&quot;test&quot;</span>):</span><br><span class="line">os.mkdir(<span class="string">&quot;test&quot;</span>)</span><br><span class="line"></span><br><span class="line">train_proportion = <span class="number">0.4</span></span><br><span class="line">val_proportion = <span class="number">0.2</span></span><br><span class="line">test_proportion = <span class="number">0.4</span></span><br><span class="line"></span><br><span class="line">train_num = <span class="built_in">int</span>(json_num * train_proportion)</span><br><span class="line">test_num = <span class="built_in">int</span>(json_num * test_proportion)</span><br><span class="line">val_num = <span class="built_in">int</span>(json_num * val_proportion)</span><br><span class="line"></span><br><span class="line">train_path = <span class="string">&quot;train/&quot;</span></span><br><span class="line">val_path = <span class="string">&quot;val/&quot;</span></span><br><span class="line">test_path = <span class="string">&quot;test/&quot;</span></span><br><span class="line"></span><br><span class="line">NO_DATASET = <span class="number">0</span></span><br><span class="line">TRAIN_DATA = <span class="number">1</span></span><br><span class="line">VAL_DATA = <span class="number">2</span></span><br><span class="line">TEST_DATA = <span class="number">3</span></span><br><span class="line"></span><br><span class="line">temp = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> temp &lt; train_num:</span><br><span class="line">randnum = random.randint(<span class="number">0</span>, json_num - <span class="number">1</span>)</span><br><span class="line"><span class="keyword">if</span> split_map[randnum] == NO_DATASET:</span><br><span class="line">split_map[randnum] = TRAIN_DATA        <span class="comment">#means this file is regarded as train data</span></span><br><span class="line">temp += <span class="number">1</span></span><br><span class="line"></span><br><span class="line">temp = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> temp &lt; val_num:</span><br><span class="line">randnum = random.randint(<span class="number">0</span>, json_num - <span class="number">1</span>)</span><br><span class="line"><span class="keyword">if</span> split_map[randnum] == NO_DATASET:</span><br><span class="line">split_map[randnum] = VAL_DATA        <span class="comment">#means this file is regarded as train data</span></span><br><span class="line">temp += <span class="number">1</span></span><br><span class="line"></span><br><span class="line">temp = <span class="number">0</span></span><br><span class="line"><span class="keyword">while</span> temp &lt; test_num:</span><br><span class="line">randnum = random.randint(<span class="number">0</span>, json_num - <span class="number">1</span>)</span><br><span class="line"><span class="keyword">if</span> split_map[randnum] == NO_DATASET:</span><br><span class="line">split_map[randnum] = TEST_DATA        <span class="comment">#means this file is regarded as train data</span></span><br><span class="line">temp += <span class="number">1</span></span><br><span class="line"></span><br><span class="line">count = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(json_num):</span><br><span class="line"><span class="keyword">if</span> split_map[i] == TRAIN_DATA:</span><br><span class="line">shutil.move(os.path.join(json_path, file_list[i]),</span><br><span class="line">os.path.join(train_path, file_list[i]))</span><br><span class="line">count += <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">elif</span> split_map[i] == VAL_DATA:</span><br><span class="line">shutil.move(os.path.join(json_path, file_list[i]),</span><br><span class="line">os.path.join(val_path, file_list[i]))</span><br><span class="line">count += <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">elif</span> split_map[i] == TEST_DATA:</span><br><span class="line">shutil.move(os.path.join(json_path, file_list[i]),</span><br><span class="line">os.path.join(test_path, file_list[i]))</span><br><span class="line">count += <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;No dataset was assigned, json file&quot;</span>, count + <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;&#123;&#125; files moved. \n&#123;&#125; train files.\n&#123;&#125; test files.\n&#123;&#125;val files.&quot;</span>.<span class="built_in">format</span>(</span><br><span class="line">count, train_num, test_num, val_num)</span><br><span class="line">)</span><br></pre></td></tr></table></figure><h2 id="extra-find-muscle"><a href="#extra-find-muscle" class="headerlink" title="extra-find_muscle"></a>extra-find_muscle</h2><blockquote><p>这段代码从文件夹 “train” 中读取所有文件，并使用 JSON 模块从每个文件中读取数据。对于每个文件，它会遍历 “shapes” 字典，如果 “label” 的值为 “tool6”，则将该文件名添加到 “with_muscle” 列表中。最后，它会输出 “with_muscle” 列表。</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json, os</span><br><span class="line"></span><br><span class="line">json_path = <span class="string">&quot;train&quot;</span></span><br><span class="line"></span><br><span class="line">file_list = os.listdir(json_path)</span><br><span class="line"></span><br><span class="line">with_muscle = []</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> file_list:</span><br><span class="line">content = <span class="literal">None</span></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(json_path + <span class="string">&quot;/&quot;</span> + i, encoding=<span class="string">&quot;utf-8&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">content = json.load(f)</span><br><span class="line"><span class="keyword">for</span> j <span class="keyword">in</span> content[<span class="string">&quot;shapes&quot;</span>]:</span><br><span class="line"><span class="comment">#if j[&#x27;label&#x27;] == &#x27;muscle&#x27; or j[&#x27;label&#x27;] == &#x27;muscles&#x27;:</span></span><br><span class="line"><span class="keyword">if</span> j[<span class="string">&#x27;label&#x27;</span>] == <span class="string">&#x27;tool6&#x27;</span>:</span><br><span class="line"><span class="built_in">print</span>(j[<span class="string">&#x27;label&#x27;</span>])</span><br><span class="line">with_muscle.append(i)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(with_muscle)</span><br></pre></td></tr></table></figure><h2 id="labelme2coco-py-※★重点"><a href="#labelme2coco-py-※★重点" class="headerlink" title="labelme2coco.py    ※★重点"></a>labelme2coco.py    ※★重点</h2><blockquote><p>其实我解释的很潦草，因为我也不知道一些具体函数的实现</p><p>此脚本将 LabelMe 注释文件转换为 COCO 格式。 COCO 格式是一种流行的图像注释格式，用于计算机视觉任务，例如对象检测和分割。</p><p>该脚本首先使用 argparse 库解析命令行参数。 它以 LabelMe 注释文件的目录作为输入，并以 COCO 格式输出目录。 该脚本还需要一个带有类标签 (–labels) 的文本文件。</p><p>接下来，脚本创建 COCO 数据集的基本结构，并使用类标签填充类别字段。 该脚本将类名称映射到类 ID，其中 ID 从第一个类的 0 开始，每个后续类的 ID 增加 1。</p><p>该脚本然后处理输入目录中的每个 LabelMe 注释文件并将其转换为 COCO 格式。 每个 LabelMe 文件的图像数据在输出目录中保存为 JPEG 图像。 该脚本还在 COCO 数据集的注释字段中保存了每个图像的注释，包括边界框、分割和类 ID。 该脚本使用 imgviz 库保存图像数据，使用 uuid 库为每个注释生成唯一的 ID。</p><p>最后，脚本将整个 COCO 数据集保存在输出目录中的 JSON 文件中。</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> argparse</span><br><span class="line"><span class="keyword">import</span> collections</span><br><span class="line"><span class="keyword">import</span> datetime</span><br><span class="line"><span class="keyword">import</span> glob</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> os.path <span class="keyword">as</span> osp</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">import</span> uuid</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> imgviz <span class="comment"># pip3 install imgviz安装</span></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> labelme</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="keyword">import</span> pycocotools.mask</span><br><span class="line"><span class="keyword">except</span> ImportError:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Please install pycocotools:\n\n    pip install pycocotools\n&quot;</span>)</span><br><span class="line">    sys.exit(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    parser = argparse.ArgumentParser(</span><br><span class="line">        formatter_class=argparse.ArgumentDefaultsHelpFormatter</span><br><span class="line">    )</span><br><span class="line">    parser.add_argument(<span class="string">&quot;--input_dir&quot;</span>, default=<span class="string">&#x27;data_annotated&#x27;</span>)</span><br><span class="line">    parser.add_argument(<span class="string">&quot;--output_dir&quot;</span>, default=<span class="string">&#x27;data_dataset_coco&#x27;</span>)</span><br><span class="line">    parser.add_argument(<span class="string">&quot;--labels&quot;</span>, default=<span class="string">&#x27;labels.txt&#x27;</span>)</span><br><span class="line">    parser.add_argument(</span><br><span class="line">        <span class="string">&quot;--noviz&quot;</span>, <span class="built_in">help</span>=<span class="string">&quot;no visualization&quot;</span>, action=<span class="string">&quot;store_true&quot;</span></span><br><span class="line">    )</span><br><span class="line">    args = parser.parse_args()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> osp.exists(args.output_dir):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;Output directory already exists:&quot;</span>, args.output_dir)</span><br><span class="line">        sys.exit(<span class="number">1</span>)</span><br><span class="line">    os.makedirs(args.output_dir)</span><br><span class="line">    os.makedirs(osp.join(args.output_dir, <span class="string">&quot;JPEGImages&quot;</span>))</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> args.noviz:</span><br><span class="line">        os.makedirs(osp.join(args.output_dir, <span class="string">&quot;Visualization&quot;</span>))</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Creating dataset:&quot;</span>, args.output_dir)</span><br><span class="line"></span><br><span class="line">    now = datetime.datetime.now()</span><br><span class="line"></span><br><span class="line">    data = <span class="built_in">dict</span>(</span><br><span class="line">        info=<span class="built_in">dict</span>(</span><br><span class="line">            description=<span class="literal">None</span>,</span><br><span class="line">            url=<span class="literal">None</span>,</span><br><span class="line">            version=<span class="literal">None</span>,</span><br><span class="line">            year=now.year,</span><br><span class="line">            contributor=<span class="literal">None</span>,</span><br><span class="line">            date_created=now.strftime(<span class="string">&quot;%Y-%m-%d %H:%M:%S.%f&quot;</span>),</span><br><span class="line">        ),</span><br><span class="line">        licenses=[<span class="built_in">dict</span>(url=<span class="literal">None</span>, <span class="built_in">id</span>=<span class="number">0</span>, name=<span class="literal">None</span>,)],</span><br><span class="line">        images=[</span><br><span class="line">            <span class="comment"># license, url, file_name, height, width, date_captured, id</span></span><br><span class="line">        ],</span><br><span class="line">        <span class="built_in">type</span>=<span class="string">&quot;instances&quot;</span>,</span><br><span class="line">        annotations=[</span><br><span class="line">            <span class="comment"># segmentation, area, iscrowd, image_id, bbox, category_id, id</span></span><br><span class="line">        ],</span><br><span class="line">        categories=[</span><br><span class="line">            <span class="comment"># supercategory, id, name</span></span><br><span class="line">        ],</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">    class_name_to_id = &#123;&#125;</span><br><span class="line">    <span class="keyword">for</span> i, line <span class="keyword">in</span> <span class="built_in">enumerate</span>(<span class="built_in">open</span>(args.labels).readlines()):</span><br><span class="line">        class_id = i - <span class="number">1</span>  <span class="comment"># starts with -1</span></span><br><span class="line">        class_name = line.strip() <span class="comment">#除空格</span></span><br><span class="line">        <span class="keyword">if</span> class_id == -<span class="number">1</span>:</span><br><span class="line">            <span class="keyword">assert</span> class_name == <span class="string">&quot;__ignore__&quot;</span></span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line">        class_name_to_id[class_name] = class_id</span><br><span class="line">        data[<span class="string">&quot;categories&quot;</span>].append(</span><br><span class="line">            <span class="built_in">dict</span>(supercategory=<span class="literal">None</span>, <span class="built_in">id</span>=class_id, name=class_name,)</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">    out_ann_file = osp.join(args.output_dir, <span class="string">&quot;annotations.json&quot;</span>)</span><br><span class="line">    label_files = glob.glob(osp.join(args.input_dir, <span class="string">&quot;*.json&quot;</span>))</span><br><span class="line">    <span class="keyword">for</span> image_id, filename <span class="keyword">in</span> <span class="built_in">enumerate</span>(label_files):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;Generating dataset from:&quot;</span>, filename)</span><br><span class="line"></span><br><span class="line">        label_file = labelme.LabelFile(filename=filename)</span><br><span class="line"></span><br><span class="line">        base = osp.splitext(osp.basename(filename))[<span class="number">0</span>]</span><br><span class="line">        out_img_file = osp.join(args.output_dir, <span class="string">&quot;JPEGImages&quot;</span>, base + <span class="string">&quot;.jpg&quot;</span>)</span><br><span class="line"></span><br><span class="line">        img = labelme.utils.img_data_to_arr(label_file.imageData)</span><br><span class="line">        imgviz.io.imsave(out_img_file, img)</span><br><span class="line">        data[<span class="string">&quot;images&quot;</span>].append(</span><br><span class="line">            <span class="built_in">dict</span>(</span><br><span class="line">                license=<span class="number">0</span>,</span><br><span class="line">                url=<span class="literal">None</span>,</span><br><span class="line">                file_name=osp.relpath(out_img_file, osp.dirname(out_ann_file)),</span><br><span class="line">                height=img.shape[<span class="number">0</span>],</span><br><span class="line">                width=img.shape[<span class="number">1</span>],</span><br><span class="line">                date_captured=<span class="literal">None</span>,</span><br><span class="line">                <span class="built_in">id</span>=image_id,</span><br><span class="line">            )</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">        masks = &#123;&#125;  <span class="comment"># for area</span></span><br><span class="line">        segmentations = collections.defaultdict(<span class="built_in">list</span>)  <span class="comment"># for segmentation</span></span><br><span class="line">        <span class="keyword">for</span> shape <span class="keyword">in</span> label_file.shapes:</span><br><span class="line">            points = shape[<span class="string">&quot;points&quot;</span>]</span><br><span class="line">            label = shape[<span class="string">&quot;label&quot;</span>]</span><br><span class="line">            group_id = shape.get(<span class="string">&quot;group_id&quot;</span>)</span><br><span class="line">            shape_type = shape.get(<span class="string">&quot;shape_type&quot;</span>, <span class="string">&quot;polygon&quot;</span>)</span><br><span class="line">            mask = labelme.utils.shape_to_mask(</span><br><span class="line">                img.shape[:<span class="number">2</span>], points, shape_type</span><br><span class="line">            )</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> group_id <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">                group_id = uuid.uuid1()</span><br><span class="line"></span><br><span class="line">            instance = (label, group_id)</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> instance <span class="keyword">in</span> masks:</span><br><span class="line">                masks[instance] = masks[instance] | mask</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                masks[instance] = mask</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> shape_type == <span class="string">&quot;rectangle&quot;</span>:</span><br><span class="line">                (x1, y1), (x2, y2) = points</span><br><span class="line">                x1, x2 = <span class="built_in">sorted</span>([x1, x2])</span><br><span class="line">                y1, y2 = <span class="built_in">sorted</span>([y1, y2])</span><br><span class="line">                points = [x1, y1, x2, y1, x2, y2, x1, y2]</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                points = np.asarray(points).flatten().tolist()</span><br><span class="line"></span><br><span class="line">            segmentations[instance].append(points)</span><br><span class="line">        segmentations = <span class="built_in">dict</span>(segmentations)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> instance, mask <span class="keyword">in</span> masks.items():</span><br><span class="line">            cls_name, group_id = instance</span><br><span class="line">            <span class="keyword">if</span> cls_name <span class="keyword">not</span> <span class="keyword">in</span> class_name_to_id:</span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line">            cls_id = class_name_to_id[cls_name]</span><br><span class="line"></span><br><span class="line">            mask = np.asfortranarray(mask.astype(np.uint8))</span><br><span class="line">            mask = pycocotools.mask.encode(mask)</span><br><span class="line">            area = <span class="built_in">float</span>(pycocotools.mask.area(mask))</span><br><span class="line">            bbox = pycocotools.mask.toBbox(mask).flatten().tolist()</span><br><span class="line"></span><br><span class="line">            data[<span class="string">&quot;annotations&quot;</span>].append(</span><br><span class="line">                <span class="built_in">dict</span>(</span><br><span class="line">                    <span class="built_in">id</span>=<span class="built_in">len</span>(data[<span class="string">&quot;annotations&quot;</span>]),</span><br><span class="line">                    image_id=image_id,</span><br><span class="line">                    category_id=cls_id,</span><br><span class="line">                    segmentation=segmentations[instance],</span><br><span class="line">                    area=area,</span><br><span class="line">                    bbox=bbox,</span><br><span class="line">                    iscrowd=<span class="number">0</span>,</span><br><span class="line">                )</span><br><span class="line">            )</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> args.noviz:</span><br><span class="line">            <span class="comment"># print(&#x27;mask:&#123;&#125;&#x27;.format(masks))</span></span><br><span class="line">            labels, captions, masks = <span class="built_in">zip</span>(</span><br><span class="line">                *[</span><br><span class="line">                    (class_name_to_id[cnm], cnm, msk)</span><br><span class="line">                    <span class="keyword">for</span> (cnm, gid), msk <span class="keyword">in</span> masks.items()</span><br><span class="line">                    <span class="keyword">if</span> cnm <span class="keyword">in</span> class_name_to_id</span><br><span class="line">                ]</span><br><span class="line">            )</span><br><span class="line">            viz = imgviz.instances2rgb(</span><br><span class="line">                image=img,</span><br><span class="line">                labels=labels,</span><br><span class="line">                masks=masks,</span><br><span class="line">                captions=captions,</span><br><span class="line">                font_size=<span class="number">15</span>,</span><br><span class="line">                line_width=<span class="number">2</span>,</span><br><span class="line">            )</span><br><span class="line">            out_viz_file = osp.join(</span><br><span class="line">                args.output_dir, <span class="string">&quot;Visualization&quot;</span>, base + <span class="string">&quot;.jpg&quot;</span></span><br><span class="line">            )</span><br><span class="line">            imgviz.io.imsave(out_viz_file, viz)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(out_ann_file, <span class="string">&quot;w&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        json.dump(data, f, indent=<span class="number">4</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure><h2 id="old-6-split-train-val-test-py"><a href="#old-6-split-train-val-test-py" class="headerlink" title="old-6-split-train-val-test.py"></a>old-6-split-train-val-test.py</h2><blockquote><p>以上代码为一个python程序，用于将一个文件夹中的文件分配到三个不同的文件夹中，分别为”train”，”test”和”val”。</p><p>首先，它导入了两个库：os和shutil。os库是操作系统相关的库，可以完成许多操作系统的任务；shutil库是文件处理的库，可以完成文件的复制、移动、删除等操作。</p><p>接着，它创建了一个名为”json_path”的变量，并将其初始化为文件夹的路径”json &#x2F;“。然后，使用os.listdir（）函数读取该文件夹中的所有文件的名称，并存储在”file_list”变量中。</p><p>接下来，它使用os.path.exists（）函数检查是否存在”train”、”test”和”val”文件夹，如果不存在，则使用os.mkdir（）函数创建该文件夹。</p><p>接着，它定义了四个变量：”count”，”train_num”，”test_num”和”val_num”。这些变量用于计数文件的数量以及文件分配到哪个文件夹中。</p><p>然后，它定义了三个变量：”train_path”，”val_path”和”test_path”，分别代表”train”、”test”和”val”文件夹的路径。</p><p>最后，它使用for循环读取文件列表中的每个文件。对于每个文件，如果它的编号是5的倍数</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os, shutil</span><br><span class="line"></span><br><span class="line">json_path = <span class="string">&quot;json/&quot;</span></span><br><span class="line"></span><br><span class="line">file_list = os.listdir(json_path)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(<span class="string">&quot;train&quot;</span>):</span><br><span class="line">os.mkdir(<span class="string">&quot;train&quot;</span>)</span><br><span class="line"><span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(<span class="string">&quot;val&quot;</span>):</span><br><span class="line">os.mkdir(<span class="string">&quot;val&quot;</span>)</span><br><span class="line"><span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(<span class="string">&quot;test&quot;</span>):</span><br><span class="line">os.mkdir(<span class="string">&quot;test&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#rate: 2trian: 1val: 2test</span></span><br><span class="line"><span class="comment">#sample method: for each 5 files: train, test, val train, test</span></span><br><span class="line"></span><br><span class="line">count = <span class="number">0</span></span><br><span class="line">train_num = <span class="number">0</span></span><br><span class="line">test_num = <span class="number">0</span></span><br><span class="line">val_num = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">train_path = <span class="string">&quot;train/&quot;</span></span><br><span class="line">val_path = <span class="string">&quot;val/&quot;</span></span><br><span class="line">test_path = <span class="string">&quot;test/&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> file_list:</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> count % <span class="number">5</span> == <span class="number">0</span> <span class="keyword">or</span> count % <span class="number">5</span> == <span class="number">3</span>:</span><br><span class="line">shutil.move(os.path.join(json_path, i),</span><br><span class="line">os.path.join(train_path, i))</span><br><span class="line">train_num += <span class="number">1</span></span><br><span class="line"><span class="keyword">elif</span> count % <span class="number">5</span> == <span class="number">1</span> <span class="keyword">or</span> count % <span class="number">5</span> == <span class="number">4</span>:</span><br><span class="line">shutil.move(os.path.join(json_path, i),</span><br><span class="line">os.path.join(test_path, i))</span><br><span class="line">test_num += <span class="number">1</span></span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">shutil.move(os.path.join(json_path, i),</span><br><span class="line">os.path.join(val_path, i))</span><br><span class="line">val_num += <span class="number">1</span></span><br><span class="line"></span><br><span class="line">count += <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;&#123;&#125; files moved. \n&#123;&#125; train files.\n&#123;&#125; test files.\n&#123;&#125;val files.&quot;</span>.<span class="built_in">format</span>(</span><br><span class="line">count, train_num, test_num, val_num)</span><br><span class="line">)</span><br></pre></td></tr></table></figure><h2 id="附录"><a href="#附录" class="headerlink" title="附录"></a>附录</h2><p>“json” 库是 Python 中的一个模块，它提供了一种编码和解码 JSON 数据的简单方法。JSON（JavaScript Object Notation）是一种轻量级的数据交换格式，广泛用于客户端和服务器之间或系统之间的数据交换。JSON 数据表示为键值对的集合，类似于 Python 中的字典，可以很容易地转换为和其他数据格式，包括 Python 字典。</p><p>Python 中的 “json” 库提供了两个主要函数：”json.dump()” 和 “json.load()”。”json.dump()” 函数用于将 JSON 数据写入文件，”json.load()” 函数用于从文件读取 JSON 数据。</p><p>在您提供的代码中，使用 “json.load()” 函数读取 JSON 文件的内容，并将其存储在 Python 对象中，然后可以对其进行操作。使用 “json.dump()” 函数将更新后的 Python 对象的内容写回 JSON 文件。</p><p>总之，Python 中的 “json” 库提供了一种方便的方法来处理 JSON 数据，可以在 Python 程序</p>]]></content>
      
      
      <categories>
          
          <category> 深度学习 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 深度学习 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>软件工程复习-cumt</title>
      <link href="/2023/02/19/%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B%E5%A4%8D%E4%B9%A0-cumt/"/>
      <url>/2023/02/19/%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B%E5%A4%8D%E4%B9%A0-cumt/</url>
      
        <content type="html"><![CDATA[<p>#软工复习</p><blockquote><p>1、基于给定的需求绘制DFD图 25分。<br>掌握结构化分析的方法，按照数据流图的一般步骤基于给定的需求绘制DFD图，绘制DFD图要遵循DFD的守恒、封闭和父子平衡的原则。</p><p>2、用判定表描述加工逻辑，10分。<br>基于给定的需求利用判定表描述加工逻辑，要掌握判定表的一般表现形式。<br>3、过程模型应用，10分<br>基于给定的系统开发需求选择合适的模型进行系统开发，要掌握常用的过程模型，例如瀑布模型、原型法、增量模型、螺旋模型等。在回答问题是重点阐述模型的特点，然后针对待开发系统的需求详细阐述选择模型的理由。<br>4、测试用例设计，15分<br>掌握逻辑结构覆盖法与等价类划分法设计测试用例。逻辑覆盖法设计测试用例时需要给出每种覆盖粒度对应的测试用例，以及该用例对应的执行路径。等价类划分设计测试用例时，需要按照等价类划分的步骤：（1）划分有效及无效等价类；（2）基于给定的有效和无效等价类分别设计测试用例及预期输出。<br>5、面向对象综合应用题，40分<br>基于给定的需求说明给出USE CASE图、类图及时序图，以及开发该系统时选择何种语言及开发工具进行开发，并阐述选择语言的理由。</p><p>注：本文档只复习了这五种题型，资源取自以往和现在老师 ppt，只是一个小小的汇总帮助查看。</p></blockquote><h2 id="数据流图"><a href="#数据流图" class="headerlink" title="数据流图"></a>数据流图</h2><p>描述软件系统逻辑模型的技术，其本身属于需求分析的内容。</p><h3 id="符号"><a href="#符号" class="headerlink" title="符号"></a>符号</h3><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230219195010352.png" alt="image-20230219195010352"></p><p>此外，数据流图还有一些扩展符号。</p><p>*（星号）表示数据流之间是“与”关系</p><p>+（加号）表示“或”关系</p><p>“异或”表示只能从中选一个（互斥的关系）</p><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230219195251018.png" alt="image-20230219195251018"></p><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230219195403944.png" alt="image-20230219195403944"></p><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230219195416479.png" alt="image-20230219195416479"></p><h3 id="举例"><a href="#举例" class="headerlink" title="举例"></a>举例</h3><h4 id="画流程图的步骤"><a href="#画流程图的步骤" class="headerlink" title="画流程图的步骤"></a>画流程图的步骤</h4><h5 id="1-从系统流程图出发，明确系统范围和流程"><a href="#1-从系统流程图出发，明确系统范围和流程" class="headerlink" title="1.从系统流程图出发，明确系统范围和流程"></a>1.从系统流程图出发，明确系统范围和流程</h5><p>（1）系统处理的范围 （2）信息处理流程</p><h5 id="2-识别并提取问题中数据流图中的元素"><a href="#2-识别并提取问题中数据流图中的元素" class="headerlink" title="2.识别并提取问题中数据流图中的元素"></a>2.识别并提取问题中数据流图中的元素</h5><p>（1）源与目的 （2）数据流 （3）加工处理 （4）数据存储</p><h5 id="3-根据信息处理流程，依次连接各个图上的元素"><a href="#3-根据信息处理流程，依次连接各个图上的元素" class="headerlink" title="3.根据信息处理流程，依次连接各个图上的元素"></a>3.根据信息处理流程，依次连接各个图上的元素</h5><p>（1）外部实体，加工、数据存储之间的数据流 （2）调整布局</p><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230219201632664.png" alt="image-20230219201632664"></p><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230219202327865.png" alt="image-20230219202327865"></p><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230219202657765.png" alt="image-20230219202657765"></p><h4 id="数据元素"><a href="#数据元素" class="headerlink" title="数据元素"></a>数据元素</h4><p>不可再分的数据，如：学号、姓名、课程名称</p><h4 id="数据流"><a href="#数据流" class="headerlink" title="数据流"></a>数据流</h4><p>数据在系统中流动的方向</p><blockquote><p><strong>⑴名称、描述</strong></p><p><strong>⑵来源</strong></p><p><strong>数据源、加工处理、数据存储、外部项</strong></p><p><strong>⑶去处</strong></p><p><strong>数据终点、加工处理、数据存储、外部项</strong></p><p><strong>可能不唯一</strong></p><p><strong>⑷组成</strong></p><p><strong>按一定方式连接起若干数据元素</strong></p><p><strong>⑸流通量</strong></p><p><strong>单位时间内的传输次数</strong></p></blockquote><h4 id="数据存储"><a href="#数据存储" class="headerlink" title="数据存储"></a>数据存储</h4><blockquote><p><strong>组成：</strong></p><p><strong>⑴名称</strong></p><p><strong>⑵输入数据流</strong></p><p><strong>⑶输出数据流</strong></p><p><strong>⑷组成</strong></p><p><strong>按一定方式连接起若干数据元素</strong></p><p><strong>⑸描述</strong></p><p><strong>⑹组织方式</strong></p><p><strong>顺序、随机、其他排序方式</strong></p></blockquote><h4 id="加工逻辑"><a href="#加工逻辑" class="headerlink" title="加工逻辑"></a>加工逻辑</h4><p>描述DFD中每个逻辑功能“做什么”</p><blockquote><p><strong>⑴名称 ⑵编号</strong></p><p><strong>⑶输入 ⑷输出</strong></p><p><strong>⑸功能描述 ⑹加工处理</strong></p></blockquote><h3 id="分层细化数据流图"><a href="#分层细化数据流图" class="headerlink" title="分层细化数据流图"></a>分层细化数据流图</h3><p>自顶向下对系统功能进行分解</p><h4 id="原则"><a href="#原则" class="headerlink" title="原则"></a>原则</h4><p>1.父&#x2F;子图平衡（I&#x2F;O）</p><p>如果一张数据流图的某个加工分解成另一张数据流图时，则上层为父图，直接下层为子图。把一个处理分解为一系列处理时，分解前和分解后的输入&#x2F;输出数据流必须相同</p><p>2.掌握分解速度</p><p>一般一次引入2-7个加工处理</p><p>3.加工框编号</p><p>子图及其所有加工都应编号 便于引用追踪</p><p>4.区分全局文件和外部项</p><p>5.画数据流而不是控制流 </p><p>数据流反映系统“做什么”，不反映”如何做“，因此箭头上的数据流明恒只能是名词或者名词短语</p><p>6.一般不画物质流</p><p>数据流反映能用计算机处理的数据，而不是实物</p><p>7.每个加工至少有一个输入数据流和一个输出数据流，反映出此加工数据的来源和加工的结果</p><h4 id="（1）识别并从问题中提取数据流图中的元素"><a href="#（1）识别并从问题中提取数据流图中的元素" class="headerlink" title="（1）识别并从问题中提取数据流图中的元素"></a>（1）识别并从问题中提取数据流图中的元素</h4><p>1.源与目的</p><p>2.数据流</p><p>3.加工处理</p><p>4.数据存储</p><h4 id="（2）画顶层DFD"><a href="#（2）画顶层DFD" class="headerlink" title="（2）画顶层DFD"></a>（2）画顶层DFD</h4><p>顶层：一个加工处理和若干个输入输出流组成</p><h4 id="（3）分层细化DFD"><a href="#（3）分层细化DFD" class="headerlink" title="（3）分层细化DFD"></a>（3）分层细化DFD</h4><p>中间层：上层分解中的中间结果，还可以进一步分解</p><p>底层：由不可再分割的加工框组成</p><h4 id="（4）完善补充"><a href="#（4）完善补充" class="headerlink" title="（4）完善补充"></a>（4）完善补充</h4><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230219204324504.png" alt="image-20230219204324504"></p><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230219204344852.png" alt="image-20230219204344852"></p><h3 id="例教材采购销售案例"><a href="#例教材采购销售案例" class="headerlink" title="例教材采购销售案例"></a>例教材采购销售案例</h3><p>下面，通过教材购销系统画出分层的数据流图。</p><p>教材购销系统的顶层数据流图表明，系统从学生处接受购书单，经处理后把领书单返回给学生，使学生可以凭领书单到书库领书。</p><p>对于脱销的教材，系统用缺书单的形式通知采购员。</p><p>新书进库后，也由采购员将进书通知返回给系统。</p><p>教材购销系统主要包含两个功能：教材销售、教材采购</p><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230219205129831.png" alt="image-20230219205129831"></p><p>因此，接下来细化顶层数据流图，把系统分解为销售和采购两个加工。从而得到第一层数据流图。</p><p>这里，外部项“学生”与销售子系统联系，“采购员”与采购子系统联系</p><p>两个自系统也存在数据联系：</p><p>1、销售子系统通过“缺书登记表”把脱销的教材传送给“采购子系统”</p><p>2、采购子系统通过“进书通知”将教材入库信息通知销售子系统。</p><p>销售子系统的功能又可以细分为：</p><p>审查有效性</p><p>开发票</p><p>登记缺书</p><p>开领书单</p><p>补售教材</p><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230219205146110.png" alt="image-20230219205146110"></p><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230219205215962.png" alt="image-20230219205215962"></p><p>销售子系统被分解为5个子加工，编号从1.1到1.5。</p><p>审查有效性时：首先校对购书单的内容是否与学生用书表F3相符</p><p>还要通过售书登记表F4检查学生是否买过这些教材。</p><p>若发现购书单中有学生不用或买重了的教材，便发出无效书单。只有通过了审查的教材保留在有效购书单。</p><p>“开发票”加工框按有效购书单的内容检查“教材存量表”，</p><p>把可供应的教材写入“发票”</p><p>把数量不足或全缺的教材写入暂缺书单。</p><p>“登记并开领书单”加工框按发票内容开出“领书单”发给学生，并在“售书登记表”中作记录</p><p>“登记缺书”加工框将将“暂缺书单”登记到“缺书登记表”</p><p>“补售教材”加工框接受来自“采购子系统”的进书通知，并开出“补售书单”，修改“缺书登记表”</p><p>在第一层数据流图中，采购是系统内的一个加工框，但在本图中，“采购”却是处于销售之外的一个外部项。</p><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230219205256325.png" alt="image-20230219205256325"></p><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230219205322755.png" alt="image-20230219205322755"></p><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230219205342176.png" alt="image-20230219205342176"></p><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230219205408369.png" alt="image-20230219205408369"></p><h3 id="例银行储蓄系统数据流图"><a href="#例银行储蓄系统数据流图" class="headerlink" title="例银行储蓄系统数据流图"></a><strong>例银行储蓄系统数据流图</strong></h3><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230219210237486.png" alt="image-20230219210237486"></p><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230219210250177.png" alt="image-20230219210250177"></p><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230219210304867.png" alt="image-20230219210304867"></p><h2 id="判定表"><a href="#判定表" class="headerlink" title="判定表"></a>判定表</h2><p>懒得过多解释，直接ppt</p><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230219210529153.png" alt="image-20230219210529153"></p><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230219210552300.png" alt="image-20230219210552300"></p><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230219210604283.png" alt="image-20230219210604283"></p><p>判定树是可以通过判定表转化过来的</p><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230219210726795.png" alt="image-20230219210726795"></p><h2 id="过程模型应用"><a href="#过程模型应用" class="headerlink" title="过程模型应用"></a>过程模型应用</h2><p>上ppt</p><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230219213438982.png" alt="image-20230219213438982"></p><h4 id="边做边改模型"><a href="#边做边改模型" class="headerlink" title="边做边改模型"></a>边做边改模型</h4><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230219213457908.png" alt="image-20230219213457908"></p><h4 id="瀑布模型"><a href="#瀑布模型" class="headerlink" title="瀑布模型"></a>瀑布模型</h4><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230221103709529.png" alt="image-20230221103709529"></p><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230221103734753.png" alt="image-20230221103734753"></p><p>瀑布模型特点：</p><p>阶段间具有顺序性和依赖性关系</p><p>l）顺序性的含义是必须待前一阶段的工作完成之后，才能进行下一阶段的工作。</p><p>II）依赖性的含义是前一阶段的输出就是后一阶段的输入，只有前一阶段的输出正确，后一阶段的工作才有可能获得正确的结果。</p><h4 id="快速原型开发"><a href="#快速原型开发" class="headerlink" title="快速原型开发"></a>快速原型开发</h4><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230221103923995.png" alt="image-20230221103923995"></p><p>快速模型特点</p><p><strong>快速原型模型特点</strong></p><p>l）在需求定义之前，需要快速构建一个系统。</p><p>lI）根据构建系统的优缺点，用户给开发人员提出反馈意见。</p><p>lII）根据反馈意见修改软件需求规格，以便系统可以更正确地反映用户的需求。</p><p>IV）减少各种假设以及风险。</p><h4 id="增量模型"><a href="#增量模型" class="headerlink" title="增量模型"></a>增量模型</h4><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230221104028995.png" alt="image-20230221104028995"></p><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230221104045946.png" alt="image-20230221104045946"></p><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230221104103415.png" alt="image-20230221104103415"></p><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230221104126119.png" alt="image-20230221104126119"></p><h4 id="螺旋模型"><a href="#螺旋模型" class="headerlink" title="螺旋模型"></a>螺旋模型</h4><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230221104145191.png" alt="image-20230221104145191"></p><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230221104203140.png" alt="image-20230221104203140"></p><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230221104220541.png" alt="image-20230221104220541"></p><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230221104230557.png" alt="image-20230221104230557"></p><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230221104251728.png" alt="image-20230221104251728"></p><h2 id="测试用例设计"><a href="#测试用例设计" class="headerlink" title="测试用例设计"></a>测试用例设计</h2><blockquote><p>测试用例&#x3D;{输入数据+期望结果}</p><p>1.白盒测试用例设计</p><p>2.黑盒测试用例设计</p><p>3.实用测试用例设计</p></blockquote><h3 id="逻辑覆盖法"><a href="#逻辑覆盖法" class="headerlink" title="逻辑覆盖法"></a>逻辑覆盖法</h3><blockquote><p>使用流程图设计测试用例</p><p>1.语句覆盖</p><p>2.判定覆盖</p><p>3.条件覆盖</p><p>4.判定条件覆盖</p><p>5.条件组合覆盖</p></blockquote><h4 id="1-语句覆盖"><a href="#1-语句覆盖" class="headerlink" title="1.语句覆盖"></a>1.语句覆盖</h4><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230221104951116.png" alt="image-20230221104951116"></p><h4 id="2-判定覆盖"><a href="#2-判定覆盖" class="headerlink" title="2.判定覆盖"></a>2.判定覆盖</h4><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230221105017654.png" alt="image-20230221105017654"></p><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230221105103047.png" alt="image-20230221105103047"></p><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230221105115733.png" alt="image-20230221105115733"></p><h4 id="3-条件覆盖"><a href="#3-条件覆盖" class="headerlink" title="3.条件覆盖"></a>3.条件覆盖</h4><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230221105140003.png" alt="image-20230221105140003"></p><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230221105155655.png" alt="image-20230221105155655"></p><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230221105210730.png" alt="image-20230221105210730"></p><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230221105237306.png" alt="image-20230221105237306"></p><p>说明：条件覆盖不一定符合判定覆盖</p><blockquote><p>判定覆盖只关心判定表达式的值(真&#x2F;假),而条件覆盖涉及到判定表达式的每个条件的值(真&#x2F;假)</p></blockquote><h4 id="4-判定-x2F-条件覆盖"><a href="#4-判定-x2F-条件覆盖" class="headerlink" title="4.判定&#x2F;条件覆盖"></a>4.判定&#x2F;条件覆盖</h4><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230221105857779.png" alt="image-20230221105857779"></p><h4 id="5-条件组合覆盖"><a href="#5-条件组合覆盖" class="headerlink" title="5.条件组合覆盖"></a>5.条件组合覆盖</h4><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230221105928673.png" alt="image-20230221105928673"></p><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230221110057200.png" alt="image-20230221110057200"></p><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230221110107127.png" alt="image-20230221110107127"></p><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230221110120765.png" alt="image-20230221110120765"></p><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230221110134243.png" alt="image-20230221110134243"></p><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230221110148596.png" alt="image-20230221110148596"></p><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230221110205207.png" alt="image-20230221110205207"></p><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230221110222081.png" alt="image-20230221110222081"></p><h3 id="等价类划分设计测试用例"><a href="#等价类划分设计测试用例" class="headerlink" title="等价类划分设计测试用例"></a>等价类划分设计测试用例</h3><p>将所有可能的输入数据划分成若干个等价类，哭然后从每一类中选取少量有代表性的数据作为测试用例。</p><h4 id="等价类包括："><a href="#等价类包括：" class="headerlink" title="等价类包括："></a>等价类包括：</h4><h5 id="1-有效等价类"><a href="#1-有效等价类" class="headerlink" title="1.有效等价类"></a>1.有效等价类</h5><p>对于程序来说，是合理的，有效的输入数据构成的集合。</p><h5 id="2-无效等价类"><a href="#2-无效等价类" class="headerlink" title="2.无效等价类"></a>2.无效等价类</h5><p>对于程序来说，是不合理的、无效的输入数据构成的集合。</p><h4 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h4><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230221110634881.png" alt="image-20230221110634881"></p><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230221110647120.png" alt="image-20230221110647120"></p><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230221110656824.png" alt="image-20230221110656824"></p><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230221110713985.png" alt="image-20230221110713985"></p><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230221110725223.png" alt="image-20230221110725223"></p><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230221110735800.png" alt="image-20230221110735800"></p><h4 id="等价类划分的方法"><a href="#等价类划分的方法" class="headerlink" title="等价类划分的方法"></a>等价类划分的方法</h4><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230221110744737.png" alt="image-20230221110744737"></p><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230221110819993.png" alt="image-20230221110819993"></p><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230221110830499.png" alt="image-20230221110830499"></p><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230221110839816.png" alt="image-20230221110839816"></p><h3 id="实用测试策略"><a href="#实用测试策略" class="headerlink" title="实用测试策略"></a>实用测试策略</h3><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230221110952788.png" alt="image-20230221110952788"></p><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230221111002817.png" alt="image-20230221111002817"></p><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230221111013314.png" alt="image-20230221111013314"></p><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230221111023219.png" alt="image-20230221111023219"></p><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230221111031813.png" alt="image-20230221111031813"></p><h3 id="面向对象综合应用题"><a href="#面向对象综合应用题" class="headerlink" title="面向对象综合应用题"></a>面向对象综合应用题</h3><p>基于给定的需求说明给出USE CASE图、类图及时序图，以及开发该系统时选择何种语言及开发工具进行开发，并阐述选择语言的理由。</p><blockquote><p>太多了，自己看ppt吧（偷懒）</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> cumt review </category>
          
      </categories>
      
      
        <tags>
            
            <tag> cumt </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>PHP and MySQL Web Development</title>
      <link href="/2023/01/23/PHP_AND_MYSQL_WEB_DEVELOPMENT/"/>
      <url>/2023/01/23/PHP_AND_MYSQL_WEB_DEVELOPMENT/</url>
      
        <content type="html"><![CDATA[<h1 id="PHP-and-MySQL-Web-Development"><a href="#PHP-and-MySQL-Web-Development" class="headerlink" title="PHP and MySQL Web Development"></a>PHP and MySQL Web Development</h1><blockquote><p>All the information is based on the book PHP and MySQL Web Development(the 5th edition)  However, the author of this document has simplified the contents of the book and made a detailed design according to the principle of practicality first.</p></blockquote><blockquote><p>所有信息均基于《PHP和MySQL Web开发》（第5版）一书。然而，本文档的作者简化了本书的内容，并根据实用性优先的原则进行了详细设计。</p></blockquote><blockquote><p>阅读此文档前，您需具备HTML，CSS和JavaScript的基础知识</p></blockquote><h2 id="环境配置"><a href="#环境配置" class="headerlink" title="环境配置"></a>环境配置</h2><h4 id="1-web环境安装"><a href="#1-web环境安装" class="headerlink" title="1.web环境安装"></a>1.web环境安装</h4><blockquote><p>一般是三件套 ：web服务，php（本文作者应用的是phpv8.1.8），应用服务器（apache和nginx），MySQL管理系统</p></blockquote><h4 id="2-环境集成包"><a href="#2-环境集成包" class="headerlink" title="2.环境集成包"></a>2.环境集成包</h4><blockquote><p>有一些集成包比较方便 phpStudy，Xampp，宝塔面板，wdcp面板安装比较方便</p></blockquote><h2 id="使用php"><a href="#使用php" class="headerlink" title="使用php"></a>使用php</h2><h3 id="从创建老式表单开始"><a href="#从创建老式表单开始" class="headerlink" title="从创建老式表单开始"></a>从创建老式表单开始</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;processorder.php&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">table</span> <span class="attr">style</span>=<span class="string">&quot;border: 0px;&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tr</span> <span class="attr">style</span>=<span class="string">&quot;background-color: #cccccc;&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span> <span class="attr">style</span>=<span class="string">&quot;width: 150px; text-align: center;&quot;</span>&gt;</span>Item<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span> <span class="attr">style</span>=<span class="string">&quot;width: 15px; text-align: center;&quot;</span>&gt;</span>Quantity<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span>Tires<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span> <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;tireqty&quot;</span> <span class="attr">size</span>=<span class="string">&quot;3&quot;</span> <span class="attr">maxlength</span>=<span class="string">&quot;3&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span>Oil<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span> <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;tireqty&quot;</span> <span class="attr">size</span>=<span class="string">&quot;3&quot;</span> <span class="attr">maxlength</span>=<span class="string">&quot;3&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span>Spark Plugs<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span> <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;tireqty&quot;</span> <span class="attr">size</span>=<span class="string">&quot;3&quot;</span> <span class="attr">maxlength</span>=<span class="string">&quot;3&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span> <span class="attr">colspan</span>=<span class="string">&quot;2&quot;</span> <span class="attr">style</span>=<span class="string">&quot;text-align: center;&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;Submit Oeder&quot;</span> <span class="attr">id</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><blockquote><p>form 表单属性解释</p><p>action属性是一个将会在用户点击Submit 按钮时加载的URL</p><p>用户输入在表单的数据将会通过http方法(这个方法规定在method属性中 ，有两种值 get(追加在URL的最后) 或者post（像单独分离的信息一样发送)）发送到这个URL</p></blockquote><h3 id="处理表单"><a href="#处理表单" class="headerlink" title="处理表单"></a>处理表单</h3><p>插入一行php代码，让其打印一段p标签</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span> <span class="keyword">echo</span> <span class="string">&#x27;&lt;p&gt;Order processed.&lt;/p&gt;&#x27;</span>;<span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><h3 id="php-标签"><a href="#php-标签" class="headerlink" title="php 标签"></a>php 标签</h3><p>php标签 php标签总是以&lt;?php 开始 以 ?&gt;结束</p><p>这里有两种php标签的样式</p><h4 id="xml样式"><a href="#xml样式" class="headerlink" title="xml样式"></a>xml样式</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span> <span class="keyword">echo</span> <span class="string">&#x27;&lt;p&gt;Order processed.&lt;/p&gt;&#x27;</span>;<span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><h4 id="短样式"><a href="#短样式" class="headerlink" title="短样式"></a>短样式</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?</span> <span class="keyword">echo</span> <span class="string">&#x27;&lt;p&gt;Order processed.&lt;/p&gt;&#x27;</span>;<span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>但是这种样式需要打开一些设置  例如config文件中的short_open_tags  </p><h3 id="php语句"><a href="#php语句" class="headerlink" title="php语句"></a>php语句</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span> <span class="keyword">echo</span> <span class="string">&#x27;&lt;p&gt; Order processed.&lt;/p&gt;&#x27;</span>;<span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>echo 语句很容易理解，就是打印输出字符串让其出现在浏览器上，注意echo语句的最后有一个 分号，漏掉分号是一个比较哦啊常见的编译错误。</p><p>php 引擎自动略过多余的空格</p><h3 id="添加动态内容"><a href="#添加动态内容" class="headerlink" title="添加动态内容"></a>添加动态内容</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">    echo &#x27;&lt;p&gt;Order processed at&#x27;;</span><br><span class="line">    echo date(&#x27;H:i,jS F Y&#x27;);</span><br><span class="line">    echo &quot;&lt;/p&gt;&quot;;</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure><p>也可以将代码写在一行中，不同echo输出语句之间加(.)</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"> <span class="keyword">echo</span> <span class="string">&quot;&lt;p&gt;Order processed at &quot;</span>.<span class="title function_ invoke__">date</span>(<span class="string">&#x27;H:i, jS F Y&#x27;</span>).<span class="string">&quot;&lt;/p&gt;&quot;</span>;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230117174629312.png" alt="image-20230117174629312"></p><h4 id="date-函数"><a href="#date-函数" class="headerlink" title="date()函数"></a>date()函数</h4><p>date（）函数期望你传递给他格式化的字符串，这些格式化的字符串代表着你想输出的风格。H是24小时格式的小时（hour），i是分钟。j是月份中的第几天，S（suffix）是表示序数的后缀（本文中是th）F是月份的全称（ full name of month）</p><blockquote><p>If date() gives you a warning about not having set the timezone, you should add the  date.timezone setting to your php.ini file. More information on this can be found in  the sample php.ini file in Appendix A（懒得翻译，自己看吧，一般也不会遇到这种情况）</p></blockquote><h3 id="访问表单变量"><a href="#访问表单变量" class="headerlink" title="访问表单变量"></a>访问表单变量</h3><h4 id="表单变量"><a href="#表单变量" class="headerlink" title="表单变量"></a>表单变量</h4><p>如果你想访问表单字段tireqty里的内容，可以通过以下这种方式</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$_POST</span>[<span class="string">&#x27;tireqty&#x27;</span>]</span><br></pre></td></tr></table></figure><p>$_POST是一个可以保存经过HTTP POST请求提交的数据信息。</p><p>这里有三种方法可以存储表单的信息，$POST, $GET和 $REQUEST，GET 或 POST 提交的所有数据的组合也可以通过 $REQUEST 获得。</p><h4 id="访问并输出这些变量"><a href="#访问并输出这些变量" class="headerlink" title="访问并输出这些变量"></a>访问并输出这些变量</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">   <span class="comment">//create short variable names</span></span><br><span class="line">   <span class="variable">$tireqty</span> = <span class="variable">$_POST</span>[<span class="string">&#x27;tireqty&#x27;</span>];</span><br><span class="line">   <span class="variable">$oilqty</span> = <span class="variable">$_POST</span>[<span class="string">&#x27;oilqty&#x27;</span>];</span><br><span class="line">   <span class="variable">$sparkqty</span> = <span class="variable">$_POST</span>[<span class="string">&#x27;sparkqty&#x27;</span>];</span><br><span class="line"></span><br><span class="line">   <span class="comment">//有两种方式可以输出这些变量 一种是直接的输出</span></span><br><span class="line">   <span class="comment">//echo ￥tireqty .&#x27;tires&lt;br /&gt;&#x27;; </span></span><br><span class="line">   <span class="comment">//但是这种方式并不推荐，因为从安全性考虑 我们不推荐使用这种方式</span></span><br><span class="line">   <span class="keyword">echo</span> <span class="string">&#x27;&lt;p&gt; Your order is as follows&lt;/p&gt;&#x27;</span>;</span><br><span class="line">   <span class="keyword">echo</span> <span class="title function_ invoke__">htmlspecialchars</span>(<span class="variable">$tireqty</span>) . <span class="string">&#x27; tires&lt;br /&gt;&#x27;</span>;</span><br><span class="line">   <span class="keyword">echo</span> <span class="title function_ invoke__">htmlspecialchars</span>(<span class="variable">$oilqty</span>) . <span class="string">&#x27; bottles of oil &lt;br /&gt;&#x27;</span>;</span><br><span class="line">   <span class="keyword">echo</span> <span class="title function_ invoke__">htmlspecialchars</span>(<span class="variable">$sparkqty</span>) . <span class="string">&#x27; spark plugs &lt;br /&gt;&#x27;</span>;</span><br><span class="line">   <span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>结果：</p><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230117225403596.png" alt="image-20230117225403596"></p><h4 id="字符串连接"><a href="#字符串连接" class="headerlink" title="字符串连接"></a>字符串连接</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">//to print the string of variables + tires</span></span><br><span class="line">    <span class="keyword">echo</span> <span class="title function_ invoke__">htmlspecialchars</span>(<span class="variable">$tireqty</span>) . <span class="string">&#x27; tires&lt;br /&gt;&#x27;</span>;</span><br><span class="line">    <span class="comment">//or you can use 必须使用双引号 这个过程，用它的内容替换一个变量</span></span><br><span class="line"><span class="comment">//在字符串中，称为插值。</span></span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&#x27;双引号变量插值&#x27;</span>;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;<span class="subst">$tireqty</span> tires&lt;br /&gt;&quot;</span>;</span><br><span class="line">    <span class="comment">//单引号将会直接输出单引号里面的内容</span></span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&#x27;单引号直接输出&#x27;</span>;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&#x27;$tireqty tires&lt;br /&gt;&#x27;</span>;</span><br></pre></td></tr></table></figure><p>第三种指定打印字符串的方法是 heredoc语法 </p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">echo</span> <span class="string">&lt;&lt;&lt;theEnd</span></span><br><span class="line"><span class="string"> line 1</span></span><br><span class="line"><span class="string"> line 2</span></span><br><span class="line"><span class="string"> line 3</span></span><br><span class="line"><span class="string">theEnd</span></span><br></pre></td></tr></table></figure><h3 id="PHP数据类型"><a href="#PHP数据类型" class="headerlink" title="PHP数据类型"></a>PHP数据类型</h3><blockquote><p>Integer 整型</p><p>Float 浮点型</p><p>String 字符串</p><p>Boolen 布尔型</p><p>Array 数组类型</p><p>Object 对象</p><p>三种特殊类型是 NULL（空值）（未给定值、未设置或已给定特定值的变量值NULL的类型为NULL）</p><p>某些内置函数（如数据库函数）返回具有以下类型的变量资源它们表示外部资源（如数据库连接）。你几乎会当然不会直接操作资源变量，但它们通常由函数，并且必须作为参数传递给其他函数。</p><p>可调用函数本质上是传递给其他函数的函数</p></blockquote><h4 id="类型转化"><a href="#类型转化" class="headerlink" title="类型转化"></a>类型转化</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$totalqty</span> =<span class="number">0</span>;</span><br><span class="line"><span class="variable">$totalmount</span>=(<span class="keyword">float</span>)<span class="variable">$totalqty</span>;</span><br><span class="line"><span class="comment">//获取totalqty，，将其解释为浮点型，并将其存储在totalmount内</span></span><br></pre></td></tr></table></figure><h4 id="可变变量"><a href="#可变变量" class="headerlink" title="可变变量"></a>可变变量</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$varname</span> =<span class="string">&#x27;tireqty&#x27;</span>;</span><br><span class="line"><span class="comment">//你可以使用$$varname 代替$tireqty</span></span><br><span class="line"><span class="variable">$$varname</span>=<span class="number">5</span>;</span><br><span class="line"><span class="comment">//这个等同于</span></span><br><span class="line"><span class="variable">$tireqty</span>=<span class="number">5</span>;</span><br><span class="line"><span class="comment">//也就是说可变变量类似于是一个变量的别名</span></span><br></pre></td></tr></table></figure><h4 id="声明和使用常量"><a href="#声明和使用常量" class="headerlink" title="声明和使用常量"></a>声明和使用常量</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_ invoke__">define</span>(<span class="string">&#x27;TIREPRICE&#x27;</span>,<span class="number">100</span>);</span><br><span class="line"><span class="title function_ invoke__">define</span>(<span class="string">&#x27;OILPRICE&#x27;</span>,<span class="number">10</span>);</span><br><span class="line"><span class="title function_ invoke__">define</span>(<span class="string">&#x27;SPARKPRICE&#x27;</span>,<span class="number">4</span>);</span><br><span class="line"><span class="comment">//打印常量时不需要美元符号</span></span><br><span class="line"><span class="keyword">echo</span> TIREPRICE;</span><br><span class="line"><span class="comment">//除了自己定义的常量以外，php也提供了不少常量，这个可以通过phpinfo()去查看</span></span><br></pre></td></tr></table></figure><h3 id="使用运算符"><a href="#使用运算符" class="headerlink" title="使用运算符"></a>使用运算符</h3><h4 id="数学运算符"><a href="#数学运算符" class="headerlink" title="数学运算符"></a>数学运算符</h4><p>加减乘除取余，这都不用多解释了</p><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230119075551545.png" alt="image-20230119075551545"></p><h4 id="字符串运算符"><a href="#字符串运算符" class="headerlink" title="字符串运算符"></a>字符串运算符</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$a</span> =<span class="string">&quot;Bob&#x27;s&quot;</span>;</span><br><span class="line"><span class="variable">$B</span>=<span class="string">&quot;Auto Parts&quot;</span>;</span><br><span class="line"><span class="variable">$result</span>=<span class="variable">$a</span>.<span class="variable">$b</span>;</span><br></pre></td></tr></table></figure><h4 id="赋值运算符"><a href="#赋值运算符" class="headerlink" title="赋值运算符"></a>赋值运算符</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$totalqty</span>=<span class="number">0</span>;</span><br><span class="line"><span class="comment">//这里的等于号就是赋值运算符 将变量totalqty赋值为0</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="引用运算符"><a href="#引用运算符" class="headerlink" title="引用运算符"></a>引用运算符</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//通常情况下将一个变量的值赋给另一个变量，一个变量的值修改并不会影响另一个变量</span></span><br><span class="line"><span class="variable">$a</span>=<span class="number">5</span>;</span><br><span class="line"><span class="variable">$b</span>=<span class="variable">$a</span>;</span><br><span class="line"><span class="comment">//当我们对a做出修改</span></span><br><span class="line"><span class="variable">$a</span>=<span class="number">7</span>;<span class="comment">//这个b将会仍然等于5</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//引用类似于一个别名，可以让两个变量名指向同一个内存，使得一个变量改变，另一个紧随其后也改变</span></span><br><span class="line"><span class="variable">$a</span>=<span class="number">5</span>;</span><br><span class="line"><span class="variable">$b</span>=&amp;<span class="variable">$a</span>;</span><br><span class="line"><span class="variable">$a</span>=<span class="number">7</span>;<span class="comment">//$a and $b are now both 7</span></span><br><span class="line"><span class="comment">//如果你想解除这个引用，你可以对其中一个变量使用unset</span></span><br><span class="line"><span class="keyword">unset</span>(<span class="variable">$a</span>);</span><br></pre></td></tr></table></figure><h4 id="比较运算符"><a href="#比较运算符" class="headerlink" title="比较运算符"></a>比较运算符</h4><p>比较运算符会返回true或者false基于比较的结果。</p><h5 id="等于运算符"><a href="#等于运算符" class="headerlink" title="等于运算符"></a>等于运算符</h5><p>这个注意一下，等于运算符也属于比价运算符，当两边值相等时返回true，不相等是返回false</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$a</span>==<span class="variable">$b</span>;   </span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230119081137796.png" alt="image-20230119081137796"></p><h4 id="逻辑运算符"><a href="#逻辑运算符" class="headerlink" title="逻辑运算符"></a>逻辑运算符</h4><p>这个类似于c（或者c++)</p><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230119081303099.png" alt="image-20230119081303099"></p><h4 id="位运算符"><a href="#位运算符" class="headerlink" title="位运算符"></a>位运算符</h4><p>无非就是与或非 异或 左移 右移</p><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230119081730203.png" alt="image-20230119081730203"></p><h4 id="其他运算符"><a href="#其他运算符" class="headerlink" title="其他运算符"></a>其他运算符</h4><h5 id="new-和-gt"><a href="#new-和-gt" class="headerlink" title="new 和 -&gt;"></a>new 和 -&gt;</h5><p>实例化一个类，访问类成员</p><h5 id="三元运算符"><a href="#三元运算符" class="headerlink" title="三元运算符"></a>三元运算符</h5><p>condition ？ if true : if false</p><h5 id="错误抑制运算符（The-Error-Suppression-Operator）"><a href="#错误抑制运算符（The-Error-Suppression-Operator）" class="headerlink" title="错误抑制运算符（The Error Suppression Operator）"></a>错误抑制运算符（The Error Suppression Operator）</h5><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$a</span>=@(<span class="number">87</span>/<span class="number">0</span>);</span><br><span class="line"><span class="comment">//如果没有这个@运算符，这一行将会产生除以零的警告，如果有这个运算符，这个问题就被抑制了</span></span><br><span class="line"><span class="comment">//如果你是用了这种方式，你需要修改在php.ini中的track_errors中的代码来实现错误处理，</span></span><br><span class="line"><span class="comment">//错误信息将会存储在全局变量$php_errormsg中</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="执行运算符"><a href="#执行运算符" class="headerlink" title="执行运算符"></a>执行运算符</h5><p>执行运算符是一对反引号&#96;&#96;，位于键盘左上角与~同键位</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$out</span>=`dir c:`;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;&lt;pre&gt;&#x27;</span> .<span class="variable">$out</span> .<span class="string">&#x27;&lt;/pre&gt;&#x27;</span>;</span><br></pre></td></tr></table></figure><p>表达式的结果是命令行输出的结果。</p><h5 id="数组运算符"><a href="#数组运算符" class="headerlink" title="数组运算符"></a>数组运算符</h5><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230119091305050.png" alt="image-20230119091305050"></p><h5 id="类型运算符-instanceof"><a href="#类型运算符-instanceof" class="headerlink" title="类型运算符 instanceof"></a>类型运算符 instanceof</h5><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">sampleClass</span></span>&#123;&#125;;</span><br><span class="line"><span class="variable">$myObject</span> = <span class="keyword">new</span> <span class="title function_ invoke__">sampleClass</span>();</span><br><span class="line"><span class="keyword">if</span> (<span class="variable">$myObject</span> <span class="keyword">instanceof</span> sampleClass)</span><br><span class="line"> <span class="keyword">echo</span> <span class="string">&quot;myObject is an instance of sampleClass&quot;</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="完成整个表单"><a href="#完成整个表单" class="headerlink" title="完成整个表单"></a>完成整个表单</h3><p>添加如下代码</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$totalqty</span> = <span class="number">0</span>;</span><br><span class="line">    <span class="variable">$totalqty</span> = <span class="variable">$tireqty</span> + <span class="variable">$oilqty</span> + <span class="variable">$sparkqty</span>;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;&lt;p&gt;Items ordered: &quot;</span> . <span class="variable">$totalqty</span> . <span class="string">&quot;&lt;br /&gt;&quot;</span>;</span><br><span class="line">    <span class="variable">$totalamount</span> = <span class="number">0.00</span>;</span><br><span class="line">    <span class="comment">//define the price</span></span><br><span class="line">    <span class="title function_ invoke__">define</span>(<span class="string">&#x27;TIREPRICE&#x27;</span>, <span class="number">100</span>);</span><br><span class="line">    <span class="title function_ invoke__">define</span>(<span class="string">&#x27;OILPRICE&#x27;</span>, <span class="number">10</span>);</span><br><span class="line">    <span class="title function_ invoke__">define</span>(<span class="string">&#x27;SPARKPRICE&#x27;</span>, <span class="number">4</span>);</span><br><span class="line">    <span class="variable">$totalamount</span> = <span class="variable">$tireqty</span> * TIREPRICE</span><br><span class="line">        + <span class="variable">$oilqty</span> * OILPRICE</span><br><span class="line">        + <span class="variable">$sparkqty</span> * SPARKPRICE;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;Subtotal: $&quot;</span> . <span class="title function_ invoke__">number_format</span>(<span class="variable">$totalamount</span>, <span class="number">2</span>) . <span class="string">&quot;&lt;br /&gt;&quot;</span>; <span class="comment">//数字样式保留两位小数</span></span><br><span class="line">    <span class="variable">$taxrate</span> = <span class="number">0.10</span>; <span class="comment">//the sales tax</span></span><br><span class="line">    <span class="variable">$totalamount</span> = <span class="variable">$totalamount</span> * (<span class="number">1</span> + <span class="variable">$taxrate</span>);</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;Total including tax: $&quot;</span> . <span class="title function_ invoke__">number_format</span>(<span class="variable">$totalamount</span>, <span class="number">2</span>) . <span class="string">&quot;&lt;/p&gt;&quot;</span></span><br></pre></td></tr></table></figure><p>试着输入123</p><p><img src="https://raw.githubusercontent.com/lijianye521/images/master/image-20230123184017164.png" alt="image-20230123184017164"></p>]]></content>
      
      
      <categories>
          
          <category> PHP and Mysql </category>
          
      </categories>
      
      
        <tags>
            
            <tag> PHP </tag>
            
            <tag> MYSQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>数据库</title>
      <link href="/2023/01/15/%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
      <url>/2023/01/15/%E6%95%B0%E6%8D%AE%E5%BA%93/</url>
      
        <content type="html"><![CDATA[<h1 id="数据库MySQL从入门到如土"><a href="#数据库MySQL从入门到如土" class="headerlink" title="数据库MySQL从入门到如土"></a>数据库MySQL从入门到如土</h1><h2 id="数据库基本操作"><a href="#数据库基本操作" class="headerlink" title="数据库基本操作"></a>数据库基本操作</h2><h3 id="DDL数据库操作"><a href="#DDL数据库操作" class="headerlink" title="DDL数据库操作"></a>DDL数据库操作</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">show databases;//查询所有数据集</span><br><span class="line">select database();//查询当前数据库</span><br><span class="line">create database[if not exists数据库][default charset字符集][collate排序规则];//创建一个数据库</span><br><span class="line">drop database 数据库名[if exists];//删除数据库</span><br><span class="line">use 数据库名;// 使用该数据库</span><br></pre></td></tr></table></figure><h4 id="DDL-表操作-查询；"><a href="#DDL-表操作-查询；" class="headerlink" title="DDL-表操作-查询；"></a>DDL-表操作-查询；</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">show tables;//查询当前数据库所有表</span><br><span class="line">desc 表名;//查询表结构</span><br><span class="line">show create table;//查询指定表的建表语句</span><br></pre></td></tr></table></figure><h4 id="DDL-表操作-创建"><a href="#DDL-表操作-创建" class="headerlink" title="DDL-表操作-创建"></a>DDL-表操作-创建</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">create table 表名(</span><br><span class="line">  字段1 字段1类型[comment 字段1注释]，</span><br><span class="line">  字段2 字段2类型[comment 字段2注释]，</span><br><span class="line">  字段3 字段3类型[comment 字段3注释]，</span><br><span class="line">  ......</span><br><span class="line">  字段n 字段n类型[comment 字段n注释]</span><br><span class="line">) [comment 表注释];</span><br><span class="line">//[...]为可选参数，最优一个字段后面没有逗号</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">//创建表</span><br><span class="line"> create table tb_user(</span><br><span class="line">    -&gt; id int comment &#x27;编号&#x27;,</span><br><span class="line">    -&gt; name varchar(50) comment &#x27;姓名&#x27;,</span><br><span class="line">    -&gt; age int comment &#x27;年龄&#x27;,</span><br><span class="line">    -&gt; gender varchar(1) comment &#x27;性别&#x27;</span><br><span class="line">    -&gt; ) comment &#x27;用户表&#x27;;</span><br><span class="line">//查询表的数据类型所用的语句</span><br><span class="line">    mysql&gt; desc tb_user</span><br><span class="line">    -&gt; ;</span><br><span class="line">+--------+-------------+--</span><br><span class="line"></span><br><span class="line">----+-----+---------+-------+</span><br><span class="line">| Field  | Type        | Null | Key | Default | Extra |</span><br><span class="line">+--------+-------------+------+-----+---------+-------+</span><br><span class="line">| id     | int         | YES  |     | NULL    |       |</span><br><span class="line">| name   | varchar(50) | YES  |     | NULL    |       |</span><br><span class="line">| age    | int         | YES  |     | NULL    |       |</span><br><span class="line">| gender | varchar(1)  | YES  |     | NULL    |       |</span><br><span class="line">+--------+-------------+------+-----+---------+-------+</span><br><span class="line">//查询指定表的建表语句</span><br><span class="line"></span><br><span class="line"> tb_user | CREATE TABLE `tb_user` (</span><br><span class="line">  `id` int DEFAULT NULL COMMENT &#x27;编号&#x27;,</span><br><span class="line">  `name` varchar(50) DEFAULT NULL COMMENT &#x27;姓名&#x27;,</span><br><span class="line">  `age` int DEFAULT NULL COMMENT &#x27;年龄&#x27;,</span><br><span class="line">  `gender` varchar(1) DEFAULT NULL COMMENT &#x27;性别&#x27;</span><br><span class="line">) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci COMMENT=&#x27;用户表&#x27; |</span><br></pre></td></tr></table></figure><h3 id="数据类型解释"><a href="#数据类型解释" class="headerlink" title="数据类型解释"></a>数据类型解释</h3><table><thead><tr><th>数据类型</th><th>描述</th></tr></thead><tbody><tr><td>CHARACTER(n)</td><td>字符&#x2F;字符串。固定长度 n。</td></tr><tr><td>VARCHAR(n) 或CHARACTER VARYING(n)</td><td>字符&#x2F;字符串。可变长度。最大长度 n。</td></tr><tr><td>BINARY(n)</td><td>二进制串。固定长度 n。</td></tr><tr><td>BOOLEAN</td><td>存储 TRUE 或 FALSE 值</td></tr><tr><td>VARBINARY(n) 或BINARY VARYING(n)</td><td>二进制串。可变长度。最大长度 n。</td></tr><tr><td>INTEGER(p)</td><td>整数值（没有小数点）。精度 p。</td></tr><tr><td>SMALLINT</td><td>整数值（没有小数点）。精度 5。</td></tr><tr><td>INTEGER</td><td>整数值（没有小数点）。精度 10。</td></tr><tr><td>BIGINT</td><td>整数值（没有小数点）。精度 19。</td></tr><tr><td>DECIMAL(p,s)</td><td>精确数值，精度 p，小数点后位数 s。例如：decimal(5,2) 是一个小数点前有 3 位数，小数点后有 2 位数的数字。</td></tr><tr><td>NUMERIC(p,s)</td><td>精确数值，精度 p，小数点后位数 s。（与 DECIMAL 相同）</td></tr><tr><td>FLOAT(p)</td><td>近似数值，尾数精度 p。一个采用以 10 为基数的指数计数法的浮点数。该类型的 size 参数由一个指定最小精度的单一数字组成。</td></tr><tr><td>REAL</td><td>近似数值，尾数精度 7。</td></tr><tr><td>FLOAT</td><td>近似数值，尾数精度 16。</td></tr><tr><td>DOUBLE PRECISION</td><td>近似数值，尾数精度 16。</td></tr><tr><td>DATE</td><td>存储年、月、日的值。</td></tr><tr><td>TIME</td><td>存储小时、分、秒的值。</td></tr><tr><td>TIMESTAMP</td><td>存储年、月、日、小时、分、秒的值。</td></tr><tr><td>INTERVAL</td><td>由一些整数字段组成，代表一段时间，取决于区间的类型。</td></tr><tr><td>ARRAY</td><td>元素的固定长度的有序集合</td></tr><tr><td>MULTISET</td><td>元素的可变长度的无序集合</td></tr><tr><td>XML</td><td>存储 XML 数据</td></tr></tbody></table><h4 id="练习"><a href="#练习" class="headerlink" title="练习"></a>练习</h4><blockquote><p>设计一张员工信息表，需求如下</p><p>1.编号（纯数字）</p><p>2.员工工号（字符串类型，长度不超过10位）</p><p>3.员工姓名（字符串类型，长度不超过10位）</p><p>4.性别（男&#x2F;女， 存储一个汉字）</p><p>5.年龄（正常人年龄，不可存负数）</p><p>6.身份证号（二代身份证号均为18位，身份证号有带有x的字符）</p><p>7.入职时间（取值年月日即可）</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">create table emp(</span><br><span class="line">  id int comment &#x27;编号&#x27;,</span><br><span class="line">  worknumber varchar(10) comment &#x27;员工工号&#x27;,</span><br><span class="line">  name varchar(10) comment &#x27;姓名&#x27;,</span><br><span class="line">  gender char(1) comment &#x27;性别&#x27;,</span><br><span class="line">  age tinyint unsigned comment &#x27;年龄&#x27;,</span><br><span class="line">  idcard char(18) comment &#x27;身份证号&#x27;,</span><br><span class="line">  entrydate date comment &#x27;入职时间&#x27;</span><br><span class="line">  )comment &#x27;员工表&#x27;;</span><br><span class="line">  </span><br><span class="line">  desc emp;</span><br><span class="line">  //结果</span><br><span class="line">  +------------+------------------+------+-----+---------+-------+</span><br><span class="line">| Field      | Type             | Null | Key | Default | Extra |</span><br><span class="line">+------------+------------------+------+-----+---------+-------+</span><br><span class="line">| id         | int              | YES  |     | NULL    |       |</span><br><span class="line">| worknumber | varchar(10)      | YES  |     | NULL    |       |</span><br><span class="line">| name       | varchar(10)      | YES  |     | NULL    |       |</span><br><span class="line">| gender     | char(1)          | YES  |     | NULL    |       |</span><br><span class="line">| age        | tinyint unsigned | YES  |     | NULL    |       |</span><br><span class="line">| idcard     | char(18)         | YES  |     | NULL    |       |</span><br><span class="line">| entrydate  | date             | YES  |     | NULL    |       |</span><br><span class="line">+------------+------------------+------+-----+---------+-------+</span><br><span class="line">7 rows in set (0.01 sec)</span><br></pre></td></tr></table></figure><h4 id="DDL-表操作-修改"><a href="#DDL-表操作-修改" class="headerlink" title="DDL-表操作-修改"></a>DDL-表操作-修改</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">//添加字段</span><br><span class="line">alter table 表名 add 字段名 类型（长度）[comment 注释][约束];</span><br><span class="line">//修改数据类型</span><br><span class="line">alter table 表名 字段名 新数据类型（长度）;</span><br><span class="line">//修改字段名和字段类型</span><br><span class="line">alter 表名 change 旧字段名 新字段名 类型（长度） [comment 注释][约束]；</span><br><span class="line">//删除字段</span><br><span class="line">alter table 表名 drop 字段名;</span><br><span class="line">//修改表名</span><br><span class="line">alter table 表名 rename to 新表名;</span><br></pre></td></tr></table></figure><h4 id="DDL-表操作-删除"><a href="#DDL-表操作-删除" class="headerlink" title="DDL-表操作-删除"></a>DDL-表操作-删除</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">//删除表</span><br><span class="line">drop table [if exists]表名;</span><br><span class="line">//删除指定表，并重新创建该表（数据没有了 只有空表）</span><br><span class="line">truncate table 表名；</span><br></pre></td></tr></table></figure><h4 id=""><a href="#" class="headerlink" title=""></a></h4>]]></content>
      
      
      <categories>
          
          <category> 数据库 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 数据库 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>开发日志</title>
      <link href="/2023/01/15/%E5%BC%80%E5%8F%91%E6%97%A5%E5%BF%97/"/>
      <url>/2023/01/15/%E5%BC%80%E5%8F%91%E6%97%A5%E5%BF%97/</url>
      
        <content type="html"><![CDATA[<p>that is a log of this blog.</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>作物杂交</title>
      <link href="/2023/01/15/%E4%BD%9C%E7%89%A9%E6%9D%82%E4%BA%A4/"/>
      <url>/2023/01/15/%E4%BD%9C%E7%89%A9%E6%9D%82%E4%BA%A4/</url>
      
        <content type="html"><![CDATA[<h1 id="作物杂交（深度优先遍历）"><a href="#作物杂交（深度优先遍历）" class="headerlink" title="作物杂交（深度优先遍历）"></a>作物杂交（深度优先遍历）</h1><p>(91)</p><p>(7)</p><p><a class="link"   href="https://www.lanqiao.cn/questions/topics/28/" >**<i class="fas fa-external-link-alt"></i></a></p><p>**</p><h3 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h3><p>作物杂交是作物栽培中重要的一步。已知有 NN 种作物 (编号 11 至 NN )，第 ii 种作物从播种到成熟的时间为 T_iTi。作物之间两两可以进行杂交，杂交时间取两种中时间较长的一方。如作物 A 种植时间为 5 天，作物 B 种植时间为 7 天，则 AB 杂交花费的时间为 7 天。作物杂交会产生固定的作物，新产生的作物仍然属于 NN 种作物中的一种。</p><p>初始时，拥有其中 MM 种作物的种子 (数量无限，可以支持多次杂交)。同时可以进行多个杂交过程。求问对于给定的目标种子，最少需要多少天能够得到。</p><p>如存在 4 种作物 ABCD，各自的成熟时间为 5 天、7 天、3 天、8 天。初始拥有 AB 两种作物的种子，目标种子为 D，已知杂交情况为 A × B → C，A × C → D。则最短的杂交过程为：</p><p>第 1 天到第 7 天 (作物 B 的时间)，A × B → C。</p><p>第 8 天到第 12 天 (作物 A 的时间)，A × C → D。</p><p>花费 12 天得到作物 D 的种子。</p><h3 id="输入描述"><a href="#输入描述" class="headerlink" title="输入描述"></a>输入描述</h3><p>输入的第 1 行包含 4 个整数 N, M, K, TN,M,K,T，NN 表示作物种类总数 (编号 11 至 NN)，MM 表示初始拥有的作物种子类型数量，KK 表示可以杂交的方案数，TT 表示目标种子的编号。</p><p>第 2 行包含 NN 个整数，其中第 ii 个整数表示第 ii 种作物的种植时间 T_i\ (1 \leq T_i \leq 100)Ti (1≤Ti≤100)。</p><p>第 3 行包含 MM 个整数，分别表示已拥有的种子类型 K_j\ (1 \leq K_j \leq M)Kj (1≤Kj≤M)，K_jKj 两两不同。</p><p>第 4 至 KK + 3 行，每行包含 3 个整数 A, B,CA,B,C，表示第 AA 类作物和第 BB 类作物杂交可以获得第 CC 类作物的种子。</p><p>其中，1 \leq N \leq 2000, 2 \leq M \leq N, 1 \leq K \leq 10^5, 1 \leq T \leq N1≤N≤2000,2≤M≤N,1≤K≤105,1≤T≤N, 保证目标种子一定可以通过杂交得到。</p><h3 id="输出描述"><a href="#输出描述" class="headerlink" title="输出描述"></a>输出描述</h3><p>输出一个整数，表示得到目标种子的最短杂交时间。</p><h3 id="输入输出样例"><a href="#输入输出样例" class="headerlink" title="输入输出样例"></a>输入输出样例</h3><h4 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h4><blockquote><p>输入</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">6 2 4 6</span><br><span class="line">5 3 4 6 4 9</span><br><span class="line">1 2</span><br><span class="line">1 2 3</span><br><span class="line">1 3 4</span><br><span class="line">2 3 5</span><br><span class="line">4 5 6</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>输出</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">16</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>样例说明</p></blockquote><p>第 1 天至第 5 天，将编号 1 与编号 2 的作物杂交，得到编号 3 的作物种子。</p><p>第 6 天至第 10 天，将编号 1 与编号 3 的作物杂交，得到编号 4 的作物种子。</p><p>第 6 天至第 9 天，将编号 2 与编号 3 的作物杂交，得到编号 5 的作物种子。</p><p>第 11 天至第 16 天，将编号 4 与编号 5 的作物杂交，得到编号 6 的作物种子。</p><p>总共花费 16 天。</p><h3 id="运行限制"><a href="#运行限制" class="headerlink" title="运行限制"></a>运行限制</h3><ul><li>最大运行时间：2s</li><li>最大运行内存: 256M</li></ul><h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> MAXN = <span class="number">2000</span>+<span class="number">5</span>;</span><br><span class="line"><span class="type">int</span> n, m, k, goal;</span><br><span class="line"><span class="type">int</span> t[MAXN];</span><br><span class="line"><span class="type">bool</span> have_k[MAXN];</span><br><span class="line"><span class="type">int</span> zajiao[MAXN][MAXN];</span><br><span class="line"><span class="type">int</span> limit_time;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">father</span> &#123;</span><br><span class="line">    <span class="type">int</span> num;</span><br><span class="line">    <span class="type">int</span> u[MAXN];</span><br><span class="line">    <span class="type">int</span> v[MAXN];</span><br><span class="line">    <span class="type">int</span> limtime;</span><br><span class="line">&#125;fa[MAXN];</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">swap</span><span class="params">(<span class="type">int</span>&amp; a, <span class="type">int</span>&amp; b)</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> tep = a; a = b; b = tep;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">input</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">//N,M,K,T，</span></span><br><span class="line">    <span class="comment">//N 表示作物种类总数 (编号 11 至 N)，</span></span><br><span class="line">    <span class="comment">//M 表示初始拥有的作物种子类型数量，</span></span><br><span class="line">    <span class="comment">//K 表示可以杂交的方案数，T 表示目标种子的编号。</span></span><br><span class="line">    cin &gt;&gt; n &gt;&gt; m &gt;&gt; k &gt;&gt; goal;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">        cin &gt;&gt; t[i];<span class="comment">//输入各个种子的培养时间 </span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= m; i++) &#123;</span><br><span class="line">        <span class="type">int</span> z;</span><br><span class="line">        cin &gt;&gt; z;</span><br><span class="line">        have_k[z] = <span class="literal">true</span>;<span class="comment">//当前拥有的种子 </span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= k; i++) &#123;</span><br><span class="line">        <span class="type">int</span> u, v, w;</span><br><span class="line">        cin &gt;&gt; u &gt;&gt; v &gt;&gt; w;</span><br><span class="line">        zajiao[u][v] = zajiao[v][u] = w;<span class="comment">//zajiao[x][y]=z  x是父亲 y是母亲 z是孩子 </span></span><br><span class="line">        <span class="type">int</span> tep = ++fa[w].num;</span><br><span class="line">        <span class="keyword">if</span> (t[u] &lt; t[v])<span class="built_in">swap</span>(u, v);</span><br><span class="line">        fa[w].u[tep] = u;</span><br><span class="line">        fa[w].v[tep] = v;<span class="comment">//保证u的位置的数据是最大的 </span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">dfs</span><span class="params">(<span class="type">int</span> x)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (fa[x].num == <span class="number">0</span>)<span class="keyword">return</span> <span class="literal">false</span>;<span class="comment">//判断是否为叶结点 已知种子 </span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= fa[x].num; i++) &#123;</span><br><span class="line">        <span class="type">int</span> v = fa[x].v[i];<span class="comment">//第i个父亲 </span></span><br><span class="line">        <span class="type">int</span> u = fa[x].u[i];<span class="comment">//第i个母亲 </span></span><br><span class="line">        <span class="keyword">if</span> (!have_k[u]) &#123;<span class="comment">//如果没有这个种子 </span></span><br><span class="line">            <span class="keyword">if</span> (!<span class="built_in">dfs</span>(u))<span class="keyword">continue</span>;<span class="comment">//如果这个结点   这个循环会被跳出 </span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (!have_k[v]) &#123;</span><br><span class="line">            <span class="keyword">if</span> (!<span class="built_in">dfs</span>(v))<span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (!fa[x].limtime)<span class="comment">//如果目前得到这个种子的时间为0的话 那么对得到它的时间进行更新 </span></span><br><span class="line">            fa[x].limtime = <span class="built_in">max</span>(fa[u].limtime, fa[v].limtime) + <span class="built_in">max</span>(t[u], t[v]);</span><br><span class="line">            <span class="comment">//时间等于他的两个父节点所需要的最大时间   再加上这两个父节点种子培育时间的最大值 </span></span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            fa[x].limtime = <span class="built_in">min</span>(fa[x].limtime, <span class="built_in">max</span>(fa[u].limtime, fa[v].limtime) + <span class="built_in">max</span>(t[u], t[v]));</span><br><span class="line">    &#125;    </span><br><span class="line">    have_k[x] = <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">input</span>();</span><br><span class="line">    <span class="built_in">dfs</span>(goal);</span><br><span class="line">    cout &lt;&lt; fa[goal].limtime;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">6 2 4 6</span></span><br><span class="line"><span class="comment">5 3 4 6 4 9</span></span><br><span class="line"><span class="comment">1 2</span></span><br><span class="line"><span class="comment">1 2 3</span></span><br><span class="line"><span class="comment">1 3 4</span></span><br><span class="line"><span class="comment">2 3 5</span></span><br><span class="line"><span class="comment">4 5 6</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">seed</span></span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> sum=<span class="number">0</span>;<span class="comment">//表示培育出该种子的方案数</span></span><br><span class="line"><span class="type">int</span> father[<span class="number">10000</span>]=&#123;<span class="number">0</span>&#125;; </span><br><span class="line"><span class="type">int</span> mather[<span class="number">10000</span>]=&#123;<span class="number">0</span>&#125;;</span><br><span class="line"><span class="type">int</span> consume=<span class="number">0</span>;<span class="comment">//需要花费的时间 </span></span><br><span class="line">&#125;;seed shuzu[<span class="number">1000</span>]; </span><br><span class="line"><span class="type">int</span> total_seed,current_seed,plan,target;<span class="comment">//种子总数  现有种子数，方案数 目标种子 </span></span><br><span class="line"><span class="type">int</span> time2[<span class="number">10001</span>]=&#123;<span class="number">0</span>&#125;;</span><br><span class="line"><span class="type">bool</span> have_seed[<span class="number">10001</span>]=&#123;<span class="number">0</span>&#125;;<span class="comment">//0表示有种子 1表示没有种子 </span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">input</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cin&gt;&gt;total_seed&gt;&gt;current_seed&gt;&gt;plan&gt;&gt;target;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=total_seed;i++)</span><br><span class="line">&#123;</span><br><span class="line">cin&gt;&gt;time2[i];&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=current_seed;i++)</span><br><span class="line">&#123;<span class="type">int</span> j;</span><br><span class="line">cin&gt;&gt;j;</span><br><span class="line">have_seed[j]=<span class="number">1</span>; </span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=plan;i++)<span class="comment">//将方案装进数组 </span></span><br><span class="line">&#123;</span><br><span class="line"><span class="type">int</span> father,mather,children;</span><br><span class="line">cin&gt;&gt;father&gt;&gt;mather&gt;&gt;children;</span><br><span class="line"><span class="type">int</span> temp=++shuzu[children].sum;</span><br><span class="line">shuzu[children].father[temp]=father;</span><br><span class="line">shuzu[children].mather[temp]=mather;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//cout&lt;&lt;&quot;输入成功&quot;;</span></span><br><span class="line"> </span><br><span class="line">&#125; ; </span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">dfs</span><span class="params">(<span class="type">int</span> mubiao)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(shuzu[mubiao].sum==<span class="number">0</span>)<span class="keyword">return</span> <span class="literal">false</span>;<span class="comment">//如果这个结点已经有了就结束 并且返回false</span></span><br><span class="line"><span class="type">int</span> father,mather;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>;j&lt;=shuzu[mubiao].sum;j++)</span><br><span class="line">&#123; father=shuzu[mubiao].father[j];</span><br><span class="line"> mather=shuzu[mubiao].mather[j];</span><br><span class="line">  <span class="keyword">if</span> (!have_seed[father]) &#123;<span class="comment">//如果没有这个种子 </span></span><br><span class="line">            <span class="built_in">dfs</span>(father);<span class="comment">//如果这个结点  </span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (!have_seed[mather]) &#123;</span><br><span class="line">            <span class="built_in">dfs</span>(mather);<span class="comment">//去找到母亲 </span></span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span>(shuzu[mubiao].consume==<span class="number">0</span>)<span class="comment">//培育出来父母所需要的最大值以及培育出来这个孩子需要的最大值 </span></span><br><span class="line">shuzu[mubiao].consume=<span class="built_in">max</span>(shuzu[father].consume,shuzu[mather].consume)+<span class="built_in">max</span>(time2[father],time2[mather]); </span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">shuzu[mubiao].consume=<span class="built_in">min</span>(<span class="built_in">max</span>(shuzu[father].consume,shuzu[mather].consume)+<span class="built_in">max</span>(time2[father],time2[mather]),shuzu[mubiao].consume);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">have_seed[mubiao]=<span class="literal">true</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">input</span>();</span><br><span class="line"><span class="built_in">dfs</span>(target);</span><br><span class="line"> cout&lt;&lt;shuzu[target].consume;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 算法 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 深度优先遍历 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>最短路</title>
      <link href="/2023/01/15/%E6%9C%80%E7%9F%AD%E8%B7%AF/"/>
      <url>/2023/01/15/%E6%9C%80%E7%9F%AD%E8%B7%AF/</url>
      
        <content type="html"><![CDATA[<h1 id="最短路"><a href="#最短路" class="headerlink" title="最短路"></a>最短路</h1><h3 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h3><p><strong>本题为填空题，只需要算出结果后，在代码中使用输出语句将所填结果输出即可。</strong></p><p>如下图所示，GG 是一个无向图，其中蓝色边的长度是 11、橘色边的长度是 22、绿色边的长度是 33。</p><p><img src="https://doc.shiyanlou.com/courses/uid1580206-20210312-1615537376560" alt="图片描述"></p><p>则从 AA 到 SS 的最短距离是多少？</p><h3 id="运行限制"><a href="#运行限制" class="headerlink" title="运行限制"></a>运行限制</h3><ul><li>最大运行时间：1s</li><li>最大运行内存: 128M</li></ul><h2 id="代码："><a href="#代码：" class="headerlink" title="代码："></a>代码：</h2><p>用最简单的dfs遍历方法</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> G[<span class="number">27</span>][<span class="number">27</span>];</span><br><span class="line"><span class="type">int</span> book[<span class="number">27</span>]=&#123;<span class="number">0</span>&#125;;</span><br><span class="line"><span class="type">int</span> dis=<span class="number">0</span>;</span><br><span class="line"><span class="type">int</span> MIN=<span class="number">9999999</span>;</span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">add</span><span class="params">(<span class="type">char</span> s1,<span class="type">char</span> s2,<span class="type">int</span> s3)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="type">int</span> i=s1-<span class="string">&#x27;A&#x27;</span>+<span class="number">1</span>;</span><br><span class="line">  <span class="type">int</span> j=s2-<span class="string">&#x27;A&#x27;</span>+<span class="number">1</span>;</span><br><span class="line">  G[i][j]=s3;</span><br><span class="line">&#125;; </span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">init</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"> <span class="built_in">add</span>(<span class="string">&#x27;A&#x27;</span>,<span class="string">&#x27;B&#x27;</span>,<span class="number">2</span>);</span><br><span class="line">    <span class="built_in">add</span>(<span class="string">&#x27;A&#x27;</span>,<span class="string">&#x27;C&#x27;</span>,<span class="number">1</span>);</span><br><span class="line">    <span class="built_in">add</span>(<span class="string">&#x27;A&#x27;</span>,<span class="string">&#x27;D&#x27;</span>,<span class="number">1</span>);</span><br><span class="line">    <span class="built_in">add</span>(<span class="string">&#x27;A&#x27;</span>,<span class="string">&#x27;D&#x27;</span>,<span class="number">1</span>);</span><br><span class="line">    <span class="built_in">add</span>(<span class="string">&#x27;B&#x27;</span>,<span class="string">&#x27;J&#x27;</span>,<span class="number">2</span>);</span><br><span class="line">    <span class="built_in">add</span>(<span class="string">&#x27;B&#x27;</span>,<span class="string">&#x27;G&#x27;</span>,<span class="number">1</span>);</span><br><span class="line">    <span class="built_in">add</span>(<span class="string">&#x27;C&#x27;</span>,<span class="string">&#x27;D&#x27;</span>,<span class="number">3</span>);</span><br><span class="line">    <span class="built_in">add</span>(<span class="string">&#x27;C&#x27;</span>,<span class="string">&#x27;F&#x27;</span>,<span class="number">3</span>);</span><br><span class="line">    <span class="built_in">add</span>(<span class="string">&#x27;C&#x27;</span>,<span class="string">&#x27;G&#x27;</span>,<span class="number">3</span>);</span><br><span class="line">    <span class="built_in">add</span>(<span class="string">&#x27;D&#x27;</span>,<span class="string">&#x27;E&#x27;</span>,<span class="number">1</span>);</span><br><span class="line">    <span class="built_in">add</span>(<span class="string">&#x27;D&#x27;</span>,<span class="string">&#x27;G&#x27;</span>,<span class="number">2</span>);</span><br><span class="line">    <span class="built_in">add</span>(<span class="string">&#x27;D&#x27;</span>,<span class="string">&#x27;H&#x27;</span>,<span class="number">1</span>);</span><br><span class="line">    <span class="built_in">add</span>(<span class="string">&#x27;D&#x27;</span>,<span class="string">&#x27;I&#x27;</span>,<span class="number">2</span>);</span><br><span class="line">    <span class="built_in">add</span>(<span class="string">&#x27;E&#x27;</span>,<span class="string">&#x27;H&#x27;</span>,<span class="number">1</span>);</span><br><span class="line">    <span class="built_in">add</span>(<span class="string">&#x27;E&#x27;</span>,<span class="string">&#x27;I&#x27;</span>,<span class="number">3</span>);</span><br><span class="line">    <span class="built_in">add</span>(<span class="string">&#x27;F&#x27;</span>,<span class="string">&#x27;G&#x27;</span>,<span class="number">1</span>);</span><br><span class="line">    <span class="built_in">add</span>(<span class="string">&#x27;F&#x27;</span>,<span class="string">&#x27;J&#x27;</span>,<span class="number">1</span>);</span><br><span class="line">    <span class="built_in">add</span>(<span class="string">&#x27;G&#x27;</span>,<span class="string">&#x27;F&#x27;</span>,<span class="number">1</span>);</span><br><span class="line">    <span class="built_in">add</span>(<span class="string">&#x27;G&#x27;</span>,<span class="string">&#x27;I&#x27;</span>,<span class="number">3</span>);</span><br><span class="line">    <span class="built_in">add</span>(<span class="string">&#x27;G&#x27;</span>,<span class="string">&#x27;K&#x27;</span>,<span class="number">2</span>);</span><br><span class="line">    <span class="built_in">add</span>(<span class="string">&#x27;H&#x27;</span>,<span class="string">&#x27;I&#x27;</span>,<span class="number">1</span>);</span><br><span class="line">    <span class="built_in">add</span>(<span class="string">&#x27;H&#x27;</span>,<span class="string">&#x27;L&#x27;</span>,<span class="number">2</span>);</span><br><span class="line">    <span class="built_in">add</span>(<span class="string">&#x27;I&#x27;</span>,<span class="string">&#x27;M&#x27;</span>,<span class="number">3</span>);</span><br><span class="line">    <span class="built_in">add</span>(<span class="string">&#x27;J&#x27;</span>,<span class="string">&#x27;S&#x27;</span>,<span class="number">2</span>);</span><br><span class="line">    <span class="built_in">add</span>(<span class="string">&#x27;K&#x27;</span>,<span class="string">&#x27;N&#x27;</span>,<span class="number">1</span>);</span><br><span class="line">    <span class="built_in">add</span>(<span class="string">&#x27;K&#x27;</span>,<span class="string">&#x27;L&#x27;</span>,<span class="number">3</span>);</span><br><span class="line">    <span class="built_in">add</span>(<span class="string">&#x27;K&#x27;</span>,<span class="string">&#x27;P&#x27;</span>,<span class="number">2</span>);</span><br><span class="line">    <span class="built_in">add</span>(<span class="string">&#x27;L&#x27;</span>,<span class="string">&#x27;M&#x27;</span>,<span class="number">1</span>);</span><br><span class="line">    <span class="built_in">add</span>(<span class="string">&#x27;L&#x27;</span>,<span class="string">&#x27;R&#x27;</span>,<span class="number">1</span>);</span><br><span class="line">    <span class="built_in">add</span>(<span class="string">&#x27;M&#x27;</span>,<span class="string">&#x27;N&#x27;</span>,<span class="number">2</span>);</span><br><span class="line">    <span class="built_in">add</span>(<span class="string">&#x27;M&#x27;</span>,<span class="string">&#x27;Q&#x27;</span>,<span class="number">1</span>);</span><br><span class="line">    <span class="built_in">add</span>(<span class="string">&#x27;M&#x27;</span>,<span class="string">&#x27;S&#x27;</span>,<span class="number">1</span>);</span><br><span class="line">    <span class="built_in">add</span>(<span class="string">&#x27;N&#x27;</span>,<span class="string">&#x27;P&#x27;</span>,<span class="number">1</span>);</span><br><span class="line">    <span class="built_in">add</span>(<span class="string">&#x27;O&#x27;</span>,<span class="string">&#x27;P&#x27;</span>,<span class="number">1</span>);</span><br><span class="line">    <span class="built_in">add</span>(<span class="string">&#x27;O&#x27;</span>,<span class="string">&#x27;Q&#x27;</span>,<span class="number">1</span>);</span><br><span class="line">    <span class="built_in">add</span>(<span class="string">&#x27;O&#x27;</span>,<span class="string">&#x27;R&#x27;</span>,<span class="number">3</span>);</span><br><span class="line">    <span class="built_in">add</span>(<span class="string">&#x27;R&#x27;</span>,<span class="string">&#x27;S&#x27;</span>,<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//这个深度优先遍历只能从A   开始   1  到 S结束 19</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">dfs</span><span class="params">(<span class="type">int</span> a,<span class="type">int</span> dis)</span><span class="comment">//深度优先遍历  递归就行 </span></span></span><br><span class="line"><span class="function"></span>&#123;<span class="keyword">if</span>(dis&gt;MIN) <span class="keyword">return</span>;</span><br><span class="line"><span class="keyword">if</span>(a==<span class="number">19</span>)<span class="comment">//临界条件 是否到达 S </span></span><br><span class="line">&#123;<span class="keyword">if</span>(dis&lt;MIN)<span class="comment">//到达并且所用的路径小于这个min值 </span></span><br><span class="line">&#123;</span><br><span class="line">MIN=dis;</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span>  j=<span class="number">1</span>;j&lt;<span class="number">26</span>;j++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">//判断两个结点之间是否有回路</span></span><br><span class="line"><span class="keyword">if</span>(G[a][j]!=<span class="number">999</span>&amp;&amp;book[j]==<span class="number">0</span>)</span><br><span class="line">&#123;</span><br><span class="line">book[j]=<span class="number">1</span>;</span><br><span class="line"><span class="built_in">dfs</span>(j,dis+G[a][j]);</span><br><span class="line">book[j]=<span class="number">0</span>;<span class="comment">//之前的探索完毕后取消城市j的标记 </span></span><br><span class="line">&#125; </span><br><span class="line">&#125; <span class="keyword">return</span>;</span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  </span><br><span class="line"><span class="comment">//这里先把所有路径初始为无穷大</span></span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;<span class="number">26</span>;i++)</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;<span class="number">26</span>;j++)</span><br><span class="line">&#123;</span><br><span class="line">G[i][j]=<span class="number">999</span>;<span class="comment">//999即为无穷大 </span></span><br><span class="line">&#125;</span><br><span class="line">   <span class="built_in">init</span>();<span class="comment">//初始化 </span></span><br><span class="line">    book[<span class="number">1</span>]=<span class="number">1</span>;</span><br><span class="line"><span class="built_in">dfs</span>(<span class="number">1</span>,<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">cout&lt;&lt;MIN;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 算法 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 图 </tag>
            
            <tag> 最短路径 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>字串分值</title>
      <link href="/2023/01/15/%E5%AD%97%E4%B8%B2%E5%88%86%E5%80%BC/"/>
      <url>/2023/01/15/%E5%AD%97%E4%B8%B2%E5%88%86%E5%80%BC/</url>
      
        <content type="html"><![CDATA[<h1 id="子串分值"><a href="#子串分值" class="headerlink" title="子串分值"></a>子串分值</h1><p>(223)</p><p>(4)</p><p><a class="link"   href="https://www.lanqiao.cn/questions/topics/28/" >**<i class="fas fa-external-link-alt"></i></a></p><p>**</p><h3 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h3><p>对于一个字符串 SS，我们定义 SS 的分值 f(S)f(S) 为 SS 中恰好出现一次的字符个数。例如 f(aba) &#x3D; 1，f(abc) &#x3D; 3, f(aaa) &#x3D; 0f(aba)&#x3D;1，f(abc)&#x3D;3,f(aaa)&#x3D;0。</p><p>现在给定一个字符串 S_{0 \cdots n − 1}S0⋯n−1（长度为 nn，1 \leq n \leq 10^51≤n≤105），请你计算对于所有 SS 的非空子串 S_{i \cdots j}(0 ≤ i ≤ j &lt; n)Si⋯j(0≤i≤j&lt;n)，f(S_{i \cdots j})f(Si⋯j) 的和是多少。</p><h3 id="输入描述"><a href="#输入描述" class="headerlink" title="输入描述"></a>输入描述</h3><p>输入一行包含一个由小写字母组成的字符串 SS。</p><h3 id="输出描述"><a href="#输出描述" class="headerlink" title="输出描述"></a>输出描述</h3><p>输出一个整数表示答案。</p><h3 id="输入输出样例"><a href="#输入输出样例" class="headerlink" title="输入输出样例"></a>输入输出样例</h3><h4 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h4><blockquote><p>输入</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ababc</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>输出</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">21</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="运行限制"><a href="#运行限制" class="headerlink" title="运行限制"></a>运行限制</h3><ul><li>最大运行时间：1s</li><li>最大运行内存: 256M</li></ul><p>总通过次数: 1164  |  总提交次数: 1693  |  通过率: 68.7%</p><p>难度:   标签: 模拟, 规律, 2020, 省赛</p><h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//这个题目有点类似于隔板问题 计算每个字母的贡献度</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">这道题应该不是要我们暴力做出来，主要是要计算每个位置上的字符对S分支的贡献度，以ababc位例，第一个a只有在&quot;a&quot;,&quot;ab&quot;中才是唯一的a,其贡献度为a,而对于最后一个c,其在&quot;ababc&quot;,&quot;babc&quot;,&quot;abc&quot;,&quot;bc&quot;,&quot;c&quot;中都有1点贡献度，于是只要遍历一遍，计算每个字符上的贡献度即可，需要注意这里的每个字符为不同位置上的</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">贡献度的计算 一个字符的贡献度便是包含一个此字符的子字符串个数,公式即是（左边的间隔+1）*(右边的间隔+1)*/</span> </span><br><span class="line">string s1;</span><br><span class="line">cin&gt;&gt;s1;</span><br><span class="line"><span class="type">int</span> sum=<span class="number">0</span>;</span><br><span class="line"><span class="type">int</span> left_jiange=<span class="number">1</span>,right_jiange=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;s1.<span class="built_in">length</span>();i++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="type">char</span> s2=s1[i];</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> l=i<span class="number">-1</span>;l&gt;=<span class="number">0</span>;l--)<span class="comment">//每次向左边查找，每向左移动一次 左间隔加一 </span></span><br><span class="line">&#123; <span class="keyword">if</span>(l&lt;<span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">if</span>(s1[l]==s2)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125; </span><br><span class="line">left_jiange++;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> r=i+<span class="number">1</span>;r&lt;s1.<span class="built_in">length</span>();r++)</span><br><span class="line">&#123;</span><br><span class="line">      <span class="keyword">if</span>(r&gt;=s1.<span class="built_in">length</span>())</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      &#125;</span><br><span class="line"><span class="keyword">if</span>(s1[r]==s2)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">right_jiange++;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">sum+=left_jiange*right_jiange;</span><br><span class="line">left_jiange=<span class="number">1</span>;</span><br><span class="line">right_jiange=<span class="number">1</span>;</span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">cout&lt;&lt;sum&lt;&lt;endl;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 算法 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 字符串 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>特别数的和</title>
      <link href="/2023/01/15/%E7%89%B9%E5%88%AB%E6%95%B0%E7%9A%84%E5%92%8C/"/>
      <url>/2023/01/15/%E7%89%B9%E5%88%AB%E6%95%B0%E7%9A%84%E5%92%8C/</url>
      
        <content type="html"><![CDATA[<h1 id="特别数的和"><a href="#特别数的和" class="headerlink" title="特别数的和"></a>特别数的和</h1><h3 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h3><p>小明对数位中含有 2、0、1、9 的数字很感兴趣（不包括前导 0），在 1 到 40 中这样的数包括 1、2、9、10 至 32、39 和 40，共 28 个，他们的和是 574。</p><p>请问，在 1 到 nn 中，所有这样的数的和是多少？</p><h3 id="输入描述"><a href="#输入描述" class="headerlink" title="输入描述"></a>输入描述</h3><p>输入格式：</p><p>输入一行包含两个整数 n（1 \leq n \leq 10^4）n（1≤n≤104）。</p><h3 id="输出描述"><a href="#输出描述" class="headerlink" title="输出描述"></a>输出描述</h3><p>输出一行，包含一个整数，表示满足条件的数的和。</p><h3 id="输入输出样例"><a href="#输入输出样例" class="headerlink" title="输入输出样例"></a>输入输出样例</h3><h4 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h4><blockquote><p>输入</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">40</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>输出</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">574</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="运行限制"><a href="#运行限制" class="headerlink" title="运行限制"></a>运行限制</h3><ul><li>最大运行时间：1s</li><li>最大运行内存: 256M</li></ul><h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line">n=<span class="built_in">int</span>(<span class="built_in">input</span>())</span><br><span class="line"><span class="built_in">sum</span>=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>,n+<span class="number">1</span>):</span><br><span class="line">    m=<span class="built_in">str</span>(i)</span><br><span class="line">    <span class="keyword">if</span>((<span class="string">&#x27;2&#x27;</span> <span class="keyword">in</span> m )<span class="keyword">or</span> ( <span class="string">&#x27;0&#x27;</span> <span class="keyword">in</span> m) <span class="keyword">or</span>(<span class="string">&#x27;1&#x27;</span> <span class="keyword">in</span> m) <span class="keyword">or</span>(<span class="string">&#x27;9&#x27;</span> <span class="keyword">in</span> m)):</span><br><span class="line">        <span class="built_in">sum</span>+=i</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">sum</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;<span class="comment">//特别数的和</span></span><br><span class="line"><span class="comment">//用c++做也行 就是转换成字符型 用string库里的find函数看看能不能找到</span></span><br><span class="line"><span class="comment">//众所周知find函数要是有这个字符返回这个位置的迭代器 否则返回最后末位置</span></span><br><span class="line"><span class="type">int</span> n;</span><br><span class="line">cin&gt;&gt;n;</span><br><span class="line"><span class="type">long</span> <span class="type">long</span> sum=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;=n;i++)</span><br><span class="line">&#123;</span><br><span class="line">string s1=<span class="built_in">to_string</span>(i);</span><br><span class="line"><span class="keyword">if</span>(s1.<span class="built_in">find</span>(<span class="string">&#x27;2&#x27;</span>)&lt;s1.<span class="built_in">length</span>()||s1.<span class="built_in">find</span>(<span class="string">&#x27;0&#x27;</span>)&lt;s1.<span class="built_in">length</span>()||s1.<span class="built_in">find</span>(<span class="string">&#x27;1&#x27;</span>)&lt;s1.<span class="built_in">length</span>()||s1.<span class="built_in">find</span>(<span class="string">&#x27;9&#x27;</span>)&lt;s1.<span class="built_in">length</span>())</span><br><span class="line">sum+=i;</span><br><span class="line">&#125;</span><br><span class="line">cout&lt;&lt;sum;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 算法 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>数学三角形</title>
      <link href="/2023/01/15/%E6%95%B0%E5%AD%A6%E4%B8%89%E8%A7%92%E5%BD%A2/"/>
      <url>/2023/01/15/%E6%95%B0%E5%AD%A6%E4%B8%89%E8%A7%92%E5%BD%A2/</url>
      
        <content type="html"><![CDATA[<h1 id="数字三角形"><a href="#数字三角形" class="headerlink" title="数字三角形"></a>数字三角形</h1><h3 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h3><p><img src="https://doc.shiyanlou.com/courses/uid1580206-20210224-1614154063705" alt="图片描述"></p><p>上图给出了一个数字三角形。从三角形的顶部到底部有很多条不同的路径。对于每条路径，把路径上面的数加起来可以得到一个和，你的任务就是找到最大的和。</p><p>路径上的每一步只能从一个数走到下一层和它最近的左边的那个数或者右 边的那个数。此外，向左下走的次数与向右下走的次数相差不能超过 1。</p><h3 id="输入描述"><a href="#输入描述" class="headerlink" title="输入描述"></a>输入描述</h3><p>输入的第一行包含一个整数 N\ (1 \leq N \leq 100)N (1≤N≤100)，表示三角形的行数。</p><p>下面的 NN 行给出数字三角形。数字三角形上的数都是 0 至 100 之间的整数。</p><h3 id="输出描述"><a href="#输出描述" class="headerlink" title="输出描述"></a>输出描述</h3><p>输出一个整数，表示答案。</p><h3 id="输入输出样例"><a href="#输入输出样例" class="headerlink" title="输入输出样例"></a>输入输出样例</h3><h4 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h4><blockquote><p>输入</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">5</span><br><span class="line">7</span><br><span class="line">3 8</span><br><span class="line">8 1 0</span><br><span class="line">2 7 4 4</span><br><span class="line">4 5 2 6 5</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>输出</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">27</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="运行限制"><a href="#运行限制" class="headerlink" title="运行限制"></a>运行限制</h3><ul><li>最大运行时间：1s</li><li>最大运行内存: 256M</li></ul><h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;<span class="comment">/*思路：1.把输入的数字存为数组；</span></span><br><span class="line"><span class="comment">2.从第二行开始计算相加和；</span></span><br><span class="line"><span class="comment">3.如果是每一行的第一个数，则与上一行第一个数取和；</span></span><br><span class="line"><span class="comment">4.如果是每一行的最后一个数，则与上一行的最后一个数取和；</span></span><br><span class="line"><span class="comment">5.如果不是上面的情况，则与上一行对应的两个数中最大的取和；</span></span><br><span class="line"><span class="comment">6.由于要求向左向右的次数相差不超过1，</span></span><br><span class="line"><span class="comment">所以只有最后一行的中间的一个或者两个数字符合要求，所以输出中间最大的数。*/</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 请在此输入您的代码</span></span><br><span class="line">  <span class="type">int</span> n;<span class="comment">//三角形的层数</span></span><br><span class="line">  cin&gt;&gt;n;</span><br><span class="line">  </span><br><span class="line">  vector&lt;vector&lt;<span class="type">int</span>&gt;&gt;<span class="built_in">shuzu</span>(n);</span><br><span class="line">  <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;n;i++)<span class="comment">//初始化三角形</span></span><br><span class="line">  &#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;=i;j++)</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="type">int</span> x;</span><br><span class="line">      cin&gt;&gt;x;</span><br><span class="line"></span><br><span class="line">      shuzu[i].<span class="built_in">push_back</span>(x);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; dp=shuzu;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;n;i++)<span class="comment">//遍历初始化dp数组 </span></span><br><span class="line">    &#123;</span><br><span class="line">    <span class="keyword">if</span>(i==<span class="number">0</span>)&#123;<span class="keyword">continue</span>;&#125;</span><br><span class="line">      <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;=i;j++)</span><br><span class="line">      &#123;</span><br><span class="line">      </span><br><span class="line">      <span class="keyword">if</span>(j==<span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">dp[i][j]+=dp[i<span class="number">-1</span>][j];<span class="comment">//2.如果是每一行的第一个数，则与上一行第一个数取和；4.如果是每一行的最后一个数，则与上一行的最后一个数取和；</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(j==i)</span><br><span class="line">&#123;</span><br><span class="line">dp[i][j]+=dp[i<span class="number">-1</span>][j<span class="number">-1</span>];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">//如果不是上面的情况，则与上一行对应的两个数中最大的取和；</span></span><br><span class="line">dp[i][j]+=<span class="built_in">max</span>(dp[i<span class="number">-1</span>][j],dp[i<span class="number">-1</span>][j<span class="number">-1</span>]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">  <span class="keyword">if</span>(n%<span class="number">2</span>==<span class="number">1</span>)</span><br><span class="line">  cout&lt;&lt;dp[n<span class="number">-1</span>][n/<span class="number">2</span>]&lt;&lt;endl;</span><br><span class="line">  <span class="keyword">else</span></span><br><span class="line">  cout&lt;&lt;<span class="built_in">max</span>(dp[n<span class="number">-1</span>][n/<span class="number">2</span>],dp[n<span class="number">-1</span>][n/<span class="number">2</span><span class="number">-1</span>]);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 算法 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 动态规划 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>数列求和</title>
      <link href="/2023/01/15/%E6%95%B0%E5%88%97%E6%B1%82%E5%92%8C/"/>
      <url>/2023/01/15/%E6%95%B0%E5%88%97%E6%B1%82%E5%92%8C/</url>
      
        <content type="html"><![CDATA[<h1 id="数列求值"><a href="#数列求值" class="headerlink" title="数列求值"></a>数列求值</h1><h3 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h3><p><strong>本题为填空题，只需要算出结果后，在代码中使用输出语句将所填结果输出即可。</strong></p><p>给定数列 1, 1, 1, 3, 5, 9, 17, \cdots1,1,1,3,5,9,17,⋯，从第 44 项开始，每项都是前 33 项的和。</p><p>求第 2019032420190324 项的最后 44 位数字。</p><h3 id="运行限制"><a href="#运行限制" class="headerlink" title="运行限制"></a>运行限制</h3><ul><li>最大运行时间：1s</li><li>最大运行内存: 128M</li></ul><h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> mod 10000 </span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> max 20190324</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="comment">// 感觉有点像dp</span></span><br><span class="line"><span class="type">long</span> <span class="type">long</span> sum=<span class="number">0</span>;</span><br><span class="line"><span class="type">int</span> a=<span class="number">1</span>,b=<span class="number">1</span>,c=<span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span>(<span class="type">long</span> <span class="type">long</span> i=<span class="number">4</span>;i&lt;=max;i++)</span><br><span class="line">  &#123;sum=(a+b+c)%mod;</span><br><span class="line">  a=b;</span><br><span class="line">  b=c;</span><br><span class="line">  c=sum;</span><br><span class="line">  cout&lt;&lt;<span class="string">&quot;第&quot;</span>&lt;&lt;i&lt;&lt;<span class="string">&quot;个数字是&quot;</span>&lt;&lt;sum&lt;&lt;endl; </span><br><span class="line">  </span><br><span class="line">  &#125; </span><br><span class="line"> </span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 算法 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 数列 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>棋盘放麦子</title>
      <link href="/2023/01/15/%E6%A3%8B%E7%9B%98%E6%94%BE%E9%BA%A6%E5%AD%90/"/>
      <url>/2023/01/15/%E6%A3%8B%E7%9B%98%E6%94%BE%E9%BA%A6%E5%AD%90/</url>
      
        <content type="html"><![CDATA[<h1 id="棋盘放麦子"><a href="#棋盘放麦子" class="headerlink" title="棋盘放麦子"></a>棋盘放麦子</h1><h3 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h3><p><strong>本题为填空题，只需要算出结果后，在代码中使用输出语句将所填结果输出即可。</strong></p><p>你一定听说过这个故事。国王对发明国际象棋的大臣很佩服，问他要什么报酬，大臣说：请在第 11 个棋盘格放 11 粒麦子，在第 22 个棋盘格放 22 粒麦子，在第 33 个棋盘格放 44 粒麦子，在第 44 个棋盘格放 88 粒麦子，……后一格的数字是前一格的两倍，直到放完所有棋盘格（国际象棋共有 6464 格）。</p><p>国王以为他只是想要一袋麦子而已，哈哈大笑。</p><p>当时的条件下无法准确计算，但估算结果令人吃惊：即使全世界都铺满麦子也不够用！</p><p>请你借助计算机准确地计算，到底需要多少粒麦子。</p><h3 id="运行限制"><a href="#运行限制" class="headerlink" title="运行限制"></a>运行限制</h3><ul><li>最大运行时间：1s</li><li>最大运行内存: 128M</li></ul><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;math.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"> <span class="type">unsigned</span> <span class="type">long</span> <span class="type">long</span> s1=<span class="built_in">pow</span>(<span class="number">2</span>,<span class="number">64</span>)<span class="number">-1</span>;</span><br><span class="line"></span><br><span class="line"> cout&lt;&lt;s1;</span><br><span class="line"> </span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 算法 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 超大数据 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>年号字串</title>
      <link href="/2023/01/15/%E5%B9%B4%E5%8F%B7%E5%AD%97%E4%B8%B2/"/>
      <url>/2023/01/15/%E5%B9%B4%E5%8F%B7%E5%AD%97%E4%B8%B2/</url>
      
        <content type="html"><![CDATA[<h1 id="年号字串"><a href="#年号字串" class="headerlink" title="年号字串"></a>年号字串</h1><p>(257)</p><h3 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h3><p><strong>本题为填空题，只需要算出结果后，在代码中使用输出语句将所填结果输出即可。</strong></p><p>小明用字母 A 对应数字 1，B 对应 2，以此类推，用 Z 对应 26。对于 27 以上的数字，小明用两位或更长位的字符串来对应，例如 AA 对应 27，AB 对应28，AZ 对应 52，LQ 对应 329。</p><p>请问 2019 对应的字符串是什么？</p><h3 id="运行限制"><a href="#运行限制" class="headerlink" title="运行限制"></a>运行限制</h3><ul><li>最大运行时间：1s</li><li>最大运行内存: 128M</li></ul><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//年号子串实质上就是所谓的26进制转化</span></span><br><span class="line"><span class="type">int</span> n=<span class="number">2019</span>;</span><br><span class="line"><span class="comment">//cin&gt;&gt;n;</span></span><br><span class="line">string s1=<span class="string">&quot;&quot;</span>;</span><br><span class="line"><span class="type">char</span> m=<span class="string">&#x27;A&#x27;</span>;<span class="comment">//A的阿斯克码是65</span></span><br><span class="line"><span class="type">char</span> A[<span class="number">27</span>]=&#123;&#125;;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=<span class="number">26</span>;i++)</span><br><span class="line">&#123;</span><br><span class="line">A[i]=i+<span class="number">64</span>;<span class="comment">//这样第一个位置为其他位置为 </span></span><br><span class="line">&#125; </span><br><span class="line"><span class="comment">//int p1=m;</span></span><br><span class="line"><span class="comment">//cout&lt;&lt; p1;</span></span><br><span class="line"><span class="comment">/*for(const auto &amp;s2:A)</span></span><br><span class="line"><span class="comment">&#123;</span></span><br><span class="line"><span class="comment">cout&lt;&lt;s2&lt;&lt;endl;</span></span><br><span class="line"><span class="comment">&#125;*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span>(n!=<span class="number">0</span>)</span><br><span class="line">&#123;s1+=A[n%<span class="number">26</span>];</span><br><span class="line">n/=<span class="number">26</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">reverse</span>(s1.<span class="built_in">begin</span>(),s1.<span class="built_in">end</span>());</span><br><span class="line">cout&lt;&lt;s1;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 算法 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 日期 </tag>
            
            <tag> 字符串 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>回文日期</title>
      <link href="/2023/01/15/%E5%9B%9E%E6%96%87%E6%97%A5%E6%9C%9F/"/>
      <url>/2023/01/15/%E5%9B%9E%E6%96%87%E6%97%A5%E6%9C%9F/</url>
      
        <content type="html"><![CDATA[<h1 id="回文日期-对不对不知道，主要是那个oj太拉胯"><a href="#回文日期-对不对不知道，主要是那个oj太拉胯" class="headerlink" title="回文日期(对不对不知道，主要是那个oj太拉胯)"></a>回文日期(对不对不知道，主要是那个oj太拉胯)</h1><h3 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h3><p>2020 年春节期间，有一个特殊的日期引起了大家的注意：2020 年 2 月 2 日。因为如果将这个日期按 “yyyymmdd” 的格式写成一个 8 位数是 20200202，恰好是一个回文数。我们称这样的日期是回文日期。</p><p>有人表示 20200202 是 “千年一遇” 的特殊日子。对此小明很不认同，因为不到 2 年之后就是下一个回文日期：20211202 即 2021 年 12 月 2 日。</p><p>也有人表示 20200202 并不仅仅是一个回文日期，还是一个 ABABBABA 型的回文日期。对此小明也不认同，因为大约 100 年后就能遇到下一个 ABABBABA 型的回文日期：21211212 即 2121 年 12 月 12 日。算不上 “千年一遇”，顶多算 “千年两遇”。</p><p>给定一个 8 位数的日期，请你计算该日期之后下一个回文日期和下一个 ABABBABA 型的回文日期各是哪一天。</p><h3 id="输入描述"><a href="#输入描述" class="headerlink" title="输入描述"></a>输入描述</h3><p>输入包含一个八位整数 NN，表示日期。</p><p>对于所有评测用例，10000101 \leq N \leq 8999123110000101≤N≤89991231，保证 NN 是一个合法日期的 8 位数表示。</p><h3 id="输出描述"><a href="#输出描述" class="headerlink" title="输出描述"></a>输出描述</h3><p>输出两行，每行 1 个八位数。第一行表示下一个回文日期，第二行表示下一个 ABABBABA 型的回文日期。</p><h3 id="输入输出样例"><a href="#输入输出样例" class="headerlink" title="输入输出样例"></a>输入输出样例</h3><h4 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h4><blockquote><p>输入</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">20200202</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>输出</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">20211202</span><br><span class="line">21211212</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="运行限制"><a href="#运行限制" class="headerlink" title="运行限制"></a>运行限制</h3><ul><li>最大运行时间：1s</li><li>最大运行内存: 256M</li></ul><h2 id="代码"><a href="#代码" class="headerlink" title="代码:"></a>代码:</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line">  <span class="type">int</span> hash1[<span class="number">13</span>]=&#123;<span class="number">0</span>,<span class="number">31</span>,<span class="number">29</span>,<span class="number">31</span>,<span class="number">30</span>,<span class="number">31</span>,<span class="number">30</span>,<span class="number">31</span>,<span class="number">31</span>,<span class="number">30</span>,<span class="number">31</span>,<span class="number">30</span>,<span class="number">31</span>&#125;; <span class="comment">//闰年 </span></span><br><span class="line">    <span class="type">int</span> hash2[<span class="number">13</span>]=&#123;<span class="number">0</span>,<span class="number">31</span>,<span class="number">28</span>,<span class="number">31</span>,<span class="number">30</span>,<span class="number">31</span>,<span class="number">30</span>,<span class="number">31</span>,<span class="number">31</span>,<span class="number">30</span>,<span class="number">31</span>,<span class="number">30</span>,<span class="number">31</span>&#125;;</span><br><span class="line"><span class="function"><span class="type">int</span>  <span class="title">huiwen</span><span class="params">(<span class="type">int</span> a)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">string s2 = <span class="built_in">to_string</span>(a);</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=s2.<span class="built_in">size</span>()<span class="number">-1</span>;i&gt;=<span class="number">0</span>;i--)</span><br><span class="line">&#123;</span><br><span class="line">s2+=s2[i];</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> shuzi=<span class="built_in">atoi</span>(s2.<span class="built_in">c_str</span>());</span><br><span class="line"><span class="keyword">return</span> shuzi;</span><br><span class="line">&#125;</span><br><span class="line"> <span class="function"><span class="type">int</span> <span class="title">huiwen2</span><span class="params">(<span class="type">int</span> a)</span></span></span><br><span class="line"><span class="function"> </span>&#123;</span><br><span class="line"> a=a*<span class="number">100</span>+a;</span><br><span class="line"> <span class="keyword">return</span>  <span class="built_in">huiwen</span>(a) ;</span><br><span class="line"> &#125; </span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line">    cin&gt;&gt;n;</span><br><span class="line">    <span class="comment">//取前四位</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=n/<span class="number">10000</span>+<span class="number">1</span>;;i++)</span><br><span class="line">    &#123;</span><br><span class="line"><span class="type">int</span> answer=<span class="built_in">huiwen</span>(i);</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span>(i/<span class="number">4</span>==<span class="number">0</span>&amp;&amp;i%<span class="number">100</span>!=<span class="number">0</span>)</span><br><span class="line">      &#123;</span><br><span class="line">  <span class="type">int</span> month=(answer%<span class="number">10000</span>)/<span class="number">100</span>;</span><br><span class="line">    <span class="keyword">if</span>(month&lt;=<span class="number">12</span>)</span><br><span class="line">      &#123;<span class="keyword">if</span>((answer%<span class="number">1000000</span>)/<span class="number">10000</span>&lt;=hash1[month])</span><br><span class="line">      &#123;</span><br><span class="line">      cout&lt;&lt;answer&lt;&lt;endl;<span class="keyword">break</span>;</span><br><span class="line">     </span><br><span class="line">      &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">      </span><br><span class="line">      <span class="keyword">else</span>&#123;</span><br><span class="line">  <span class="type">int</span> month=(answer%<span class="number">10000</span>)/<span class="number">100</span>;</span><br><span class="line">  <span class="keyword">if</span>(month&lt;=<span class="number">12</span>)</span><br><span class="line">    &#123;<span class="keyword">if</span>((answer%<span class="number">1000000</span>)/<span class="number">10000</span>&lt;=hash2[month])</span><br><span class="line">    &#123;</span><br><span class="line">    cout&lt;&lt;answer&lt;&lt;endl;<span class="keyword">break</span>;</span><br><span class="line">   </span><br><span class="line">    &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">    &#125;<span class="comment">//至此第一个回文数字结束</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i=n/<span class="number">1000000</span>+<span class="number">1</span>;;i++)</span><br><span class="line">    &#123;</span><br><span class="line"><span class="type">int</span> answer2=<span class="built_in">huiwen2</span>(i);</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> answeryear=answer2/<span class="number">10000</span>;</span><br><span class="line">      <span class="keyword">if</span>(answeryear/<span class="number">4</span>==<span class="number">0</span>&amp;&amp;answeryear%<span class="number">100</span>!=<span class="number">0</span>)</span><br><span class="line">      &#123;</span><br><span class="line">  <span class="type">int</span> month=(answer2%<span class="number">10000</span>)/<span class="number">100</span>;</span><br><span class="line">    <span class="keyword">if</span>(month&lt;=<span class="number">12</span>)</span><br><span class="line">      &#123;<span class="keyword">if</span>((answer2%<span class="number">1000000</span>)/<span class="number">10000</span>&lt;=hash1[month])</span><br><span class="line">      &#123;</span><br><span class="line">      cout&lt;&lt;answer2&lt;&lt;endl;<span class="keyword">break</span>;</span><br><span class="line">     </span><br><span class="line">      &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">      </span><br><span class="line">      <span class="keyword">else</span>&#123;</span><br><span class="line">  <span class="type">int</span> month=(answer2%<span class="number">10000</span>)/<span class="number">100</span>;</span><br><span class="line">  <span class="keyword">if</span>(month&lt;=<span class="number">12</span>)</span><br><span class="line">    &#123;<span class="keyword">if</span>((answer2%<span class="number">1000000</span>)/<span class="number">10000</span>&lt;=hash2[month])</span><br><span class="line">    &#123;</span><br><span class="line">    cout&lt;&lt;answer2&lt;&lt;endl;<span class="keyword">break</span>;</span><br><span class="line">   </span><br><span class="line">    &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">    &#125;<span class="comment">//第二个回文数字结束 </span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">      <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 算法 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 日期 </tag>
            
            <tag> 字符串 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>格子刷油漆</title>
      <link href="/2023/01/15/%E6%A0%BC%E5%AD%90%E5%88%B7%E6%B2%B9%E6%BC%86/"/>
      <url>/2023/01/15/%E6%A0%BC%E5%AD%90%E5%88%B7%E6%B2%B9%E6%BC%86/</url>
      
        <content type="html"><![CDATA[<h1 id="格子刷油漆"><a href="#格子刷油漆" class="headerlink" title="格子刷油漆"></a>格子刷油漆</h1><h3 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h3><p>X 国的一段古城墙的顶端可以看成 2\times N2×N 个格子组成的矩形（如下图所示），现需要把这些格子刷上保护漆。</p><p><img src="https://doc.shiyanlou.com/courses/uid1580206-20210202-1612251487413" alt="img"></p><p>你可以从任意一个格子刷起，刷完一格，可以移动到和它相邻的格子（对角相邻也算数），但不能移动到较远的格子（因为油漆未干不能踩！）</p><p>比如：a d b c e f 就是合格的刷漆顺序。c e f d a b 是另一种合适的方案。</p><p>当已知 NN 时，求总的方案数。当 NN 较大时，结果会迅速增大，请把结果对 10^9+7109+7 取模。</p><h3 id="输入描述"><a href="#输入描述" class="headerlink" title="输入描述"></a>输入描述</h3><p>输入数据为一个正整数（不大于 1000）。</p><h3 id="输出描述"><a href="#输出描述" class="headerlink" title="输出描述"></a>输出描述</h3><p>输出数据为一个正整数。</p><h3 id="输入输出样例"><a href="#输入输出样例" class="headerlink" title="输入输出样例"></a>输入输出样例</h3><h4 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h4><blockquote><p>输入</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">2</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>输出</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">24</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="运行限制"><a href="#运行限制" class="headerlink" title="运行限制"></a>运行限制</h3><ul><li>最大运行时间：1s</li><li>最大运行内存: 256M</li></ul><h2 id="思路："><a href="#思路：" class="headerlink" title="思路："></a>思路：</h2><p><img src="C:/Users/%E6%9D%8E%E5%BB%BA%E4%B8%9A/AppData/Roaming/Tencent/Users/2548154814/QQ/WinTemp/RichOle/_%7D9QTEBYV4$A(LC61RCBJ)T.png" alt="img"></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> mod 1000000007</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">long</span> <span class="type">long</span> a[<span class="number">100000</span>];</span><br><span class="line"><span class="type">long</span> <span class="type">long</span> b[<span class="number">100000</span>];</span><br><span class="line">a[<span class="number">1</span>]=<span class="number">1</span>;a[<span class="number">2</span>]=<span class="number">6</span>;b[<span class="number">1</span>]=<span class="number">1</span>;b[<span class="number">2</span>]=<span class="number">2</span>;</span><br><span class="line"><span class="type">int</span> N;cin&gt;&gt;N; </span><br><span class="line"><span class="keyword">if</span>(N==<span class="number">1</span>)&#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;2&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(N==<span class="number">2</span>)&#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;24&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">3</span>;i&lt;=N;i++)</span><br><span class="line">&#123;  b[i]=<span class="number">2</span>*b[i<span class="number">-1</span>];<span class="comment">//初始化b </span></span><br><span class="line">a[i]=<span class="number">4</span>*a[i<span class="number">-2</span>]+<span class="number">2</span>*a[i<span class="number">-1</span>]+b[i];<span class="comment">//初始化a </span></span><br><span class="line">b[i]%=mod;</span><br><span class="line">a[i]%=mod;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="type">long</span> <span class="type">long</span> sum1=<span class="number">0</span>;</span><br><span class="line">sum1=<span class="number">4</span>*a[N]%mod;</span><br><span class="line"><span class="type">long</span> <span class="type">long</span> sum2=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">2</span>;i&lt;=N<span class="number">-1</span>;i++)</span><br><span class="line">&#123;</span><br><span class="line"> sum2+=<span class="number">2</span>*(b[N-i+<span class="number">1</span>]*<span class="number">2</span>*a[i<span class="number">-1</span>]%mod+b[i]*<span class="number">2</span>*a[N-i]%mod) ;</span><br><span class="line">&#125;</span><br><span class="line">cout&lt;&lt;(sum1+sum2)%mod&lt;&lt;endl;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 算法 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 日期 </tag>
            
            <tag> 字符串 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>动态规划</title>
      <link href="/2023/01/15/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/"/>
      <url>/2023/01/15/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/</url>
      
        <content type="html"><![CDATA[<h1 id="动态规划"><a href="#动态规划" class="headerlink" title="动态规划"></a>动态规划</h1><h3 id="动态规划-1"><a href="#动态规划-1" class="headerlink" title="动态规划"></a><strong>动态规划</strong></h3><p>（英语：Dynamic programming，简称 DP）是一种在数学、管理科学、计算机科学、经济学和生物信息学中使用的，通过把原问题分解为相对简单的子问题的方式求解复杂问题的方法。</p><p>动态规划不是某一种具体的算法，而是一种算法思想：若要解一个给定问题，我们需要解其不同部分（即子问题），再根据子问题的解以得出原问题的解。</p><p>应用这种算法思想解决问题的可行性，对子问题与原问题的关系，以及子问题之间的关系这两方面有一些要求，它们分别对应了最优子结构和重复子问题。</p><h3 id="最优子结构"><a href="#最优子结构" class="headerlink" title="最优子结构"></a>最优子结构</h3><p>最优子结构规定的是子问题与原问题的关系</p><p>动态规划要解决的都是一些问题的最优解，即从很多解决问题的方案中找到最优的一个。当我们在求一个问题最优解的时候，如果可以把这个问题分解成多个子问题，然后递归地找到每个子问题的最优解，最后通过一定的数学方法对各个子问题的最优解进行组合得出最终的结果。总结来说就是一个问题的最优解是由它的各个子问题的最优解决定的。</p><p>将子问题的解进行组合可以得到原问题的解是动态规划可行性的关键。在解题中一般用状态转移方程描述这种组合。例如原问题的解为 f(n)f(n)，其中 f(n)f(n) 也叫状态。状态转移方程</p><p>$$<br>f(n) &#x3D; f(n - 1) + f(n - 2)f(n)&#x3D;f(n−1)+f(n−2)<br>$$<br>描述了一种原问题与子问题的组合关系 。在原问题上有一些选择，不同选择可能对应不同的子问题或者不同的组合方式。例如</p><p><img src="C:/Users/%E6%9D%8E%E5%BB%BA%E4%B8%9A/Desktop/QQ%E5%9B%BE%E7%89%8720220202172121.png" alt="QQ图片20220202172121"></p><p>n&#x3D;2k 和 n &#x3D; 2k + 1n&#x3D;2k+1 对应了原问题 n 上不同的选择，分别对应了不同的子问题和组合方式。</p><p>找到了最优子结构，也就能推导出一个状态转移方程 f(n)f(n)，通过这个状态转移方程，我们能很快的写出问题的递归实现方法。</p><p><img src="https://assets.leetcode-cn.com/aliyun-lc-upload/uploads/2020/08/06/1-1.png" alt="img"></p><h3 id="重复子问题"><a href="#重复子问题" class="headerlink" title="重复子问题"></a>重复子问题</h3><p>重复子问题规定的是子问题与子问题的关系。</p><p>当我们在递归地寻找每个子问题的最优解的时候，有可能会重复地遇到一些更小的子问题，而且这些子问题会重叠地出现在子问题里，出现这样的情况，会有很多重复的计算，动态规划可以保证每个重叠的子问题只会被求解一次。当重复的问题很多的时候，动态规划可以减少很多重复的计算。</p><p>重复子问题不是保证解的正确性必须的，但是如果递归求解子问题时，没有出现重复子问题，则没有必要用动态规划，直接普通的递归就可以了。</p><p>例如，斐波那契问题的状态转移方程</p><p> <strong>f(n) &#x3D; f(n - 1) + f(n - 2)f(n)&#x3D;f(n−1)+f(n−2)。</strong></p><p>在求 f(5)f(5) 时，需要先求子问题 f(4)f(4) 和 f(3)f(3)，得到结果后再组合成原问题 f(5)f(5) 的解。递归地求 f(4)f(4) 时，又要先求子问题 f(3)f(3) 和 f(2)f(2) ，这里的 f(3)f(3) 与求 f(5)f(5) 时的子问题重复了。</p><p><img src="https://assets.leetcode-cn.com/aliyun-lc-upload/uploads/2020/08/09/1-2.png" alt="img"></p><p>解决动态规划问题的核心：找出子问题及其子问题与原问题的关系</p><p>找到了子问题以及子问题与原问题的关系，就可以递归地求解子问题了。但重叠的子问题使得直接递归会有很多重复计算，于是就想到记忆化递归法：若能事先确定子问题的范围就可以建表存储子问题的答案。</p><p>动态规划算法中关于最优子结构和重复子问题的理解的<strong>关键点</strong>：</p><p>1.证明问题的方案中包含一种选择，选择之后留下一个或多个子问题<br>2.设计子问题的递归描述方式<br>3.证明对原问题的最优解包括了对所有子问题的最优解<br>4.证明子问题是重叠的（这一步不是动态规划正确性必需的，但是如果子问题无重叠，则效率与一般递归是相同的）</p><h3 id="动态规划与其它算法的关系"><a href="#动态规划与其它算法的关系" class="headerlink" title="动态规划与其它算法的关系"></a>动态规划与其它算法的关系</h3><p>这一章我们将会介绍分治和贪心算法的核心思想，并与动态规划算法进行比较。</p><h4 id="分治"><a href="#分治" class="headerlink" title="分治"></a>分治</h4><p>解决分治问题的时候，思路就是想办法把问题的规模减小，有时候减小一个，有时候减小一半，然后将每个小问题的解以及当前的情况组合起来得出最终的结果。例如归并排序和快速排序，归并排序将要排序的数组平均地分成两半，快速排序将数组随机地分成两半。然后不断地对它们递归地进行处理。</p><p>这里存在有最优的子结构，即原数组的排序结果是在子数组排序的结果上组合出来的，但是不存在重复子问题，因为不断地对待排序的数组进行对半分的时候，两半边的数据并不重叠，分别解决左半边和右半边的两个子问题的时候，没有子问题重复出现，这是动态规划和分治的区别。</p><h4 id="贪心"><a href="#贪心" class="headerlink" title="贪心"></a>贪心</h4><p>关于最优子结构</p><p>贪心：每一步的最优解一定包含上一步的最优解，上一步之前的最优解无需记录<br>动态规划：全局最优解中一定包含某个局部最优解，但不一定包含上一步的局部最优解，因此需要记录之前的所有的局部最优解<br>关于子问题最优解组合成原问题最优解的组合方式</p><p>贪心：如果把所有的子问题看成一棵树的话，贪心从根出发，每次向下遍历最优子树即可，这里的最优是贪心意义上的最优。此时不需要知道一个节点的所有子树情况，于是构不成一棵完整的树<br>动态规划：动态规划需要对每一个子树求最优解，直至下面的每一个叶子的值，最后得到一棵完整的树，在所有子树都得到最优解后，将他们组合成答案<br>结果正确性</p><p><img src="C:/Users/%E6%9D%8E%E5%BB%BA%E4%B8%9A/AppData/Roaming/Tencent/Users/2548154814/QQ/WinTemp/RichOle/06J79F%5DO3J68(X1Z)0M@PPT.png" alt="img"></p>]]></content>
      
      
      <categories>
          
          <category> 算法 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 动态规划 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>递增数列</title>
      <link href="/2023/01/15/%E9%80%92%E5%A2%9E%E6%95%B0%E5%88%97/"/>
      <url>/2023/01/15/%E9%80%92%E5%A2%9E%E6%95%B0%E5%88%97/</url>
      
        <content type="html"><![CDATA[<h3 id="递增序列"><a href="#递增序列" class="headerlink" title="递增序列"></a>递增序列</h3><h3 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h3><p><strong>本题为填空题，只需要算出结果后，在代码中使用输出语句将所填结果输出即可。</strong></p><p>对于一个字母矩阵，我们称矩阵中的一个递增序列是指在矩阵中找到两个字母，它们在同一行，同一列，或者在同一 4545 度的斜线上，这两个字母从左向右看、或者从上向下看是递增的。</p><p>例如，如下矩阵中</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">LANN</span><br><span class="line">QIAO</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>有LN、LN、AN、AN、IO、AO、LQ、AI、NO、NO、AQ、IN、ANLN、LN、AN、AN、IO、AO、LQ、AI、NO、NO、AQ、IN、AN 等 1313 个 递增序列。注意当两个字母是从左下到右上排列时，从左向右看和从上向下看 是不同的顺序。</p><p>对于下面的 3030 行 5050 列的矩阵，请问总共有多少个递增序列？</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">VLPWJVVNNZSWFGHSFRBCOIJTPYNEURPIGKQGPSXUGNELGRVZAG</span><br><span class="line">SDLLOVGRTWEYZKKXNKIRWGZWXWRHKXFASATDWZAPZRNHTNNGQF</span><br><span class="line">ZGUGXVQDQAEAHOQEADMWWXFBXECKAVIGPTKTTQFWSWPKRPSMGA</span><br><span class="line">BDGMGYHAOPPRRHKYZCMFZEDELCALTBSWNTAODXYVHQNDASUFRL</span><br><span class="line">YVYWQZUTEPFSFXLTZBMBQETXGXFUEBHGMJKBPNIHMYOELYZIKH</span><br><span class="line">ZYZHSLTCGNANNXTUJGBYKUOJMGOGRDPKEUGVHNZJZHDUNRERBU</span><br><span class="line">XFPTZKTPVQPJEMBHNTUBSMIYEGXNWQSBZMHMDRZZMJPZQTCWLR</span><br><span class="line">ZNXOKBITTPSHEXWHZXFLWEMPZTBVNKNYSHCIQRIKQHFRAYWOPG</span><br><span class="line">MHJKFYYBQSDPOVJICWWGGCOZSBGLSOXOFDAADZYEOBKDDTMQPA</span><br><span class="line">VIDPIGELBYMEVQLASLQRUKMXSEWGHRSFVXOMHSJWWXHIBCGVIF</span><br><span class="line">GWRFRFLHAMYWYZOIQODBIHHRIIMWJWJGYPFAHZZWJKRGOISUJC</span><br><span class="line">EKQKKPNEYCBWOQHTYFHHQZRLFNDOVXTWASSQWXKBIVTKTUIASK</span><br><span class="line">PEKNJFIVBKOZUEPPHIWLUBFUDWPIDRJKAZVJKPBRHCRMGNMFWW</span><br><span class="line">CGZAXHXPDELTACGUWBXWNNZNDQYYCIQRJCULIEBQBLLMJEUSZP</span><br><span class="line">RWHHQMBIJWTQPUFNAESPZHAQARNIDUCRYQAZMNVRVZUJOZUDGS</span><br><span class="line">PFGAYBDEECHUXFUZIKAXYDFWJNSAOPJYWUIEJSCORRBVQHCHMR</span><br><span class="line">JNVIPVEMQSHCCAXMWEFSYIGFPIXNIDXOTXTNBCHSHUZGKXFECL</span><br><span class="line">YZBAIIOTWLREPZISBGJLQDALKZUKEQMKLDIPXJEPENEIPWFDLP</span><br><span class="line">HBQKWJFLSEXVILKYPNSWUZLDCRTAYUUPEITQJEITZRQMMAQNLN</span><br><span class="line">DQDJGOWMBFKAIGWEAJOISPFPLULIWVVALLIIHBGEZLGRHRCKGF</span><br><span class="line">LXYPCVPNUKSWCCGXEYTEBAWRLWDWNHHNNNWQNIIBUCGUJYMRYW</span><br><span class="line">CZDKISKUSBPFHVGSAVJBDMNPSDKFRXVVPLVAQUGVUJEXSZFGFQ</span><br><span class="line">IYIJGISUANRAXTGQLAVFMQTICKQAHLEBGHAVOVVPEXIMLFWIYI</span><br><span class="line">ZIIFSOPCMAWCBPKWZBUQPQLGSNIBFADUUJJHPAIUVVNWNWKDZB</span><br><span class="line">HGTEEIISFGIUEUOWXVTPJDVACYQYFQUCXOXOSSMXLZDQESHXKP</span><br><span class="line">FEBZHJAGIFGXSMRDKGONGELOALLSYDVILRWAPXXBPOOSWZNEAS</span><br><span class="line">VJGMAOFLGYIFLJTEKDNIWHJAABCASFMAKIENSYIZZSLRSUIPCJ</span><br><span class="line">BMQGMPDRCPGWKTPLOTAINXZAAJWCPUJHPOUYWNWHZAKCDMZDSR</span><br><span class="line">RRARTVHZYYCEDXJQNQAINQVDJCZCZLCQWQQIKUYMYMOVMNCBVY</span><br><span class="line">ABTCRRUXVGYLZILFLOFYVWFFBZNFWDZOADRDCLIRFKBFBHMAXX</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="运行限制"><a href="#运行限制" class="headerlink" title="运行限制"></a>运行限制</h3><ul><li>最大运行时间：1s</li><li>最大运行内存: 128M</li></ul><h2 id="代-码："><a href="#代-码：" class="headerlink" title="代 码："></a>代 码：</h2><p>一个简单的模拟题 注意一下题目 左下到右上的顺序不一样  所以只要不等于就可以了</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">VLPWJVVNNZSWFGHSFRBCOIJTPYNEURPIGKQGPSXUGNELGRVZAG</span></span><br><span class="line"><span class="comment">SDLLOVGRTWEYZKKXNKIRWGZWXWRHKXFASATDWZAPZRNHTNNGQF</span></span><br><span class="line"><span class="comment">ZGUGXVQDQAEAHOQEADMWWXFBXECKAVIGPTKTTQFWSWPKRPSMGA</span></span><br><span class="line"><span class="comment">BDGMGYHAOPPRRHKYZCMFZEDELCALTBSWNTAODXYVHQNDASUFRL</span></span><br><span class="line"><span class="comment">YVYWQZUTEPFSFXLTZBMBQETXGXFUEBHGMJKBPNIHMYOELYZIKH</span></span><br><span class="line"><span class="comment">ZYZHSLTCGNANNXTUJGBYKUOJMGOGRDPKEUGVHNZJZHDUNRERBU</span></span><br><span class="line"><span class="comment">XFPTZKTPVQPJEMBHNTUBSMIYEGXNWQSBZMHMDRZZMJPZQTCWLR</span></span><br><span class="line"><span class="comment">ZNXOKBITTPSHEXWHZXFLWEMPZTBVNKNYSHCIQRIKQHFRAYWOPG</span></span><br><span class="line"><span class="comment">MHJKFYYBQSDPOVJICWWGGCOZSBGLSOXOFDAADZYEOBKDDTMQPA</span></span><br><span class="line"><span class="comment">VIDPIGELBYMEVQLASLQRUKMXSEWGHRSFVXOMHSJWWXHIBCGVIF</span></span><br><span class="line"><span class="comment">GWRFRFLHAMYWYZOIQODBIHHRIIMWJWJGYPFAHZZWJKRGOISUJC</span></span><br><span class="line"><span class="comment">EKQKKPNEYCBWOQHTYFHHQZRLFNDOVXTWASSQWXKBIVTKTUIASK</span></span><br><span class="line"><span class="comment">PEKNJFIVBKOZUEPPHIWLUBFUDWPIDRJKAZVJKPBRHCRMGNMFWW</span></span><br><span class="line"><span class="comment">CGZAXHXPDELTACGUWBXWNNZNDQYYCIQRJCULIEBQBLLMJEUSZP</span></span><br><span class="line"><span class="comment">RWHHQMBIJWTQPUFNAESPZHAQARNIDUCRYQAZMNVRVZUJOZUDGS</span></span><br><span class="line"><span class="comment">PFGAYBDEECHUXFUZIKAXYDFWJNSAOPJYWUIEJSCORRBVQHCHMR</span></span><br><span class="line"><span class="comment">JNVIPVEMQSHCCAXMWEFSYIGFPIXNIDXOTXTNBCHSHUZGKXFECL</span></span><br><span class="line"><span class="comment">YZBAIIOTWLREPZISBGJLQDALKZUKEQMKLDIPXJEPENEIPWFDLP</span></span><br><span class="line"><span class="comment">HBQKWJFLSEXVILKYPNSWUZLDCRTAYUUPEITQJEITZRQMMAQNLN</span></span><br><span class="line"><span class="comment">DQDJGOWMBFKAIGWEAJOISPFPLULIWVVALLIIHBGEZLGRHRCKGF</span></span><br><span class="line"><span class="comment">LXYPCVPNUKSWCCGXEYTEBAWRLWDWNHHNNNWQNIIBUCGUJYMRYW</span></span><br><span class="line"><span class="comment">CZDKISKUSBPFHVGSAVJBDMNPSDKFRXVVPLVAQUGVUJEXSZFGFQ</span></span><br><span class="line"><span class="comment">IYIJGISUANRAXTGQLAVFMQTICKQAHLEBGHAVOVVPEXIMLFWIYI</span></span><br><span class="line"><span class="comment">ZIIFSOPCMAWCBPKWZBUQPQLGSNIBFADUUJJHPAIUVVNWNWKDZB</span></span><br><span class="line"><span class="comment">HGTEEIISFGIUEUOWXVTPJDVACYQYFQUCXOXOSSMXLZDQESHXKP</span></span><br><span class="line"><span class="comment">FEBZHJAGIFGXSMRDKGONGELOALLSYDVILRWAPXXBPOOSWZNEAS</span></span><br><span class="line"><span class="comment">VJGMAOFLGYIFLJTEKDNIWHJAABCASFMAKIENSYIZZSLRSUIPCJ</span></span><br><span class="line"><span class="comment">BMQGMPDRCPGWKTPLOTAINXZAAJWCPUJHPOUYWNWHZAKCDMZDSR</span></span><br><span class="line"><span class="comment">RRARTVHZYYCEDXJQNQAINQVDJCZCZLCQWQQIKUYMYMOVMNCBVY</span></span><br><span class="line"><span class="comment">ABTCRRUXVGYLZILFLOFYVWFFBZNFWDZOADRDCLIRFKBFBHMAXX</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="type">int</span> shuzu[<span class="number">30</span>][<span class="number">50</span>]=&#123;<span class="number">0</span>&#125;;</span><br><span class="line">  <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;<span class="number">30</span>;i++)<span class="comment">//初始化矩阵 </span></span><br><span class="line">  &#123;</span><br><span class="line">  <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;<span class="number">50</span>;j++)</span><br><span class="line">  &#123;<span class="type">char</span> s1;</span><br><span class="line">  cin&gt;&gt;s1;</span><br><span class="line">  <span class="type">int</span> a=s1;</span><br><span class="line">  shuzu[i][j]=a;</span><br><span class="line">  </span><br><span class="line">&#125;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line"></span><br><span class="line">   <span class="comment">/*输出矩阵 </span></span><br><span class="line"><span class="comment">    for(int i=0;i&lt;30;i++)//初始化矩阵 </span></span><br><span class="line"><span class="comment">    &#123;</span></span><br><span class="line"><span class="comment">    for(int j=0;j&lt;50;j++)</span></span><br><span class="line"><span class="comment">    &#123;</span></span><br><span class="line"><span class="comment">    cout&lt;&lt;shuzu[i][j]&lt;&lt; &#x27; &#x27;;</span></span><br><span class="line"><span class="comment">    </span></span><br><span class="line"><span class="comment">  &#125;</span></span><br><span class="line"><span class="comment">  cout&lt;&lt;endl;</span></span><br><span class="line"><span class="comment">    &#125;*/</span></span><br><span class="line">  <span class="type">int</span> sum=<span class="number">0</span>;</span><br><span class="line">   <span class="type">int</span> m;</span><br><span class="line">  <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;<span class="number">30</span>;i++)</span><br><span class="line">  &#123;</span><br><span class="line">  <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;<span class="number">50</span>;j++)</span><br><span class="line">  &#123; m=<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span>(j+m&lt;<span class="number">50</span>)</span><br><span class="line">&#123;<span class="comment">//同一行的比较 </span></span><br><span class="line"><span class="keyword">if</span>(shuzu[i][j]&lt;shuzu[i][j+m])&#123;sum++;&#125; </span><br><span class="line">m++;</span><br><span class="line">&#125;</span><br><span class="line"> m=<span class="number">1</span>;<span class="comment">//同一列比较 </span></span><br><span class="line"><span class="keyword">while</span>(i+m&lt;<span class="number">30</span>)</span><br><span class="line">&#123;<span class="keyword">if</span>(shuzu[i][j]&lt;shuzu[i+m][j])</span><br><span class="line">&#123;sum++;&#125;</span><br><span class="line">m++;</span><br><span class="line"> &#125;</span><br><span class="line"> </span><br><span class="line"> m=<span class="number">1</span>;</span><br><span class="line"> <span class="keyword">while</span>(m+i&lt;<span class="number">30</span>&amp;&amp;m+j&lt;<span class="number">50</span>)<span class="comment">//左上到右下 </span></span><br><span class="line"> &#123;<span class="keyword">if</span>(shuzu[i][j]&lt;shuzu[i+m][j+m]) </span><br><span class="line"> &#123;</span><br><span class="line"> sum++;</span><br><span class="line"> &#125;</span><br><span class="line"> m++;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;<span class="number">30</span>;i++)<span class="comment">//左下到右上 </span></span><br><span class="line">    &#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;<span class="number">50</span>;j++)</span><br><span class="line">    &#123;m=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span>(i-m&gt;<span class="number">-1</span>&amp;&amp;m+j!=<span class="number">50</span>)</span><br><span class="line">    &#123;<span class="keyword">if</span>(shuzu[i][j]!=shuzu[i-m][j+m]) </span><br><span class="line"> &#123;</span><br><span class="line">sum++;</span><br><span class="line"> &#125;</span><br><span class="line">m++;</span><br><span class="line">&#125;</span><br><span class="line">    &#125;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"> cout&lt;&lt;sum&lt;&lt;endl; </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 算法 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 数列 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>等差素数列</title>
      <link href="/2023/01/15/%E7%AD%89%E5%B7%AE%E7%B4%A0%E6%95%B0%E5%88%97/"/>
      <url>/2023/01/15/%E7%AD%89%E5%B7%AE%E7%B4%A0%E6%95%B0%E5%88%97/</url>
      
        <content type="html"><![CDATA[<h1 id="等差素数列"><a href="#等差素数列" class="headerlink" title="等差素数列"></a>等差素数列</h1><h3 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h3><p><strong>本题为填空题，只需要算出结果后，在代码中使用输出语句将所填结果输出即可。</strong></p><p>2,3,5,7,11,13,….2,3,5,7,11,13,…. 是素数序列。 类似：7,37,67,97,127,1577,37,67,97,127,157 这样完全由素数组成的等差数列，叫等差素数数列。</p><p>上边的数列公差为 3030，长度为 66。</p><p>20042004 年，格林与华人陶哲轩合作证明了：存在任意长度的素数等差数列。 这是数论领域一项惊人的成果！</p><p>有这一理论为基础，请你借助手中的计算机，满怀信心地搜索：</p><p>长度为 1010 的等差素数列，其公差最小值是多少？</p><h3 id="代码："><a href="#代码：" class="headerlink" title="代码："></a>代码：</h3><p>很暴力，就是简单的枚举</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"> <span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"> <span class="meta">#<span class="keyword">include</span><span class="string">&lt;vector&gt;</span></span></span><br><span class="line"> <span class="meta">#<span class="keyword">include</span><span class="string">&lt;algorithm&gt;</span> </span></span><br><span class="line"> <span class="meta">#<span class="keyword">include</span><span class="string">&lt;math.h&gt;</span></span></span><br><span class="line"> <span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">sushu</span><span class="params">(<span class="type">int</span> a)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(a==<span class="number">1</span> || a==<span class="number">2</span> || a==<span class="number">3</span>)    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="type">int</span> j = <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">for</span>(j=<span class="number">2</span>;j&lt;=<span class="built_in">sqrt</span>(a);j++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(a%j==<span class="number">0</span>)    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> <span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"> </span>&#123;</span><br><span class="line"><span class="comment">//有那么十个数 这是个数字除了他们自己和他本身无其他因数</span></span><br><span class="line"><span class="comment">//并且还是等差数列</span></span><br><span class="line"></span><br><span class="line">vector &lt;<span class="type">int</span>&gt;mem;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt;array;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">2</span>;i&lt;<span class="number">1000</span>;i++)<span class="comment">//首元素 </span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span>(<span class="built_in">sushu</span>(i)) <span class="comment">//如果第一个元素是素数的话 </span></span><br><span class="line">&#123;</span><br><span class="line">array.<span class="built_in">push_back</span>(i);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125; </span><br><span class="line"><span class="type">int</span> top,D;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;array.<span class="built_in">size</span>();i++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> d=<span class="number">1</span>;d&lt;<span class="number">500</span>;d++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span>(<span class="built_in">sushu</span>(array[i]+d)&amp;&amp;<span class="built_in">sushu</span>(array[i]+<span class="number">2</span>*d)&amp;&amp;<span class="built_in">sushu</span>(array[i]+<span class="number">3</span>*d)&amp;&amp;<span class="built_in">sushu</span>(array[i]+<span class="number">4</span>*d)&amp;&amp;<span class="built_in">sushu</span>(array[i]+<span class="number">5</span>*d)&amp;&amp;<span class="built_in">sushu</span>(array[i]+<span class="number">6</span>*d)&amp;&amp;<span class="built_in">sushu</span>(array[i]+<span class="number">7</span>*d)&amp;&amp;<span class="built_in">sushu</span>(array[i]+<span class="number">8</span>*d)&amp;&amp;<span class="built_in">sushu</span>(array[i]+<span class="number">9</span>*d))</span><br><span class="line">&#123;</span><br><span class="line">cout&lt;&lt;<span class="string">&quot;首元素是&quot;</span>&lt;&lt;array[i]&lt;&lt;endl;top=array[i];</span><br><span class="line">cout&lt;&lt;<span class="string">&quot;公差是&quot;</span>&lt;&lt;d&lt;&lt;endl;D=d;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;<span class="number">10</span>;i++)</span><br><span class="line">&#123;</span><br><span class="line">cout&lt;&lt;top+i*D&lt;&lt;endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> </span><br><span class="line">   <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 算法 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 数列 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>等差数列</title>
      <link href="/2023/01/15/%E7%AD%89%E5%B7%AE%E6%95%B0%E5%88%97/"/>
      <url>/2023/01/15/%E7%AD%89%E5%B7%AE%E6%95%B0%E5%88%97/</url>
      
        <content type="html"><![CDATA[<h1 id="等差数列"><a href="#等差数列" class="headerlink" title="等差数列"></a>等差数列</h1><h3 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h3><p>数学老师给小明出了一道等差数列求和的题目。但是粗心的小明忘记了一 部分的数列，只记得其中 NN 个整数。</p><p>现在给出这 NN 个整数，小明想知道包含这 NN 个整数的最短的等差数列有几项？</p><h3 id="输入描述"><a href="#输入描述" class="headerlink" title="输入描述"></a>输入描述</h3><p>输入的第一行包含一个整数 NN。</p><p>第二行包含 NN 个整数 A_1,A_2,··· ,A_NA1,A2,⋅⋅⋅,AN。(注意 A_1A1 ∼ A_NAN 并不一定是按等差数列中的顺序给出)</p><p>其中，2 \leq N \leq 10^5，0 \leq A_i \leq 10^92≤N≤105，0≤Ai≤109。</p><h3 id="输出描述"><a href="#输出描述" class="headerlink" title="输出描述"></a>输出描述</h3><p>输出一个整数表示答案。</p><h3 id="输入输出样例"><a href="#输入输出样例" class="headerlink" title="输入输出样例"></a>输入输出样例</h3><h4 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h4><blockquote><p>输入</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">5</span><br><span class="line">2 6 4 10 20</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>输出</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">10</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>样例说明： 包含 2、6、4、10、20 的最短的等差数列是 2、4、6、8、10、12、14、16、 18、20。</p></blockquote><h3 id="运行限制"><a href="#运行限制" class="headerlink" title="运行限制"></a>运行限制</h3><ul><li>最大运行时间：1s</li><li>最大运行内存: 256M</li></ul><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;algorithm&gt;</span> </span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;<span class="comment">//这个题目需要排个序 遍历整个数组  找到相邻的最小公差  </span></span><br><span class="line"><span class="comment">//然后从最小值加多少个这个最小公差才能到达这个结果 </span></span><br><span class="line">  <span class="type">int</span> N;<span class="type">int</span> m;</span><br><span class="line">  cin&gt;&gt;N;</span><br><span class="line">  vector&lt;<span class="type">int</span>&gt;array;</span><br><span class="line">  <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;N;i++)</span><br><span class="line">  &#123;</span><br><span class="line">  </span><br><span class="line">  cin&gt;&gt;m;</span><br><span class="line">  array.<span class="built_in">push_back</span>(m);</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="built_in">sort</span>(array.<span class="built_in">begin</span>(),array.<span class="built_in">end</span>());<span class="comment">//排序</span></span><br><span class="line">  <span class="keyword">if</span>(N==<span class="number">1</span>)</span><br><span class="line">  &#123;</span><br><span class="line">  cout&lt;&lt;<span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">else</span></span><br><span class="line">  &#123;</span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">  <span class="type">int</span> min_1=array[<span class="number">1</span>]-array[<span class="number">0</span>];</span><br><span class="line">  <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;N<span class="number">-1</span>;i++)</span><br><span class="line">  &#123;</span><br><span class="line"></span><br><span class="line">  min_1=<span class="built_in">min</span>(min_1,array[i+<span class="number">1</span>]-array[i]);</span><br><span class="line">  &#125; </span><br><span class="line">  <span class="keyword">if</span>(min_1==<span class="number">0</span>)<span class="comment">//如果公差是0，直接输出N结束 </span></span><br><span class="line">  &#123;</span><br><span class="line">  cout&lt;&lt;N;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="type">int</span> sum=(array[N<span class="number">-1</span>]-array[<span class="number">0</span>])/min_1  +<span class="number">1</span>;</span><br><span class="line">    cout&lt;&lt;sum&lt;&lt;endl;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 算法 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 数列 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>单词分析</title>
      <link href="/2023/01/15/%E5%8D%95%E8%AF%8D%E5%88%86%E6%9E%90/"/>
      <url>/2023/01/15/%E5%8D%95%E8%AF%8D%E5%88%86%E6%9E%90/</url>
      
        <content type="html"><![CDATA[<h1 id="单词分析"><a href="#单词分析" class="headerlink" title="单词分析"></a>单词分析</h1><h3 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h3><p>小蓝正在学习一门神奇的语言，这门语言中的单词都是由小写英文字母组 成，有些单词很长，远远超过正常英文单词的长度。小蓝学了很长时间也记不住一些单词，他准备不再完全记忆这些单词，而是根据单词中哪个字母出现得最多来分辨单词。</p><p>现在，请你帮助小蓝，给了一个单词后，帮助他找到出现最多的字母和这 个字母出现的次数。</p><h3 id="输入描述"><a href="#输入描述" class="headerlink" title="输入描述"></a>输入描述</h3><p>输入一行包含一个单词，单词只由小写英文字母组成。</p><p>对于所有的评测用例，输入的单词长度不超过 1000。</p><h3 id="输出描述"><a href="#输出描述" class="headerlink" title="输出描述"></a>输出描述</h3><p>输出两行，第一行包含一个英文字母，表示单词中出现得最多的字母是哪 个。如果有多个字母出现的次数相等，输出字典序最小的那个。</p><p>第二行包含一个整数，表示出现得最多的那个字母在单词中出现的次数。</p><h3 id="输入输出样例"><a href="#输入输出样例" class="headerlink" title="输入输出样例"></a>输入输出样例</h3><h4 id="示例-1"><a href="#示例-1" class="headerlink" title="示例 1"></a>示例 1</h4><blockquote><p>输入</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">lanqiao</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>输出</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">a</span><br><span class="line">2</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="示例-2"><a href="#示例-2" class="headerlink" title="示例 2"></a>示例 2</h4><blockquote><p>输入</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">longlonglongistoolong</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>输出</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">o</span><br><span class="line">6</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="运行限制"><a href="#运行限制" class="headerlink" title="运行限制"></a>运行限制</h3><ul><li>最大运行时间：1s</li><li>最大运行内存: 256M</li></ul><h1 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h1><p>思路：用哈希表存储每个字母出现的次数</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="comment">// 哈希表</span></span><br><span class="line">  string s1;</span><br><span class="line">  cin&gt;&gt;s1;</span><br><span class="line">  <span class="type">int</span> hash[<span class="number">26</span>]=&#123;<span class="number">0</span>&#125;;<span class="comment">//小写字母 的ascii码为97</span></span><br><span class="line">  <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;s1.<span class="built_in">size</span>();i++)</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="type">int</span> s=s1[i];</span><br><span class="line">    hash[s<span class="number">-97</span>]++;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="type">int</span> max=<span class="number">0</span>;</span><br><span class="line">  <span class="type">int</span> max_xiabiao=<span class="number">0</span>;</span><br><span class="line">  <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;<span class="number">26</span>;i++)</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="keyword">if</span>(hash[i]&gt;max)</span><br><span class="line">    &#123;</span><br><span class="line">      max=hash[i];</span><br><span class="line">      max_xiabiao=i;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">   <span class="type">char</span> answer=max_xiabiao+<span class="number">97</span>;</span><br><span class="line">   cout&lt;&lt;answer&lt;&lt;endl;</span><br><span class="line">   cout&lt;&lt;max;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 算法 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 字符串 </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
